{"remainingRequest":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\index.vue","mtime":1646613448356},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"C:/Users/Evicce/Desktop/work/code2/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Users/Evicce/Desktop/work/code2/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _createForOfIteratorHelper from \"C:/Users/Evicce/Desktop/work/code2/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"C:/Users/Evicce/Desktop/work/code2/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _objectSpread from \"C:/Users/Evicce/Desktop/work/code2/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _methods;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport crudIndAtomInfo, { getColumnByTabel, getDimensions, getGenAndDerivedInd, getAllInds, getGenInd, getTablesById, bizNameIsContract, abolish, startProcess, delAtom, getHisList, checkRef, approveDetailByOriginalInstId, checkDefRule } from '@/api/indicators/indAtomInfo';\nimport crudIndDimInfo, { getDimInfos } from '@/api/indicators/indDimInfo';\nimport crudIndDimVal, { getDimValues, getDimValuesChildren } from '@/api/indicators/indDimValue';\nimport { getAllSource, getDimInfo, process } from '@/api/indicators/indIndicatorInfo';\nimport CRUD, { crud, form, header, presenter } from '@crud/crud';\nimport rrOperation from '@crud/RR.operation';\nimport crudOperation from '@crud/CRUD.operation';\nimport udOperation from '@crud/UD.operation';\nimport pagination from '@crud/Pagination';\nimport category from \"../../category/categoryNew\";\nimport dimensionPage from \"../atom/dimension/index\";\nimport atomPage from \"./atomPage\";\nimport selectAtom from \"./selectAtom\";\nimport { isSignedInteger, isArabicFigures, validateStrLenFiveHundred, validateStrLenHundred, validateStrLenHalfHundred } from '@/utils/validator';\nimport { getClassifications } from '@/api/indicators/indClassification';\nimport crudIndCategory from '@/api/indicators/indCategory';\nimport { getDepts as _getDepts, getCurrentDept as _getCurrentDept } from '@/utils/system';\nimport Treeselect from '@riophae/vue-treeselect';\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\nimport DimValTreeSelect from \"../../dimension/DimValTreeSelect\";\nimport qs from 'qs';\nimport { v4 as uuidv4 } from 'uuid';\nimport { checkDeptUser } from '@/api/workflow/graphConfig'; // crud交由presenter持有\n\nvar defaultCrud = CRUD({\n  title: '指标信息',\n  url: crudIndAtomInfo.url,\n  sort: 'id,desc',\n  crudMethod: _objectSpread({}, crudIndAtomInfo.crud)\n});\nvar defaultForm = {\n  id: null,\n  categoryId: null,\n  sourceDataSource: 'local',\n  targetDataSource: 'local',\n  bizCode: null,\n  bizName: null,\n  genBizName: null,\n  // 根指标名称\n  indFirstType: null,\n  // 指标一级分类\n  indSecondType: null,\n  // 指标二级分类\n  businessDept: null,\n  // 业务属主部门\n  indLevel: null,\n  // 指标层级\n  isDeptQuery: true,\n  // 是否部门内部都可查询指标结果\n  isAdditionalRecording: 'false',\n  // 指标结果是否会补录\n  indDimAndValueRelations: [],\n  indDefinition: null,\n  // 指标定义\n  indDefRule: null,\n  // 指标口径规则\n  indValueRange1: null,\n  // 指标取值范围1\n  indValueRange2: null,\n  // 指标取值范围2\n  indInnerWarnValue: '',\n  // 指标内部警戒值（表示预警）\n  indInnerWarnPassValue: '',\n  // 指标内部警戒值（表示通过）\n  indInnerWarnFlg: '',\n  indMonWarnValue: '',\n  // 指标监管警戒值（表示预警）\n  indMonWarnPassValue: '',\n  // 指标监管警戒值（表示通过）\n  indMonWarnFlg: '',\n  currency: null,\n  // 币种\n  indValueType: null,\n  // 指标数值属性\n  indFrequency: [],\n  // 指标生成频率\n  indCalType: null,\n  // 度量单位\n  indSafeLevel: null,\n  // 指标安全等级\n  indMonField: null,\n  // 监管属性\n  indProcessSys: null,\n  // 权威加工系统\n  indDataType: null,\n  // 数据类型\n  indDataForm: null,\n  // 数据格式\n  indReference: null,\n  // 参考依据\n  isRealTimeProcess: false,\n  // 是否需要实时加工\n  indCurrentValue: true,\n  // 当期值\n  indContemporaneousValue: true,\n  // 同期值\n  indYearOnYearIncrement: true,\n  // 同比增量\n  indYearOnYearGrowth: true,\n  // 同比增幅\n  indPreviousPeriodValue: true,\n  // 上期值\n  indMonthOnMonthIncrement: true,\n  // 环比增量\n  indMonthOnMonthGrowth: true,\n  // 环比增幅\n  indInitialValueOfTheYear: true,\n  // 年初值\n  indYearOnYearIncre: true,\n  // 较年初增量\n  indIncreaseOverTheBeginningOfTheYear: true,\n  // 较年初增幅\n  indVerifyStatus: null,\n  // 指标审批状态\n  indDeployStatus: null,\n  // 指标发布状态\n  indVerifyId: null,\n  indStandSource: null,\n  // 标准来源\n  ieProp: null,\n  createTable: null,\n  keepHistory: '1',\n  bizTabCode: null,\n  bizFlag: null,\n  bizCalcSql: null,\n  // 实时指标取数SQL\n  bizBatchCalcSql: null,\n  // 批量指标取数SQL\n  dimNames: null,\n  bizDesc: null,\n  calcSeq: null,\n  calcFreq: null,\n  crtUserCode: null,\n  crtOrgCode: null,\n  crtDate: null,\n  updUserCode: null,\n  updOrgCode: null,\n  updDate: null,\n  tenant: null,\n  retention: null,\n  tableShare: '1',\n  status: '2',\n  categoryType: '0',\n  atomDimensions: [],\n  indDefRuleStr: '',\n  indDefRuleVal: '',\n  submitType: 1\n};\nexport default {\n  name: 'IndAtomInfo',\n  components: {\n    Treeselect: Treeselect,\n    pagination: pagination,\n    crudOperation: crudOperation,\n    rrOperation: rrOperation,\n    udOperation: udOperation,\n    category: category,\n    dimensionPage: dimensionPage,\n    atomPage: atomPage,\n    selectAtom: selectAtom,\n    DimValTreeSelect: DimValTreeSelect\n  },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  dicts: ['IE_PROP', 'CREATE_TABLE', 'YN', 'RETENTION', 'IE_STATUS', 'GEN_IND', 'IND_FIRST_TYPE', 'IND_SECOND_TYPE', 'BUSSINESS_DEPT', 'IND_LEVEL', 'IND_CURRENCY', 'IND_VALUE_TYPE', 'IE_FREQUENCY', 'IND_CAL_TYPE', 'IND_SAFE_LEVEL', 'IND_MON_FIELD', 'IND_PROCESS_SYS', 'IND_DATA_TYPE', 'IND_STAND_SOURCE', 'DIMENSION_CATEGORY', 'DIMENSION', 'LAST_LEVEL_DIMENSION_VALUE', 'IND_VERIFY_STATUS', 'IND_DEPLOY_STATUS'],\n  data: function data() {\n    var h = this.$createElement;\n    return {\n      categoryType: '0',\n      sign: {\n        isSign: '0',\n        signDeptId: null,\n        signDeptName: null,\n        oprType: 1,\n        title: '发起审批流程',\n        msg: '是否发起审批流程? ',\n        data: null\n      },\n      showSign: false,\n      showSignOrg: false,\n      errmsgIndDefRule: false,\n      indDefRuleErr: '指标口径规则不能为空',\n      signTitle: '发起审批流程',\n      filterText: '',\n      indexOrgTab: {\n        menuLoading: false,\n        data: [],\n        loading: false,\n        operators: [],\n        strictly: true\n      },\n      dimAndValueObject1: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject2: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject3: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject4: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject5: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject6: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject7: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject8: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject9: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      dimAndValueObject10: {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      },\n      errmsgInnerWarning: false,\n      errmsgMonWarning: false,\n      innerwarningErrMsg: '请选择运算符',\n      monwarningErrMsg: '请选择运算符',\n      table: {\n        columns: {\n          sourceDataSource: 'hidden',\n          targetDataSource: 'hidden',\n          keepHistory: 'hidden',\n          bizDesc: 'hidden',\n          crtOrgCode: 'hidden',\n          crtDate: 'hidden',\n          updUserCode: 'hidden',\n          updOrgCode: 'hidden',\n          updDate: 'hidden',\n          tenant: 'hidden'\n        }\n      },\n      permission: {\n        processA: ['indAtomInfo:processA'],\n        add: ['indAtomInfo:add'],\n        edit: ['indAtomInfo:edit'],\n        del: ['indAtomInfo:del'],\n        details: ['indAtomInfo:details'],\n        workflow: ['indAtomInfo:workflow'],\n        batchCheckResult: ['indAtomInfo:batchCheckResult'],\n        historyVersion: ['indAtomInfo:historyVersion'],\n        cancelInd: ['indAtomInfo:cancelInd'],\n        processVerify: ['indAtomInfo:processVerify'],\n        historyVersionDetail: ['indAtomInfo:historyVersionDetail']\n      },\n      rules: {\n        bizName: [\n        /* { required: true, message: '指标名称不能为空', trigger: 'blur' },*/\n        {\n          validator: validateStrLenHundred,\n          trigger: 'blur'\n        }],\n\n        /*ieProp: [\r\n          { required: true, message: '指标类型不能为空', trigger: 'change' }\r\n        ],*/\n\n        /*genBizName: [\r\n          { required: true, message: '根指标不能为空', trigger: 'change' }\r\n        ],*/\n\n        /*indFirstType: [\r\n          { required: true, message: '指标一级分类不能为空', trigger: 'change' }\r\n        ],\r\n        indSecondType: [\r\n          { required: true, message: '指标二级分类不能为空', trigger: 'change' }\r\n        ],*/\n        businessDept: [{\n          required: true,\n          message: '业务属主部门不能为空',\n          trigger: 'change'\n        }],\n\n        /*indLevel: [\r\n          { required: true, message: '指标层级不能为空', trigger: 'change' }\r\n        ],*/\n\n        /*indDefinition: [\r\n          { required: true, message: '指标定义不能为空', trigger: 'blur' },\r\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\r\n        ],*/\n\n        /*indDefRule: [\r\n         /!* { required: this.hasCalc, message: '指标口径规则不能为空', trigger: 'blur' },*!/\r\n          { required: true, message: '指标口径规则不能为空', trigger: 'blur' },\r\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\r\n        ],*/\n        indValueRange1: [{\n          validator: isArabicFigures,\n          trigger: 'blur'\n        }],\n        indValueRange2: [{\n          validator: isArabicFigures,\n          trigger: 'blur'\n        }],\n\n        /*currency: [\r\n          { required: true, message: '币种不能为空', trigger: 'change' }\r\n        ],\r\n        indFrequency: [\r\n          { required: true, message: '指标生成频率不能为空', trigger: 'change' }\r\n        ],\r\n        indCalType: [\r\n          { required: true, message: '度量单位不能为空', trigger: 'change' }\r\n        ],\r\n        indMonField: [\r\n          { required: true, message: '监管属性不能为空', trigger: 'change' }\r\n        ],\r\n        indDataType: [\r\n          { required: true, message: '数据类型不能为空', trigger: 'change' }\r\n        ],*/\n        indDataForm: [{\n          max: 10,\n          message: '数据格式不能超过10字',\n          trigger: ['blur', 'change']\n        }],\n        indReference: [{\n          max: 50,\n          message: '参考不能超过50字',\n          trigger: ['blur', 'change']\n        }],\n        isAdditionalRecording: [{\n          required: true,\n          message: '指标结果是否会补录不能为空',\n          trigger: 'change'\n        }],\n        indProcessSys: [{\n          max: 100,\n          message: '不能超过100字',\n          trigger: ['blur', 'change']\n        }]\n        /*,\r\n        dimension1: [\r\n          {required: true, message: '维度1不能为空', trigger: 'change'}\r\n        ],\r\n        dimensionValue1: [\r\n          {required: true, message: '维度值1不能为空', trigger: 'change'}\r\n        ]*/\n\n      },\n      dimensionRules: {\n        categoryName: [{\n          required: true,\n          message: '指标维度名称不能为空',\n          trigger: 'change'\n        }],\n        classificationId: [{\n          required: true,\n          message: '所属分类不能为空',\n          trigger: 'change'\n        }]\n      },\n      dimensionValueRules: {\n        dimInfoId: [{\n          required: true,\n          message: '所属维度不能为空',\n          trigger: 'change'\n        }],\n        categoryName: [{\n          required: true,\n          message: '指标维度值不能为空',\n          trigger: 'change'\n        }]\n      },\n      signRules: {\n        isSign: [{\n          required: true,\n          message: '请选择是否会签',\n          trigger: 'change'\n        }],\n        signDeptId: [{\n          required: true,\n          message: '请选择会签机构',\n          trigger: 'change'\n        }]\n      },\n      sourceData: [],\n      tableInfo: [],\n      atomDimensions: [],\n      bizTabCodeDis: false,\n      // 计算输日期的页面\n      processDialog: false,\n      // 传给后台的参数\n      processParam: {\n        codes: [],\n        periodDate: ''\n      },\n      dateValue: '',\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      dimensionArr: [],\n      dimensionTitle: '维度',\n      dimensionNumber: 2,\n      dimensionTmp: null,\n      dimensionValueArr: [],\n      dimensionValueTitle: '维度值',\n      dimensionValueNumber: 2,\n      dimensionValueTmp: null,\n      showIndDefRule: false,\n      showIndHistory: false,\n      indInnerWarnValueArr: [1],\n      indInnerWarnValueNumber: 1,\n      indInnerWarnPassValueArr: [1],\n      indInnerWarnPassValueNumber: 1,\n      indMonWarnValueArr: [1],\n      indMonWarnValueNumber: 1,\n      indMonWarnPassValueArr: [1],\n      indMonWarnPassValueNumber: 1,\n      historyData: [],\n      showIndDimensionAdd: false,\n      flowData: [],\n      showFlow: false,\n      dimension: {\n        id: null,\n        classificationId: null,\n        // 所属分类\n        categoryName: null,\n        // 指标维度名称\n        remarks: null,\n        // 备注\n        serialNo: null\n      },\n      showIndDimensionValueAdd: false,\n      dimensionValue: {\n        dimension: null,\n        // 所属维度\n        lastLevelDimensionValue: null,\n        // 上级维度值\n        dimValue: null,\n        // 指标维度值\n        serialNo: null\n      },\n      renderFunc: function renderFunc(h, option) {\n        return h(\"span\", [option.label]);\n      },\n      transferData: [],\n      value: [],\n      indDefRuleStr: '',\n      indDefRuleId: '',\n      indDefRuleVal: '',\n      indDefRuleStrs: [],\n      indDefRuleIds: [],\n      indDefRuleVals: [],\n      genIndArr: [],\n      genAndDerivedIndArr: [],\n      dimInfoArr: [],\n      dimValueArr1: [],\n      dimValueArr2: [],\n      dimValueArr3: [],\n      dimValueArr4: [],\n      dimValueArr5: [],\n      dimValueArr6: [],\n      dimValueArr7: [],\n      dimValueArr8: [],\n      dimValueArr9: [],\n      dimValueArr10: [],\n      parentDimValueArr: [],\n      classificationArr: [],\n      dimValueTmp1: [],\n      dimValueTmp2: [],\n      dimValueTmp3: [],\n      dimValueTmp4: [],\n      dimValueTmp5: [],\n      dimValueTmp6: [],\n      dimValueTmp7: [],\n      dimValueTmp8: [],\n      dimValueTmp9: [],\n      dimValueTmp10: [],\n      dimValueTmpName1: [],\n      dimValueTmpName2: [],\n      dimValueTmpName3: [],\n      dimValueTmpName4: [],\n      dimValueTmpName5: [],\n      dimValueTmpName6: [],\n      dimValueTmpName7: [],\n      dimValueTmpName8: [],\n      dimValueTmpName9: [],\n      dimValueTmpName10: [],\n      formDialog: false,\n      qryIndFirstType: [],\n      qryIndSecondType: [],\n      formIndFirstType: [],\n      formIndSecondType: [],\n      depts: [],\n      hisIeId: null,\n      errmsgDim1: false,\n      errmsgDimV1: false,\n      errmsgDim2: false,\n      errmsgDimV2: false,\n      errmsgDim3: false,\n      errmsgDimV3: false,\n      errmsgDim4: false,\n      errmsgDimV4: false,\n      errmsgDim5: false,\n      errmsgDimV5: false,\n      errmsgDim6: false,\n      errmsgDimV6: false,\n      errmsgDim7: false,\n      errmsgDimV7: false,\n      errmsgDim8: false,\n      errmsgDimV8: false,\n      errmsgDim9: false,\n      errmsgDimV9: false,\n      errmsgDim10: false,\n      errmsgDimV10: false,\n      errmsgIeProp: false,\n      errmsgIndFirstType: false,\n      errmsgIndSecondType: false,\n      isBizNameContract: true,\n      errmsgIndLevel: false,\n      errmsgCurrency: false,\n      errmsgFrequency: false,\n      errmsgIndCalType: false,\n      errmsgIndMonField: false,\n      errmsgIndDataType: false,\n      errmsgIndDefinition: false,\n      errmsgIndDefinitionStr: '指标定义不能为空',\n      errmsgBizName: false,\n      //hasCalc: false\n      hasCalc: true,\n      isSelfRule: false,\n      categorySpan: 6,\n      tableSpan: 18,\n      zoomDirection: 'left'\n    };\n  },\n  created: function created() {\n    this.crud.optShow.del = false;\n    this.crud.optShow.edit = false;\n    this.initDimInfos(2); //this.initDimValuesChildren()\n\n    this.initDimValues(2);\n    this.initClassifications();\n    this.initGenAndDerivedInd();\n    this.initIndFirstType();\n    this.getDepts();\n\n    if (this.query.categoryType == null) {\n      this.query.categoryType = 0;\n    }\n\n    this.isSelfRule = false;\n    this.getCurrentDept();\n    this.resetQuery();\n  },\n  mounted: function mounted() {\n    this.query.bizName = this.$route.query.ieName;\n\n    if (this.query.categoryType == null) {\n      this.query.categoryType = 0;\n    }\n\n    this.crud.refresh();\n    this.sign.isSign = '0';\n    this.sign.signDeptId = null;\n    this.sign.signDeptName = null;\n    this.showSignOrg = false;\n  },\n  watch: {\n    filterText: function filterText(val) {\n      this.$refs.signOrgTree.filter(val);\n    },\n    indDefRuleStr: function indDefRuleStr(val) {\n      if (this.endsWithStr(val)) {\n        this.errmsgIndDefRule = true;\n        this.indDefRuleErr = '口径规则表达式错误';\n      } else {\n        this.errmsgIndDefRule = false;\n        this.indDefRuleErr = '指标口径规则不能为空';\n      }\n    }\n  },\n  methods: (_methods = {\n    resetQuery: function resetQuery() {\n      this.crud.resetQuery(false);\n\n      if (this.categoryType == null) {\n        this.query.categoryType = '0';\n      } else {\n        this.query.categoryType = this.categoryType;\n      } //this.crud.refresh()\n\n    },\n    checkIndDefRule: function checkIndDefRule(val) {\n      var _this2 = this;\n\n      /*if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n        if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n          this.indDefRuleErr = '指标口径规则不能为空'\r\n          this.errmsgIndDefRule = true\r\n        } else if (this.form.indDefRule.length > 500){\r\n          this.indDefRuleErr = '长度不能超过500字符'\r\n          this.errmsgIndDefRule = true\r\n        } else {\r\n          this.indDefRuleErr = '指标口径规则不能为空'\r\n          this.errmsgIndDefRule = false\r\n        }\r\n      } else {\r\n        this.indDefRuleErr = '指标口径规则不能为空'\r\n        this.errmsgIndDefRule = false\r\n      }*/\n      if (this.isSelfRule) {\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = false;\n          return true;\n        }\n      } else {\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else {\n          //合规行校验\n          var formulaFlag = this.checkFormulaExp(this.form.indDefRule);\n\n          if (!formulaFlag) {\n            this.indDefRuleErr = '指标口径规则错误！';\n            this.errmsgIndDefRule = true;\n            return false;\n          }\n\n          var formulaExp = this.setFormulaExp(this.form.indDefRule);\n\n          if (formulaExp == null) {\n            this.indDefRuleErr = '指标口径规则错误！';\n            this.errmsgIndDefRule = true;\n            return false;\n          }\n\n          formulaExp = formulaExp.replaceAll(\"#\", \"[\"); //formulaExp.replaceAll(\"#\", \"[\");\n\n          var data = {\n            indDefRule: this.form.indDefRule,\n            indDefRuleExp: formulaExp,\n            indDefRuleStrs: this.indDefRuleStrs,\n            indDefRuleIds: this.indDefRuleIds\n          };\n          checkDefRule(data).then(function (res) {\n            if (res.code == 0) {\n              console.log(\"data===>\" + res.data);\n              _this2.indDefRuleErr = '指标口径规则不能为空';\n              _this2.errmsgIndDefRule = false;\n              return true;\n            } else {\n              _this2.indDefRuleErr = res.msg;\n              _this2.errmsgIndDefRule = true;\n              return false;\n            }\n          });\n        }\n      }\n    },\n    closeSignDialog: function closeSignDialog() {\n      this.sign.isSign = 0;\n      this.sign.signDeptId = '';\n      this.sign.signDeptName = null;\n      this.showSign = false;\n      this.showSignOrg = false;\n    },\n    changeIsSign: function changeIsSign(val) {\n      this.showSignOrg = val == 1;\n    },\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    checkSignOrg: function checkSignOrg(data, node) {\n      console.debug('======checkSignOrg======', data, node);\n      this.sign.signDeptId = node.checkedKeys.join(\",\");\n      this.sign.signDeptName = node.checkedNodes.map(function (e) {\n        return e.label;\n      }).join(\",\");\n    },\n    changeIeProp: function changeIeProp(val) {\n      if (val == null || val == '') {\n        this.errmsgIeProp = true;\n      } else {\n        this.errmsgIeProp = false;\n      }\n\n      if (val == 3) {\n        this.dimAndValueObject1.isShow = true;\n        this.dimAndValueObject2.isShow = true;\n      } else {\n        this.dimAndValueObject1.isShow = false;\n        this.dimAndValueObject2.isShow = false;\n      }\n\n      if (val == 2) {\n        this.isSelfRule = false;\n      } else {\n        this.isSelfRule = true;\n      }\n\n      this.changeIsSelfRule(this.isSelfRule);\n      /*if(val == 2) {\r\n        if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n          //this.hasCalc = true;\r\n        }else {\r\n          //this.hasCalc = false;\r\n        }\r\n      } else {\r\n        //this.hasCalc = false;\r\n      }*/\n    },\n    changeContemporaneous: function changeContemporaneous(val) {\n      if (val) {\n        this.form.indContemporaneousValue = val;\n        this.form.indYearOnYearIncrement = val;\n      }\n    },\n    changePreviousPeriod: function changePreviousPeriod(val) {\n      if (val) {\n        this.form.indPreviousPeriodValue = val;\n        this.form.indMonthOnMonthIncrement = val;\n      }\n    },\n    changeInitialValue: function changeInitialValue(val) {\n      if (val) {\n        this.form.indInitialValueOfTheYear = val;\n        this.form.indYearOnYearIncre = val;\n      }\n    },\n    forceUpdate: function forceUpdate() {\n      this.$forceUpdate();\n    },\n    genBizNameChange: function genBizNameChange() {\n      for (var i = 0; i < Object.keys(this.genIndArr).length; i++) {\n        if (this.genIndArr[i].id == this.form.genBizName) {\n          if (this.genIndArr[i].isAdditionalRecording == true) {\n            this.warnMsg = true;\n            this.$message({\n              message: '该指标结果可能存在补录，请确认是否引用！',\n              type: 'warning'\n            });\n          }\n        }\n      }\n    },\n    validateBizNameContract: function validateBizNameContract() {\n      var _this3 = this;\n\n      var that = this;\n      bizNameIsContract(that.form.id, that.form.bizName).then(function (res) {\n        if (res.code == 0) {\n          if (res.data) {\n            _this3.$message.error(\"指标名称重复,请重新输入\");\n\n            that.isBizNameContract = false;\n            return;\n          }\n\n          that.isBizNameContract = true;\n        } else {\n          _this3.$message.error(\"系统错误\");\n\n          that.isBizNameContract = false;\n        }\n      });\n    },\n    initDimInfos: function initDimInfos(status) {\n      var _this4 = this;\n\n      getDimInfos({\n        size: 100,\n        page: 0,\n        tenant: this.form.tenant,\n        status: status\n      }).then(function (data) {\n        _this4.dimInfoArr = data.data.records;\n      });\n    },\n    initSubDimVal: function initSubDimVal(dimId, treeLevel, status) {\n      var _this5 = this;\n\n      getDimValues({\n        size: 100,\n        page: 0,\n        tenant: this.form.tenant,\n        status: status,\n        treeLevel: treeLevel,\n        treeId: dimId\n      }).then(function (data) {\n        _this5.parentDimValueArr = data.data.records;\n      });\n    },\n    initDimVal: function initDimVal(dimId, item) {\n      var _this = this;\n\n      if (item == 1) {\n        _this.dimAndValueObject1.dimensionValue = '';\n        _this.dimAndValueObject1.dimensionName = '';\n        _this.dimValueTmpName1 = [];\n      } else if (item == 2) {\n        _this.dimAndValueObject2.dimensionValue = '';\n        _this.dimAndValueObject2.dimensionName = '';\n        _this.dimValueTmpName2 = [];\n      } else if (item == 3) {\n        _this.dimAndValueObject3.dimensionValue = '';\n        _this.dimAndValueObject3.dimensionName = '';\n        _this.dimValueTmpName3 = [];\n      } else if (item == 4) {\n        _this.dimAndValueObject4.dimensionValue = '';\n        _this.dimAndValueObject4.dimensionName = '';\n        _this.dimValueTmpName4 = [];\n      } else if (item == 5) {\n        _this.dimAndValueObject5.dimensionValue = '';\n        _this.dimAndValueObject5.dimensionName = '';\n        _this.dimValueTmpName5 = [];\n      } else if (item == 6) {\n        _this.dimAndValueObject6.dimensionValue = '';\n        _this.dimAndValueObject6.dimensionName = '';\n        _this.dimValueTmpName6 = [];\n      } else if (item == 7) {\n        _this.dimAndValueObject7.dimensionValue = '';\n        _this.dimAndValueObject7.dimensionName = '';\n        _this.dimValueTmpName7 = [];\n      } else if (item == 8) {\n        _this.dimAndValueObject8.dimensionValue = '';\n        _this.dimAndValueObject8.dimensionName = '';\n        _this.dimValueTmpName8 = [];\n      } else if (item == 9) {\n        _this.dimAndValueObject9.dimensionValue = '';\n        _this.dimAndValueObject9.dimensionName = '';\n        _this.dimValueTmpName9 = [];\n      } else if (item == 10) {\n        _this.dimAndValueObject10.dimensionValue = '';\n        _this.dimAndValueObject10.dimensionName = '';\n        _this.dimValueTmpName10 = [];\n      }\n\n      this.initDimValuesChildren(dimId, item);\n    },\n    initDimValuesChildren: function initDimValuesChildren(dimId, item) {\n      var _this = this;\n\n      getDimValuesChildren({\n        size: 100,\n        page: 0,\n        dimId: dimId\n      }).then(function (data) {\n        if (item == 1) {\n          _this.dimValueArr1 = data.data;\n\n          if (dimId == null || dimId == '') {\n            _this.errmsgDim1 = true;\n            _this.dimAndValueObject1.dimensionValue = '';\n            _this.dimAndValueObject1.dimensionName = '';\n            _this.errmsgDimV1 = true;\n          } else if (_this.dimAndValueObject1.dimensionValue == null || _this.dimAndValueObject1.dimensionValue == '') {\n            _this.errmsgDimV1 = true;\n            _this.errmsgDim1 = false;\n            _this.dimAndValueObject1.dimensionValue = '';\n            _this.dimAndValueObject1.dimensionName = '';\n          }\n        } else if (item == 2) {\n          _this.dimValueArr2 = data.data;\n\n          if (_this.dimAndValueObject2.dimension == null || _this.dimAndValueObject2.dimension == '') {\n            _this.errmsgDimV2 = false;\n            _this.dimAndValueObject2.dimensionValue = '';\n            _this.dimAndValueObject2.dimensionName = '';\n          } else if (_this.dimAndValueObject2.dimensionValue == null || _this.dimAndValueObject2.dimensionValue == '') {\n            _this.errmsgDimV2 = true;\n            _this.dimAndValueObject2.dimensionValue = '';\n            _this.dimAndValueObject2.dimensionName = '';\n          }\n        } else if (item == 3) {\n          _this.dimValueArr3 = data.data;\n\n          if (_this.dimAndValueObject3.dimension == null || _this.dimAndValueObject3.dimension == '') {\n            _this.errmsgDimV3 = false;\n            _this.dimAndValueObject3.dimensionValue = '';\n            _this.dimAndValueObject3.dimensionName = '';\n          } else if (_this.dimAndValueObject3.dimensionValue == null || _this.dimAndValueObject3.dimensionValue == '') {\n            _this.errmsgDimV3 = true;\n            _this.dimAndValueObject3.dimensionValue = '';\n            _this.dimAndValueObject3.dimensionName = '';\n          }\n        } else if (item == 4) {\n          _this.dimValueArr4 = data.data;\n\n          if (_this.dimAndValueObject4.dimension == null || _this.dimAndValueObject4.dimension == '') {\n            _this.errmsgDimV4 = false;\n            _this.dimAndValueObject4.dimensionValue = '';\n            _this.dimAndValueObject4.dimensionName = '';\n          } else if (_this.dimAndValueObject4.dimensionValue == null || _this.dimAndValueObject4.dimensionValue == '') {\n            _this.errmsgDimV4 = true;\n            _this.dimAndValueObject4.dimensionValue = '';\n            _this.dimAndValueObject4.dimensionName = '';\n          }\n        } else if (item == 5) {\n          _this.dimValueArr5 = data.data;\n\n          if (_this.dimAndValueObject5.dimension == null || _this.dimAndValueObject5.dimension == '') {\n            _this.errmsgDimV5 = false;\n            _this.dimAndValueObject5.dimensionValue = '';\n            _this.dimAndValueObject5.dimensionName = '';\n          } else if (_this.dimAndValueObject5.dimensionValue == null || _this.dimAndValueObject5.dimensionValue == '') {\n            _this.errmsgDimV5 = true;\n            _this.dimAndValueObject5.dimensionValue = '';\n            _this.dimAndValueObject5.dimensionName = '';\n          }\n        } else if (item == 6) {\n          _this.dimValueArr6 = data.data;\n\n          if (_this.dimAndValueObject6.dimension == null || _this.dimAndValueObject6.dimension == '') {\n            _this.errmsgDimV6 = false;\n            _this.dimAndValueObject6.dimensionValue = '';\n            _this.dimAndValueObject6.dimensionName = '';\n          } else if (_this.dimAndValueObject6.dimensionValue == null || _this.dimAndValueObject6.dimensionValue == '') {\n            _this.errmsgDimV6 = true;\n            _this.dimAndValueObject6.dimensionValue = '';\n            _this.dimAndValueObject6.dimensionName = '';\n          }\n        } else if (item == 7) {\n          _this.dimValueArr7 = data.data;\n\n          if (_this.dimAndValueObject7.dimension == null || _this.dimAndValueObject7.dimension == '') {\n            _this.errmsgDimV7 = false;\n            _this.dimAndValueObject7.dimensionValue = '';\n            _this.dimAndValueObject7.dimensionName = '';\n          } else if (_this.dimAndValueObject7.dimensionValue == null || _this.dimAndValueObject7.dimensionValue == '') {\n            _this.errmsgDimV7 = true;\n            _this.dimAndValueObject7.dimensionValue = '';\n            _this.dimAndValueObject7.dimensionName = '';\n          }\n        } else if (item == 8) {\n          _this.dimValueArr8 = data.data;\n\n          if (_this.dimAndValueObject8.dimension == null || _this.dimAndValueObject8.dimension == '') {\n            _this.errmsgDimV8 = false;\n            _this.dimAndValueObject8.dimensionValue = '';\n            _this.dimAndValueObject8.dimensionName = '';\n          } else if (_this.dimAndValueObject8.dimensionValue == null || _this.dimAndValueObject8.dimensionValue == '') {\n            _this.errmsgDimV8 = true;\n            _this.dimAndValueObject8.dimensionValue = '';\n            _this.dimAndValueObject8.dimensionName = '';\n          }\n        } else if (item == 9) {\n          _this.dimValueArr9 = data.data;\n\n          if (_this.dimAndValueObject9.dimension == null || _this.dimAndValueObject9.dimension == '') {\n            _this.errmsgDimV9 = false;\n            _this.dimAndValueObject9.dimensionValue = '';\n            _this.dimAndValueObject9.dimensionName = '';\n          } else if (_this.dimAndValueObject9.dimensionValue == null || _this.dimAndValueObject9.dimensionValue == '') {\n            _this.errmsgDimV9 = true;\n            _this.dimAndValueObject9.dimensionValue = '';\n            _this.dimAndValueObject9.dimensionName = '';\n          }\n        } else if (item == 10) {\n          _this.dimValueArr10 = data.data;\n\n          if (_this.dimAndValueObject10.dimension == null || _this.dimAndValueObject10.dimension == '') {\n            _this.errmsgDimV10 = false;\n            _this.dimAndValueObject10.dimensionValue = '';\n            _this.dimAndValueObject10.dimensionName = '';\n          } else if (_this.dimAndValueObject10.dimensionValue == null || _this.dimAndValueObject10.dimensionValue == '') {\n            _this.errmsgDimV10 = true;\n            _this.dimAndValueObject10.dimensionValue = '';\n            _this.dimAndValueObject10.dimensionName = '';\n          }\n        }\n      });\n    },\n    initDimValues: function initDimValues(status) {\n      var _this6 = this;\n\n      getDimValues({\n        size: 100,\n        page: 0,\n        tenant: this.form.tenant,\n        status: status\n      }).then(function (data) {\n        _this6.parentDimValueArr = data.data.records;\n      });\n    },\n    initClassifications: function initClassifications() {\n      var _this7 = this;\n\n      getClassifications({\n        size: 100,\n        page: 0\n      }).then(function (data) {\n        _this7.classificationArr = data.data.records;\n      });\n    },\n    initGenAndDerivedInd: function initGenAndDerivedInd() {\n      var _this8 = this;\n\n      getAllInds().then(function (data) {\n        _this8.genAndDerivedIndArr = data.data;\n\n        for (var i = 0; i < _this8.genAndDerivedIndArr.length; i++) {\n          _this8.transferData.push({\n            key: _this8.genAndDerivedIndArr[i].id + ',' + _this8.genAndDerivedIndArr[i].bizName + ',' + _this8.genAndDerivedIndArr[i].isAdditionalRecording + ',' + _this8.genAndDerivedIndArr[i].bizCode,\n            label: _this8.genAndDerivedIndArr[i].bizName\n          });\n        }\n      });\n    },\n    initIndFirstType: function initIndFirstType() {\n      var _this9 = this;\n\n      crudIndCategory.getCategoryList(0).then(function (res) {\n        _this9.qryIndFirstType = [];\n        _this9.formIndFirstType = [];\n        var data = res.data;\n\n        if (res.code == 0) {\n          for (var i = 0; i < data.length; i++) {\n            _this9.qryIndFirstType.push({\n              id: data[i].id,\n              label: data[i].categoryName,\n              value: data[i].id\n            });\n\n            _this9.formIndFirstType.push({\n              id: data[i].id,\n              label: data[i].categoryName,\n              value: data[i].id\n            });\n          }\n        }\n      });\n    },\n    initIndSecondType: function initIndSecondType(indFirstType, type) {\n      var _this10 = this;\n\n      if (type == \"query\") {\n        this.qryIndSecondType = [];\n      } else {\n        this.formIndSecondType = [];\n\n        if (indFirstType == null || indFirstType == '') {\n          this.errmsgIndFirstType = true;\n          return false;\n        } else {\n          this.errmsgIndFirstType = false;\n        }\n      } //let indFirstType = this.query.indFirstType;\n\n\n      if (indFirstType == null) {\n        return;\n      }\n\n      crudIndCategory.getCategoryList(indFirstType).then(function (res) {\n        var data = res.data;\n\n        if (res.code == 0) {\n          for (var i = 0; i < data.length; i++) {\n            if (type == \"query\") {\n              _this10.qryIndSecondType.push({\n                id: data[i].id,\n                label: data[i].categoryName,\n                value: data[i].id\n              });\n            } else {\n              _this10.formIndSecondType.push({\n                id: data[i].id,\n                label: data[i].categoryName,\n                value: data[i].id\n              });\n            }\n          }\n        }\n      });\n    },\n    checkIndSecondType: function checkIndSecondType(val) {\n      if (val == null || val == '') {\n        this.errmsgIndSecondType = true;\n        return false;\n      } else {\n        this.errmsgIndSecondType = false;\n        return true;\n      }\n    },\n    checkIndLevel: function checkIndLevel(val) {\n      if (val == null || val == '') {\n        this.errmsgIndLevel = true;\n        return false;\n      } else {\n        this.errmsgIndLevel = false;\n        return true;\n      }\n    },\n    checkCurrency: function checkCurrency(val) {\n      if (val == null || val == '') {\n        this.errmsgCurrency = true;\n        return false;\n      } else {\n        this.errmsgCurrency = false;\n        return true;\n      }\n    },\n    checkFrequency: function checkFrequency(val) {\n      if (val == null || val == '') {\n        this.errmsgFrequency = true;\n        return false;\n      } else {\n        this.errmsgFrequency = false;\n        return true;\n      }\n    },\n    checkIndCalType: function checkIndCalType(val) {\n      if (val == null || val == '') {\n        this.errmsgIndCalType = true;\n        return false;\n      } else {\n        this.errmsgIndCalType = false;\n        return true;\n      }\n    },\n    checkIndMonField: function checkIndMonField(val) {\n      if (val == null || val == '') {\n        this.errmsgIndMonField = true;\n        return false;\n      } else {\n        this.errmsgIndMonField = false;\n        return true;\n      }\n    },\n    checkIndDataType: function checkIndDataType(val) {\n      if (val == null || val == '') {\n        this.errmsgIndDataType = true;\n        return false;\n      } else {\n        this.errmsgIndDataType = false;\n        return true;\n      }\n    },\n    checkBizName: function checkBizName(val) {\n      if (val == null || val == '') {\n        this.errmsgBizName = true;\n        return false;\n      } else {\n        this.errmsgBizName = false;\n        return true;\n      }\n    },\n    checkIndDefinition: function checkIndDefinition(val) {\n      if (val == null || val == '') {\n        this.errmsgIndDefinition = true;\n        this.errmsgIndDefinitionStr = '指标定义不能为空';\n        return false;\n      } else {\n        if (val.length > 500) {\n          this.errmsgIndDefinition = true;\n          this.errmsgIndDefinitionStr = '指标定义不能超过500字';\n          return false;\n        } else {\n          this.errmsgIndDefinition = false;\n          this.errmsgIndDefinitionStr = '指标定义不能为空';\n          return true;\n        }\n      }\n    }\n  }, _defineProperty(_methods, CRUD.HOOK.beforeRefresh, function () {\n    //this.crud.optShow.edit = true\n    // this.query.ieType = '4'\n    if (this.query.categoryType == null) {\n      this.query.categoryType = '0';\n    }\n\n    return true;\n  }), _defineProperty(_methods, CRUD.HOOK.afterRefresh, function () {\n    var _this11 = this;\n\n    // getAllSource().then(data => {\n    //   this.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\n    // })\n    getGenInd().then(function (data) {\n      _this11.genIndArr = data.data;\n    });\n  }), _defineProperty(_methods, CRUD.HOOK.beforeToEdit, function () {\n    this.form.formType = 'edit';\n    this.form.serialNo = this.generatorUUID();\n    this.initDimInfos(2);\n    this.form.indVerifyStatus = this.crud.selections[0].indVerifyStatus;\n    this.form.indDeployStatus = this.crud.selections[0].indDeployStatus;\n    this.form.id = this.crud.selections[0].id;\n    this.form.bizCode = this.crud.selections[0].bizCode;\n    this.form.ieProp = this.crud.selections[0].ieProp;\n    this.form.genBizName = this.crud.selections[0].genBizName;\n    this.form.bizName = this.crud.selections[0].bizName;\n    this.form.indFirstType = this.crud.selections[0].indFirstType;\n    this.form.categoryType = this.crud.selections[0].categoryType;\n    this.initIndSecondType(this.form.indFirstType, 'form');\n    this.form.indSecondType = this.crud.selections[0].indSecondType;\n\n    if (this.form.ieProp == 3) {\n      this.dimAndValueObject1.isShow = true;\n      this.dimAndValueObject1.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[0] == null ? null : this.crud.selections[0].indDimAndValueRelations[0].dimension;\n      this.dimAndValueObject1.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[0] == null ? null : this.crud.selections[0].indDimAndValueRelations[0].dimensionValue;\n\n      if (this.dimAndValueObject1.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject1.dimension, 1);\n      }\n\n      this.dimAndValueObject1.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[0] == null ? null : this.crud.selections[0].indDimAndValueRelations[0].dimensionName;\n      this.dimAndValueObject2.isShow = true;\n      this.dimAndValueObject2.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[1] == null ? null : this.crud.selections[0].indDimAndValueRelations[1].dimension;\n\n      if (this.dimAndValueObject2.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject2.dimension, 2);\n      }\n\n      this.dimAndValueObject2.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[1] == null ? null : this.crud.selections[0].indDimAndValueRelations[1].dimensionValue;\n      this.dimAndValueObject2.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[1] == null ? null : this.crud.selections[0].indDimAndValueRelations[1].dimensionName;\n      this.dimAndValueObject3.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[2] == null ? false : true;\n      this.dimAndValueObject3.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[2] == null ? null : this.crud.selections[0].indDimAndValueRelations[2].dimension;\n\n      if (this.dimAndValueObject3.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject3.dimension, 3);\n      }\n\n      this.dimAndValueObject3.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[2] == null ? null : this.crud.selections[0].indDimAndValueRelations[2].dimensionValue;\n      this.dimAndValueObject3.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[2] == null ? null : this.crud.selections[0].indDimAndValueRelations[2].dimensionName;\n      this.dimAndValueObject4.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[3] == null ? false : true;\n      this.dimAndValueObject4.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[3] == null ? null : this.crud.selections[0].indDimAndValueRelations[3].dimension;\n\n      if (this.dimAndValueObject4.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject4.dimension, 4);\n      }\n\n      this.dimAndValueObject4.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[3] == null ? null : this.crud.selections[0].indDimAndValueRelations[3].dimensionValue;\n      this.dimAndValueObject4.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[3] == null ? null : this.crud.selections[0].indDimAndValueRelations[3].dimensionName;\n      this.dimAndValueObject5.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[4] == null ? false : true;\n      this.dimAndValueObject5.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[4] == null ? null : this.crud.selections[0].indDimAndValueRelations[4].dimension;\n\n      if (this.dimAndValueObject5.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject5.dimension, 5);\n      }\n\n      this.dimAndValueObject5.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[4] == null ? null : this.crud.selections[0].indDimAndValueRelations[4].dimensionValue;\n      this.dimAndValueObject5.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[4] == null ? null : this.crud.selections[0].indDimAndValueRelations[4].dimensionName;\n      this.dimAndValueObject6.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[5] == null ? false : true;\n      this.dimAndValueObject6.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[5] == null ? null : this.crud.selections[0].indDimAndValueRelations[5].dimension;\n\n      if (this.dimAndValueObject6.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject6.dimension, 6);\n      }\n\n      this.dimAndValueObject6.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[5] == null ? null : this.crud.selections[0].indDimAndValueRelations[5].dimensionValue;\n      this.dimAndValueObject6.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[5] == null ? null : this.crud.selections[0].indDimAndValueRelations[5].dimensionName;\n      this.dimAndValueObject7.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[6] == null ? false : true;\n      this.dimAndValueObject7.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[6] == null ? null : this.crud.selections[0].indDimAndValueRelations[6].dimension;\n\n      if (this.dimAndValueObject7.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject7.dimension, 7);\n      }\n\n      this.dimAndValueObject7.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[6] == null ? null : this.crud.selections[0].indDimAndValueRelations[6].dimensionValue;\n      this.dimAndValueObject7.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[6] == null ? null : this.crud.selections[0].indDimAndValueRelations[6].dimensionName;\n      this.dimAndValueObject8.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[7] == null ? false : true;\n      this.dimAndValueObject8.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[7] == null ? null : this.crud.selections[0].indDimAndValueRelations[7].dimension;\n\n      if (this.dimAndValueObject8.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject8.dimension, 8);\n      }\n\n      this.dimAndValueObject8.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[7] == null ? null : this.crud.selections[0].indDimAndValueRelations[7].dimensionValue;\n      this.dimAndValueObject8.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[7] == null ? null : this.crud.selections[0].indDimAndValueRelations[7].dimensionName;\n      this.dimAndValueObject9.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[8] == null ? false : true;\n      this.dimAndValueObject9.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[8] == null ? null : this.crud.selections[0].indDimAndValueRelations[8].dimension;\n\n      if (this.dimAndValueObject9.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject9.dimension, 9);\n      }\n\n      this.dimAndValueObject9.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[8] == null ? null : this.crud.selections[0].indDimAndValueRelations[8].dimensionValue;\n      this.dimAndValueObject9.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[8] == null ? null : this.crud.selections[0].indDimAndValueRelations[8].dimensionName;\n      this.dimAndValueObject10.isShow = this.crud.selections[0].indDimAndValueRelations.length == 0 ? false : this.crud.selections[0].indDimAndValueRelations[9] == null ? false : true;\n      this.dimAndValueObject10.dimension = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[9] == null ? null : this.crud.selections[0].indDimAndValueRelations[9].dimension;\n\n      if (this.dimAndValueObject10.isShow) {\n        this.initDimValuesChildren(this.dimAndValueObject10.dimension, 10);\n      }\n\n      this.dimAndValueObject10.dimensionValue = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[9] == null ? null : this.crud.selections[0].indDimAndValueRelations[9].dimensionValue;\n      this.dimAndValueObject10.dimensionName = this.crud.selections[0].indDimAndValueRelations.length == 0 ? null : this.crud.selections[0].indDimAndValueRelations[9] == null ? null : this.crud.selections[0].indDimAndValueRelations[9].dimensionName;\n    }\n\n    this.form.businessDept = this.crud.selections[0].businessDept;\n    this.form.indLevel = this.crud.selections[0].indLevel;\n    this.form.isDeptQuery = this.crud.selections[0].isDeptQuery;\n    this.form.isAdditionalRecording = this.crud.selections[0].isAdditionalRecording == null || this.crud.selections[0].isAdditionalRecording ? 'true' : 'false';\n    this.form.indDefinition = this.crud.selections[0].indDefinition;\n    var defRule = this.crud.selections[0].indDefRule;\n    this.form.indDefRule = defRule;\n    /*if (defRule != null) {\r\n      let defRuleArr = defRule.split(\"||\");\r\n      if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n        this.form.indDefRule = defRuleArr[0]\r\n      } else {\r\n        this.form.indDefRule = defRule;\r\n      }\r\n    }*/\n    //this.form.indDefRuleStr = this.crud.selections[0].indDefRuleStr;\n    //this.indDefRuleStr = this.crud.selections[0].indDefRuleStr;\n\n    if (this.crud.selections[0].indDefRuleIds == null || this.crud.selections[0].indDefRuleIds == '' || this.crud.selections[0].indDefRuleIds == [] || this.crud.selections[0].ieProp != 2) {\n      this.isSelfRule = true;\n    } else {\n      this.indDefRuleIds = this.crud.selections[0].indDefRuleIds;\n      this.indDefRuleStrs = this.crud.selections[0].indDefRuleStrs;\n      this.isSelfRule = false;\n    }\n    /*if(this.crud.selections[0].indDefRuleVal !=null && this.crud.selections[0].indDefRuleVal != \"\") {\r\n      this.form.indDefRuleVal = this.crud.selections[0].indDefRuleVal;\r\n      this.form.indDefRuleId = this.crud.selections[0].indDefRuleId;\r\n      this.indDefRuleVal = this.crud.selections[0].indDefRuleVal;\r\n      this.indDefRuleId = this.crud.selections[0].indDefRuleId;\r\n    } else {\r\n      if (defRule != null) {\r\n        let defRuleArr = defRule.split(\"||\");\r\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n          this.form.indDefRuleVal = defRuleArr[1];\r\n          this.form.indDefRuleId = defRuleArr[2];\r\n          this.indDefRuleVal = defRuleArr[1];\r\n          this.indDefRuleId = defRuleArr[2];\r\n        }\r\n      }\r\n    }*/\n\n\n    this.form.indValueRange1 = this.crud.selections[0].indValueRange1;\n    this.form.indValueRange2 = this.crud.selections[0].indValueRange2;\n    this.form.indInnerWarnValue = this.crud.selections[0].indInnerWarnValue;\n    this.form.indMonWarnValue = this.crud.selections[0].indMonWarnValue;\n    this.form.indInnerWarnFlg = this.crud.selections[0].indInnerWarnFlg;\n    this.form.indMonWarnFlg = this.crud.selections[0].indMonWarnFlg;\n\n    if (this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != '' && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n      this.errmsgInnerWarning = true;\n    }\n\n    if (this.form.indMonWarnValue != null && this.form.indMonWarnValue != '' && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n      this.errmsgMonWarning = true;\n    }\n\n    this.form.currency = this.crud.selections[0].currency == null ? null : Array.isArray(this.crud.selections[0].currency) ? this.crud.selections[0].currency : this.crud.selections[0].currency.split(',');\n    this.form.indValueType = this.crud.selections[0].indValueType;\n    this.form.indFrequency = this.crud.selections[0].indFrequency == null ? null : Array.isArray(this.crud.selections[0].indFrequency) ? this.crud.selections[0].indFrequency : this.crud.selections[0].indFrequency.split(',');\n    this.form.indCalType = this.crud.selections[0].indCalType;\n    this.form.indSafeLevel = this.crud.selections[0].indSafeLevel;\n    this.form.indMonField = this.crud.selections[0].indMonField;\n    this.form.indProcessSys = this.crud.selections[0].indProcessSys;\n    this.form.indDataType = this.crud.selections[0].indDataType;\n    this.form.indDataForm = this.crud.selections[0].indDataForm;\n    this.form.indReference = this.crud.selections[0].indReference;\n    this.form.isRealTimeProcess = this.crud.selections[0].isRealTimeProcess;\n    this.form.indCurrentValue = this.crud.selections[0].indCurrentValue;\n    this.form.indContemporaneousValue = this.crud.selections[0].indContemporaneousValue;\n    this.form.indYearOnYearIncrement = this.crud.selections[0].indYearOnYearIncrement;\n    this.form.indYearOnYearGrowth = this.crud.selections[0].indYearOnYearGrowth;\n    this.form.indPreviousPeriodValue = this.crud.selections[0].indPreviousPeriodValue;\n    this.form.indMonthOnMonthIncrement = this.crud.selections[0].indMonthOnMonthIncrement;\n    this.form.indMonthOnMonthGrowth = this.crud.selections[0].indMonthOnMonthGrowth;\n    this.form.indInitialValueOfTheYear = this.crud.selections[0].indInitialValueOfTheYear;\n    this.form.indYearOnYearIncre = this.crud.selections[0].indYearOnYearIncre;\n    this.form.indIncreaseOverTheBeginningOfTheYear = this.crud.selections[0].indIncreaseOverTheBeginningOfTheYear;\n    this.form.indVerifyId = this.crud.selections[0].indVerifyId;\n\n    if (this.form.tenant == null) {\n      this.form.tenant = this.crud.selections[0].tenant;\n    }\n\n    this.errmsgIndFirstType = false;\n    this.errmsgIndSecondType = false;\n    this.isBizNameContract = true;\n    this.errmsgIndLevel = false;\n    this.errmsgCurrency = false;\n    this.errmsgFrequency = false;\n    this.errmsgIndCalType = false;\n    this.errmsgIndMonField = false;\n    this.errmsgIndDataType = false;\n    this.errmsgIndDefinition = false;\n    this.errmsgBizName = false;\n    this.errmsgIndDefinitionStr = '指标定义不能为空';\n    this.errmsgIndDefRule = false;\n    this.indDefRuleErr = '指标口径规则不能为空';\n    this.errmsgIeProp = false; // getAllSource().then(data => {\n    //   this.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\n    // })\n    // getTablesById(this.form.targetDataSource).then(data => {\n    //   this.tableInfo = data.data\n    // })\n  }), _defineProperty(_methods, CRUD.HOOK.beforeToDetail, function (data) {\n    debugger;\n    this.form.id = data.form.id;\n    this.form.bizCode = data.form.bizCode;\n    this.form.ieProp = data.form.ieProp;\n    this.form.genBizName = data.form.genBizName;\n    this.form.bizName = data.form.bizName;\n    this.form.indFirstType = data.form.indFirstType;\n    this.initIndSecondType(this.form.indFirstType, 'form');\n    this.form.indSecondType = data.form.indSecondType;\n    this.form.categoryType = data.form.categoryType;\n\n    if (data.form.ieProp == '3') {\n      this.dimAndValueObject1.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[0] == null ? false : true;\n      this.dimAndValueObject1.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimension;\n      this.dimAndValueObject1.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionValue;\n      this.dimAndValueObject1.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionName;\n      this.dimAndValueObject2.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[1] == null ? false : true;\n      this.dimAndValueObject2.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimension;\n      this.dimAndValueObject2.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionValue;\n      this.dimAndValueObject2.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionName;\n      this.dimAndValueObject3.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[2] == null ? false : true;\n      this.dimAndValueObject3.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimension;\n      this.dimAndValueObject3.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionValue;\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName;\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName;\n      this.dimAndValueObject4.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[3] == null ? false : true;\n      this.dimAndValueObject4.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimension;\n      this.dimAndValueObject4.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionValue;\n      this.dimAndValueObject4.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionName;\n      this.dimAndValueObject5.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[4] == null ? false : true;\n      this.dimAndValueObject5.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimension;\n      this.dimAndValueObject5.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionValue;\n      this.dimAndValueObject5.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionName;\n      this.dimAndValueObject6.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[5] == null ? false : true;\n      this.dimAndValueObject6.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimension;\n      this.dimAndValueObject6.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionValue;\n      this.dimAndValueObject6.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionName;\n      this.dimAndValueObject7.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[6] == null ? false : true;\n      this.dimAndValueObject7.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimension;\n      this.dimAndValueObject7.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionValue;\n      this.dimAndValueObject7.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionName;\n      this.dimAndValueObject8.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[7] == null ? false : true;\n      this.dimAndValueObject8.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimension;\n      this.dimAndValueObject8.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionValue;\n      this.dimAndValueObject8.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionName;\n      this.dimAndValueObject9.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[8] == null ? false : true;\n      this.dimAndValueObject9.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimension;\n      this.dimAndValueObject9.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionValue;\n      this.dimAndValueObject9.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionName;\n      this.dimAndValueObject10.isShow = data.form.indDimAndValueRelations.length == 0 ? false : data.form.indDimAndValueRelations[9] == null ? false : true;\n      this.dimAndValueObject10.dimension = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimension;\n      this.dimAndValueObject10.dimensionValue = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionValue;\n      this.dimAndValueObject10.dimensionName = data.form.indDimAndValueRelations.length == 0 ? null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionName;\n    }\n\n    this.form.businessDept = data.form.businessDept;\n    this.form.indLevel = data.form.indLevel;\n    this.form.isDeptQuery = data.form.isDeptQuery;\n    this.form.isAdditionalRecording = data.form.isAdditionalRecording == null || data.form.isAdditionalRecording ? 'true' : 'false';\n    this.form.indDefinition = data.form.indDefinition; //this.form.indDefRule = data.form.indDefRule\n\n    this.form.indValueRange1 = data.form.indValueRange1;\n    this.form.indValueRange2 = data.form.indValueRange2;\n    this.form.indInnerWarnValue = data.form.indInnerWarnValue;\n    this.form.indMonWarnValue = data.form.indMonWarnValue;\n    this.form.currency = data.form.currency == null ? null : Array.isArray(data.form.currency) ? data.form.currency : data.form.currency.split(\",\");\n    this.form.indValueType = data.form.indValueType;\n    this.form.indFrequency = data.form.indFrequency == null ? null : Array.isArray(data.form.indFrequency) ? data.form.indFrequency : data.form.indFrequency.split(\",\");\n    this.form.indCalType = data.form.indCalType;\n    this.form.indSafeLevel = data.form.indSafeLevel;\n    this.form.indMonField = data.form.indMonField;\n    this.form.indProcessSys = data.form.indProcessSys;\n    this.form.indDataType = data.form.indDataType;\n    this.form.indDataForm = data.form.indDataForm;\n    this.form.indReference = data.form.indReference;\n    this.form.isRealTimeProcess = data.form.isRealTimeProcess;\n    this.form.indCurrentValue = data.form.indCurrentValue;\n    this.form.indContemporaneousValue = data.form.indContemporaneousValue;\n    this.form.indYearOnYearIncrement = data.form.indYearOnYearIncrement;\n    this.form.indYearOnYearGrowth = data.form.indYearOnYearGrowth;\n    this.form.indPreviousPeriodValue = data.form.indPreviousPeriodValue;\n    this.form.indMonthOnMonthIncrement = data.form.indMonthOnMonthIncrement;\n    this.form.indMonthOnMonthGrowth = data.form.indMonthOnMonthGrowth;\n    this.form.indInitialValueOfTheYear = data.form.indInitialValueOfTheYear;\n    this.form.indYearOnYearIncre = data.form.indYearOnYearIncre;\n    this.form.indIncreaseOverTheBeginningOfTheYear = data.form.indIncreaseOverTheBeginningOfTheYear;\n    this.form.indVerifyStatus = data.form.indVerifyStatus;\n    this.form.indDeployStatus = data.form.indDeployStatus;\n    this.form.indVerifyId = data.form.indVerifyId;\n    this.form.tenant = data.form.tenant;\n\n    if (data.form.indDefRuleIds == null || data.form.indDefRuleIds == '' || data.form.indDefRuleIds == [] || data.form.ieProp != 2) {\n      this.isSelfRule = true;\n    } else {\n      this.indDefRuleIds = data.form.indDefRuleIds;\n      this.indDefRuleStrs = data.form.indDefRuleStrs;\n      this.isSelfRule = false;\n    }\n    /*let defRule = data.form.indDefRule;\r\n    if (defRule != null) {\r\n      let defRuleArr = defRule.split(\"||\");\r\n      if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n        this.form.indDefRule = defRuleArr[0]\r\n      } else {\r\n        this.form.indDefRule = defRule;\r\n      }\r\n    }\r\n    this.form.indDefRuleStr = data.form.indDefRuleStr;\r\n    this.indDefRuleStr = data.form.indDefRuleStr;\r\n    if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n      this.isSelfRule = true\r\n    } else {\r\n      this.isSelfRule = false\r\n    }\r\n    if(data.form.indDefRuleVal !=null && data.form.indDefRuleVal != \"\") {\r\n      this.form.indDefRuleVal = data.form.indDefRuleVal;\r\n      this.form.indDefRuleId = data.form.indDefRuleId;\r\n      this.indDefRuleVal = data.form.indDefRuleVal;\r\n      this.indDefRuleId = data.form.indDefRuleId;\r\n    } else {\r\n      if (defRule != null) {\r\n        let defRuleArr = defRule.split(\"||\");\r\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n          this.form.indDefRuleVal = defRuleArr[1];\r\n          this.form.indDefRuleId = defRuleArr[2];\r\n          this.indDefRuleVal = defRuleArr[1];\r\n          this.indDefRuleId = defRuleArr[2];\r\n        }\r\n      }\r\n    }*/\n\n\n    this.errmsgIndFirstType = false;\n    this.errmsgIndSecondType = false;\n    this.isBizNameContract = true;\n    this.errmsgIndLevel = false;\n    this.errmsgCurrency = false;\n    this.errmsgFrequency = false;\n    this.errmsgIndCalType = false;\n    this.errmsgIndMonField = false;\n    this.errmsgIndDataType = false;\n    this.errmsgIndDefinition = false;\n    this.errmsgBizName = false;\n    this.errmsgIndDefinitionStr = '指标定义不能为空';\n    this.errmsgIndDefRule = false;\n    this.indDefRuleErr = '指标口径规则不能为空';\n    this.errmsgIeProp = false;\n  }), _defineProperty(_methods, CRUD.HOOK.beforeSubmit, function () {\n    // if (this.form.atomDimensions == null) {\n    //   this.crud.notify('请进行维度管理', CRUD.NOTIFICATION_TYPE.ERROR)\n    //   return false\n    // }\n    if (!this.isBizNameContract) {\n      this.$message.error(\"指标名称重复,请重新输入\");\n      return false;\n    } //对新增状态进行参数设置\n\n\n    this.form.indDimAndValueRelations = [];\n\n    if (this.crud.status.add == CRUD.STATUS.PREPARED) {\n      //验证指标类型\n      if (this.form.ieProp == null || this.form.ieProp == '') {\n        this.errmsgIeProp = true;\n      } else {\n        this.errmsgIeProp = false;\n      } //验证第一分类\n\n\n      if (this.form.indFirstType == null || this.form.indFirstType == '') {\n        this.errmsgIndFirstType = true;\n      } else {\n        this.errmsgIndFirstType = false;\n      } //验证第一分类\n\n\n      if (this.form.indSecondType == null || this.form.indSecondType == '') {\n        this.errmsgIndSecondType = true;\n      } else {\n        this.errmsgIndSecondType = false;\n      } //验证指标层级\n\n\n      if (this.form.indLevel == null || this.form.indLevel == '') {\n        this.errmsgIndLevel = true;\n      } else {\n        this.errmsgIndLevel = false;\n      } //验证币种\n\n\n      if (this.form.currency == null || this.form.currency == '' || this.form.currency == []) {\n        this.errmsgCurrency = true;\n      } else {\n        this.errmsgCurrency = false;\n      } //验证频率\n\n\n      if (this.form.indFrequency == null || this.form.indFrequency == '' || this.form.indFrequency == []) {\n        this.errmsgFrequency = true;\n      } else {\n        this.errmsgFrequency = false;\n      } //验证度量单位\n\n\n      if (this.form.indCalType == null || this.form.indCalType == '') {\n        this.errmsgIndCalType = true;\n      } else {\n        this.errmsgIndCalType = false;\n      } //验证监管属性\n\n\n      if (this.form.indMonField == null || this.form.indMonField == '') {\n        this.errmsgIndMonField = true;\n      } else {\n        this.errmsgIndMonField = false;\n      } //验证数据类型\n\n\n      if (this.form.indDataType == null || this.form.indDataType == '') {\n        this.errmsgIndDataType = true;\n      } else {\n        this.errmsgIndDataType = false;\n      } //this.errmsgBizName\n      //验证指标名称\n\n\n      if (this.form.bizName == null || this.form.bizName == '') {\n        this.errmsgBizName = true;\n      } else {\n        this.errmsgBizName = false;\n      } //验证指标定义\n\n\n      if (this.form.indDefinition == null || this.form.indDefinition == '') {\n        this.errmsgIndDefinition = true;\n        this.errmsgIndDefinitionStr = '指标定义不能为空';\n      } else {\n        if (this.form.indDefinition.length > 500) {\n          this.errmsgIndDefinition = true;\n          this.errmsgIndDefinitionStr = '指标定义不能超过500字';\n        } else {\n          this.errmsgIndDefinition = false;\n          this.errmsgIndDefinitionStr = '指标定义不能为空';\n        }\n      }\n\n      if (this.form.indDefRule == null || this.form.indDefRule == '') {\n        this.indDefRuleErr = '指标口径规则不能为空';\n        this.errmsgIndDefRule = true;\n      } else {\n        this.errmsgIndDefRule = false;\n      }\n\n      if (this.errmsgIndDataType || this.errmsgIndMonField || this.errmsgIndCalType || this.errmsgFrequency || this.errmsgCurrency || this.errmsgIndLevel || this.errmsgIndSecondType || this.errmsgIndFirstType || this.errmsgIeProp || this.errmsgBizName || this.errmsgIndDefinition || this.errmsgIndDefRule) {\n        return false;\n      }\n\n      this.form.indFrequency = this.form.indFrequency == null ? null : Array.isArray(this.form.indFrequency) ? this.form.indFrequency.join(\",\") : this.form.indFrequency;\n      this.form.currency = this.form.currency == null ? null : Array.isArray(this.form.currency) ? this.form.currency.join(\",\") : this.form.currency;\n\n      if (this.form.ieProp == 3) {\n        if (this.dimAndValueObject1.isShow) {\n          this.errmsgDim1 = this.dimAndValueObject1.dimension == null || this.dimAndValueObject1.dimension == '';\n          this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n\n          if (this.errmsgDim1 || this.errmsgDimV1) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject1);\n        }\n\n        if (this.dimAndValueObject2.isShow) {\n          this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != '' && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n\n          if (this.errmsgDim2 || this.errmsgDimV2) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject2);\n        }\n\n        if (this.dimAndValueObject3.isShow) {\n          this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != '' && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n\n          if (this.errmsgDim3 || this.errmsgDimV3) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject3);\n        }\n\n        if (this.dimAndValueObject4.isShow) {\n          this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != '' && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n\n          if (this.errmsgDim4 || this.errmsgDimV4) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject4);\n        }\n\n        if (this.dimAndValueObject5.isShow) {\n          this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != '' && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n\n          if (this.errmsgDim5 || this.errmsgDimV5) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject5);\n        }\n\n        if (this.dimAndValueObject6.isShow) {\n          this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != '' && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n\n          if (this.errmsgDim6 || this.errmsgDimV6) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject6);\n        }\n\n        if (this.dimAndValueObject7.isShow) {\n          this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != '' && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n\n          if (this.errmsgDim7 || this.errmsgDimV7) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject7);\n        }\n\n        if (this.dimAndValueObject8.isShow) {\n          this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != '' && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n\n          if (this.errmsgDim8 || this.errmsgDimV8) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject8);\n        }\n\n        if (this.dimAndValueObject9.isShow) {\n          this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != '' && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n\n          if (this.errmsgDim9 || this.errmsgDimV9) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject9);\n        }\n\n        if (this.dimAndValueObject10.isShow) {\n          this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != '' && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n\n          if (this.errmsgDim10 || this.errmsgDimV10) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject10);\n        }\n      } else {\n        this.form.genBizName = null;\n      }\n\n      if (this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != '' && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n        this.errmsgInnerWarning = true;\n      }\n\n      if (this.form.indMonWarnValue != null && this.form.indMonWarnValue != '' && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n        this.errmsgMonWarning = true;\n      }\n\n      if (this.errmsgInnerWarning || this.errmsgMonWarning) {\n        return false;\n      }\n      /*if(this.form.ieProp == 2) {\r\n        if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n          if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = true\r\n            return false\r\n          } else if(this.form.indDefRule.length > 500) {\r\n            this.indDefRuleErr ='长度不能超过500字符'\r\n            this.errmsgIndDefRule = true\r\n            return false;\r\n          } else {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = false\r\n          }\r\n        } else {\r\n          if(this.endsWithStr(this.indDefRuleStr)) {\r\n            this.indDefRuleErr ='口径规则表达式错误'\r\n            this.errmsgIndDefRule = true\r\n            return false\r\n          } else {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = false\r\n          }\r\n        }\r\n        //this.form.indDefRule = (this.form.indDefRule + \"||\" + this.indDefRuleVal + \"||\" + this.indDefRuleId)\r\n        this.form.indDefRuleVal = this.indDefRuleVal;\r\n        this.form.indDefRuleStr = this.indDefRuleStr;\r\n        this.form.indDefRuleId = this.indDefRuleId;\r\n        } else {\r\n        this.indDefRuleErr ='指标口径规则不能为空'\r\n        this.errmsgIndDefRule = false\r\n      }*/\n\n\n      if (this.isSelfRule) {\n        this.form.indDefRuleIds = [];\n        this.form.indDefRuleStrs = [];\n        this.indDefRuleIds = [];\n        this.indDefRuleStrs = [];\n        this.form.indDefRuleId = '';\n        this.form.indDefRuleVal = '';\n        this.form.indDefRuleStr = '';\n        this.indDefRuleStr = '';\n        this.indDefRuleVal = '';\n        this.indDefRuleId = '';\n\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = false;\n          return true;\n        }\n      } else {\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        }\n\n        this.form.indDefRuleStrs = this.indDefRuleStrs;\n        this.form.indDefRuleIds = this.indDefRuleIds;\n      }\n\n      console.log('这里是新增参数编辑');\n    } else if (this.crud.status.edit == CRUD.STATUS.PREPARED) {\n      //维度和维度值\n      //this.form.indDimAndValueRelations = [];\n      //验证指标类型\n      if (this.form.ieProp == null || this.form.ieProp == '') {\n        this.errmsgIeProp = true;\n      } else {\n        this.errmsgIeProp = false;\n      } //验证第一分类\n\n\n      if (this.form.indFirstType == null || this.form.indFirstType == '') {\n        this.errmsgIndFirstType = true;\n      } else {\n        this.errmsgIndFirstType = false;\n      } //验证第一分类\n\n\n      if (this.form.indSecondType == null || this.form.indSecondType == '') {\n        this.errmsgIndSecondType = true;\n      } else {\n        this.errmsgIndSecondType = false;\n      } //验证指标层级\n\n\n      if (this.form.indLevel == null || this.form.indLevel == '') {\n        this.errmsgIndLevel = true;\n      } else {\n        this.errmsgIndLevel = false;\n      } //验证币种\n\n\n      if (this.form.currency == null || this.form.currency == '' || this.form.currency == []) {\n        this.errmsgCurrency = true;\n      } else {\n        this.errmsgCurrency = false;\n      } //验证频率\n\n\n      if (this.form.indFrequency == null || this.form.indFrequency == '' || this.form.indFrequency == []) {\n        this.errmsgFrequency = true;\n      } else {\n        this.errmsgFrequency = false;\n      } //验证度量单位\n\n\n      if (this.form.indCalType == null || this.form.indCalType == '') {\n        this.errmsgIndCalType = true;\n      } else {\n        this.errmsgIndCalType = false;\n      } //验证监管属性\n\n\n      if (this.form.indMonField == null || this.form.indMonField == '') {\n        this.errmsgIndMonField = true;\n      } else {\n        this.errmsgIndMonField = false;\n      } //验证数据类型\n\n\n      if (this.form.indDataType == null || this.form.indDataType == '') {\n        this.errmsgIndDataType = true;\n      } else {\n        this.errmsgIndDataType = false;\n      } //this.errmsgBizName\n      //验证指标名称\n\n\n      if (this.form.bizName == null || this.form.bizName == '') {\n        this.errmsgBizName = true;\n      } else {\n        this.errmsgBizName = false;\n      } //验证指标定义\n\n\n      if (this.form.indDefinition == null || this.form.indDefinition == '') {\n        this.errmsgIndDefinition = true;\n        this.errmsgIndDefinitionStr = '指标定义不能为空';\n      } else {\n        if (this.form.indDefinition.length > 500) {\n          this.errmsgIndDefinition = true;\n          this.errmsgIndDefinitionStr = '指标定义不能超过500字';\n        } else {\n          this.errmsgIndDefinition = false;\n          this.errmsgIndDefinitionStr = '指标定义不能为空';\n        }\n      }\n\n      if (this.form.indDefRule == null || this.form.indDefRule == '') {\n        this.indDefRuleErr = '指标口径规则不能为空';\n        this.errmsgIndDefRule = true;\n      } else {\n        this.errmsgIndDefRule = false;\n      }\n\n      if (this.errmsgIndDataType || this.errmsgIndMonField || this.errmsgIndCalType || this.errmsgFrequency || this.errmsgCurrency || this.errmsgIndLevel || this.errmsgIndSecondType || this.errmsgIndFirstType || this.errmsgIeProp || this.errmsgBizName || this.errmsgIndDefinition || this.errmsgIndDefRule) {\n        return false;\n      }\n\n      this.form.indFrequency = this.form.indFrequency == null ? null : Array.isArray(this.form.indFrequency) ? this.form.indFrequency.join(\",\") : this.form.indFrequency;\n      this.form.currency = this.form.currency == null ? null : Array.isArray(this.form.currency) ? this.form.currency.join(\",\") : this.form.currency;\n\n      if (this.form.ieProp == 3) {\n        if (this.dimAndValueObject1.isShow) {\n          this.errmsgDim1 = this.dimAndValueObject1.dimension == null || this.dimAndValueObject1.dimension == '';\n          this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n\n          if (this.errmsgDim1 || this.errmsgDimV1) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject1);\n        }\n\n        if (this.dimAndValueObject2.isShow) {\n          this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != '' && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n\n          if (this.errmsgDim2 || this.errmsgDimV2) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject2);\n        }\n\n        if (this.dimAndValueObject3.isShow) {\n          this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != '' && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n\n          if (this.errmsgDim3 || this.errmsgDimV3) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject3);\n        }\n\n        if (this.dimAndValueObject4.isShow) {\n          this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != '' && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n\n          if (this.errmsgDim4 || this.errmsgDimV4) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject4);\n        }\n\n        if (this.dimAndValueObject5.isShow) {\n          this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != '' && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n\n          if (this.errmsgDim5 || this.errmsgDimV5) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject5);\n        }\n\n        if (this.dimAndValueObject6.isShow) {\n          this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != '' && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n\n          if (this.errmsgDim6 || this.errmsgDimV6) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject6);\n        }\n\n        if (this.dimAndValueObject7.isShow) {\n          this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != '' && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n\n          if (this.errmsgDim7 || this.errmsgDimV7) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject7);\n        }\n\n        if (this.dimAndValueObject8.isShow) {\n          this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != '' && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n\n          if (this.errmsgDim8 || this.errmsgDimV8) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject8);\n        }\n\n        if (this.dimAndValueObject9.isShow) {\n          this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != '' && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n\n          if (this.errmsgDim9 || this.errmsgDimV9) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject9);\n        }\n\n        if (this.dimAndValueObject10.isShow) {\n          this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != '' && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n\n          if (this.errmsgDim10 || this.errmsgDimV10) {\n            return false;\n          }\n\n          this.form.indDimAndValueRelations.push(this.dimAndValueObject10);\n        }\n      } else {\n        this.form.genBizName = null;\n      }\n\n      if (this.form.indInnerWarnValue != null && this.form.indInnerWarnValue != '' && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n        this.errmsgInnerWarning = true;\n      }\n\n      if (this.form.indMonWarnValue != null && this.form.indMonWarnValue != '' && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n        this.errmsgMonWarning = true;\n      }\n\n      if (this.errmsgInnerWarning || this.errmsgMonWarning) {\n        return false;\n      }\n      /*if(this.form.ieProp == 2) {\r\n        if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n          if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = true\r\n            return false\r\n          } else {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = false\r\n          }\r\n        } else {\r\n          if(this.endsWithStr(this.indDefRuleStr)) {\r\n            this.indDefRuleErr ='口径规则表达式错误'\r\n            this.errmsgIndDefRule = true\r\n            return false\r\n          } else {\r\n            this.indDefRuleErr ='指标口径规则不能为空'\r\n            this.errmsgIndDefRule = false\r\n          }\r\n        }\r\n        this.form.indDefRule = (this.form.indDefRule + \"||\" + this.indDefRuleVal + \"||\" + this.indDefRuleId)\r\n        this.form.indDefRuleVal = this.indDefRuleVal;\r\n        this.form.indDefRuleStr = this.indDefRuleStr;\r\n        this.form.indDefRuleId = this.indDefRuleId;\r\n      } else {\r\n        if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n          this.indDefRuleErr ='指标口径规则不能为空'\r\n          this.errmsgIndDefRule = true\r\n          return false\r\n        } else {\r\n          this.indDefRuleErr ='指标口径规则不能为空'\r\n          this.errmsgIndDefRule = false\r\n        }\r\n      }*/\n\n\n      if (this.isSelfRule) {\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = false;\n          return true;\n        }\n      } else {\n        if (this.form.indDefRule == null || this.form.indDefRule == '') {\n          this.indDefRuleErr = '指标口径规则不能为空';\n          this.errmsgIndDefRule = true;\n          return false;\n        } else if (this.form.indDefRule.length > 500) {\n          this.indDefRuleErr = '长度不能超过500字符';\n          this.errmsgIndDefRule = true;\n          return false;\n        }\n      }\n\n      this.form.indDefRuleStrs = this.indDefRuleStrs;\n      this.form.indDefRuleIds = this.indDefRuleIds;\n    }\n  }), _defineProperty(_methods, CRUD.HOOK.beforeToAdd, function () {\n    if (!this.form.categoryId) {\n      this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR);\n      return false;\n    }\n\n    if (this.form.categoryId == '0') {\n      this.crud.notify('根节点不能添加', CRUD.NOTIFICATION_TYPE.ERROR);\n      return false;\n    }\n\n    this.form.formType = 'add';\n    this.form.serialNo = this.generatorUUID();\n    this.form.categoryType = this.type;\n    this.form.indDimAndValueRelations = [];\n    this.indDefRuleStr = '';\n    this.indDefRuleVal = '';\n    this.indDefRuleId = '';\n    this.indDefRuleStrs = [];\n    this.indDefRuleIds = [];\n    this.form.indDefRuleStr = '';\n    this.form.indDefRuleVal = '';\n    this.form.indDefRuleId = '';\n    this.form.indDefRule = '';\n    this.form.isAdditionalRecording = 'true';\n    this.getCurrentDept();\n    this.cleanDimAndVal();\n    this.errmsgIndFirstType = false;\n    this.errmsgIndSecondType = false;\n    this.isBizNameContract = true;\n    this.errmsgIndLevel = false;\n    this.errmsgCurrency = false;\n    this.errmsgFrequency = false;\n    this.errmsgIndCalType = false;\n    this.errmsgIndMonField = false;\n    this.errmsgIndDataType = false;\n    this.errmsgIndDefinition = false;\n    this.errmsgBizName = false;\n    this.errmsgIndDefinitionStr = '指标定义不能为空';\n    this.errmsgIndDefRule = false;\n    this.indDefRuleErr = '指标口径规则不能为空';\n    this.errmsgIeProp = false;\n  }), _defineProperty(_methods, \"cleanDimAndVal\", function cleanDimAndVal() {\n    this.dimAndValueObject1 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject2 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject3 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject4 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject5 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject6 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject7 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject8 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject9 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n    this.dimAndValueObject10 = {\n      isShow: false,\n      dimension: null,\n      dimensionValue: null,\n      dimensionName: null\n    };\n  }), _defineProperty(_methods, \"toSelectHistory\", function toSelectHistory(data) {\n    var _this12 = this;\n\n    this.showIndHistory = true; //this.hisIeId = data.id;\n    //this.historyData.push(data)\n\n    getHisList(data.id).then(function (res) {\n      if (res.code == 0) {\n        _this12.historyData = res.data.records;\n        console.log(_this12.historyData);\n      }\n    });\n  }), _defineProperty(_methods, \"toSelectFlow\", function toSelectFlow(data) {\n    var _this13 = this;\n\n    this.showFlow = true;\n    /*approveDetailByBusinessKey(qs.stringify({businessKey:data.id})).then(res => {\r\n      //审批流程\r\n      this.flowData = res.data\r\n    })*/\n\n    approveDetailByOriginalInstId(qs.stringify({\n      originalInstId: data.indVerifyId\n    })).then(function (res) {\n      //审批流程\n      _this13.flowData = res.data;\n    });\n  }), _defineProperty(_methods, \"toResult\", function toResult(data) {\n    this.$router.push({\n      path: 'result/index',\n      query: {\n        ieName: data.bizName\n      }\n    });\n  }), _defineProperty(_methods, \"toSelectHistoryDetail\", function toSelectHistoryDetail(data) {\n    var _thisAtom = this.$refs.atomPage;\n    _thisAtom.form = data;\n    _thisAtom.title = data.bizName + '[' + data.bizCode + ']历史详情';\n    var param = {\n      bizCode: data.bizCode,\n      keepHistory: data.keepHistory\n    };\n    getDimensions(param).then(function (data) {\n      _thisAtom.atomDimensions = data.data;\n    });\n    getDimInfo().then(function (data) {\n      _thisAtom.dimensions = data.data;\n    }); // 获取数据源\n\n    getAllSource().then(function (data) {\n      _thisAtom.sourceData = [{\n        id: 'local',\n        datasourceName: '默认数据源'\n      }].concat(data.data);\n    });\n    _thisAtom.form.currency = data.currency == null ? null : Array.isArray(data.currency) ? data.currency : data.currency.split(\",\");\n    _thisAtom.form.indValueType = data.indValueType;\n    _thisAtom.form.indFrequency = data.indFrequency == null ? null : Array.isArray(data.indFrequency) ? data.indFrequency : data.indFrequency.split(\",\");\n\n    if (data.ieProp == '3') {\n      _thisAtom.dimAndValueObject1.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[0] == null ? false : true;\n      _thisAtom.dimAndValueObject1.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[0] == null ? null : data.indDimAndValueRelations[0].dimension;\n      _thisAtom.dimAndValueObject1.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[0] == null ? null : data.indDimAndValueRelations[0].dimensionValue;\n      _thisAtom.dimAndValueObject1.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[0] == null ? null : data.indDimAndValueRelations[0].dimensionName;\n      _thisAtom.dimAndValueObject2.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[1] == null ? false : true;\n      _thisAtom.dimAndValueObject2.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[1] == null ? null : data.indDimAndValueRelations[1].dimension;\n      _thisAtom.dimAndValueObject2.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[1] == null ? null : data.indDimAndValueRelations[1].dimensionValue;\n      _thisAtom.dimAndValueObject2.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[1] == null ? null : data.indDimAndValueRelations[1].dimensionName;\n      _thisAtom.dimAndValueObject3.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[2] == null ? false : true;\n      _thisAtom.dimAndValueObject3.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[2] == null ? null : data.indDimAndValueRelations[2].dimension;\n      _thisAtom.dimAndValueObject3.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[2] == null ? null : data.indDimAndValueRelations[2].dimensionValue;\n      _thisAtom.dimAndValueObject3.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[2] == null ? null : data.indDimAndValueRelations[2].dimensionName;\n      _thisAtom.dimAndValueObject4.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[3] == null ? false : true;\n      _thisAtom.dimAndValueObject4.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[3] == null ? null : data.indDimAndValueRelations[3].dimension;\n      _thisAtom.dimAndValueObject4.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[3] == null ? null : data.indDimAndValueRelations[3].dimensionValue;\n      _thisAtom.dimAndValueObject4.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[3] == null ? null : data.indDimAndValueRelations[3].dimensionName;\n      _thisAtom.dimAndValueObject5.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[4] == null ? false : true;\n      _thisAtom.dimAndValueObject5.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[4] == null ? null : data.indDimAndValueRelations[4].dimension;\n      _thisAtom.dimAndValueObject5.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[4] == null ? null : data.indDimAndValueRelations[4].dimensionValue;\n      _thisAtom.dimAndValueObject5.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[4] == null ? null : data.indDimAndValueRelations[4].dimensionName;\n      _thisAtom.dimAndValueObject6.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[5] == null ? false : true;\n      _thisAtom.dimAndValueObject6.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[5] == null ? null : data.indDimAndValueRelations[5].dimension;\n      _thisAtom.dimAndValueObject6.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[5] == null ? null : data.indDimAndValueRelations[5].dimensionValue;\n      _thisAtom.dimAndValueObject6.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[5] == null ? null : data.indDimAndValueRelations[5].dimensionName;\n      _thisAtom.dimAndValueObject7.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[6] == null ? false : true;\n      _thisAtom.dimAndValueObject7.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[6] == null ? null : data.indDimAndValueRelations[6].dimension;\n      _thisAtom.dimAndValueObject7.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[6] == null ? null : data.indDimAndValueRelations[6].dimensionValue;\n      _thisAtom.dimAndValueObject7.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[6] == null ? null : data.indDimAndValueRelations[6].dimensionName;\n      _thisAtom.dimAndValueObject8.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[7] == null ? false : true;\n      _thisAtom.dimAndValueObject8.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[7] == null ? null : data.indDimAndValueRelations[7].dimension;\n      _thisAtom.dimAndValueObject8.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[7] == null ? null : data.indDimAndValueRelations[7].dimensionValue;\n      _thisAtom.dimAndValueObject8.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[7] == null ? null : data.indDimAndValueRelations[7].dimensionName;\n      _thisAtom.dimAndValueObject9.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[8] == null ? false : true;\n      _thisAtom.dimAndValueObject9.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[8] == null ? null : data.indDimAndValueRelations[8].dimension;\n      _thisAtom.dimAndValueObject9.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[8] == null ? null : data.indDimAndValueRelations[8].dimensionValue;\n      _thisAtom.dimAndValueObject9.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[8] == null ? null : data.indDimAndValueRelations[8].dimensionName;\n      _thisAtom.dimAndValueObject10.isShow = data.indDimAndValueRelations.length == 0 ? false : data.indDimAndValueRelations[9] == null ? false : true;\n      _thisAtom.dimAndValueObject10.dimension = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[9] == null ? null : data.indDimAndValueRelations[9].dimension;\n      _thisAtom.dimAndValueObject10.dimensionValue = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[9] == null ? null : data.indDimAndValueRelations[9].dimensionValue;\n      _thisAtom.dimAndValueObject10.dimensionName = data.indDimAndValueRelations.length == 0 ? null : data.indDimAndValueRelations[9] == null ? null : data.indDimAndValueRelations[9].dimensionName;\n    }\n\n    var defRule = data.indDefRule;\n\n    if (defRule != null) {\n      var defRuleArr = defRule.split(\"||\");\n\n      if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\n        _thisAtom.form.indDefRule = defRuleArr[0];\n      } else {\n        _thisAtom.form.indDefRule = defRule;\n      }\n    }\n\n    _thisAtom.form.indDefRuleStr = data.indDefRuleStr;\n    _thisAtom.indDefRuleStr = data.indDefRuleStr;\n\n    if (_thisAtom.indDefRuleStr == null || _thisAtom.indDefRuleStr == '') {\n      this.isSelfRule = true;\n    } else {\n      this.isSelfRule = false;\n    }\n\n    if (data.indDefRuleVal != null && data.indDefRuleVal != \"\") {\n      _thisAtom.form.indDefRuleVal = data.indDefRuleVal;\n      _thisAtom.form.indDefRuleId = data.indDefRuleId;\n      _thisAtom.indDefRuleVal = data.indDefRuleVal;\n      _thisAtom.indDefRuleId = data.indDefRuleId;\n    } else {\n      if (defRule != null) {\n        var _defRuleArr = defRule.split(\"||\");\n\n        if (Array.isArray(_defRuleArr) && _defRuleArr.length >= 2) {\n          _thisAtom.form.indDefRuleVal = _defRuleArr[1];\n          _thisAtom.form.indDefRuleId = _defRuleArr[2];\n          _thisAtom.indDefRuleVal = _defRuleArr[1];\n          _thisAtom.indDefRuleId = _defRuleArr[2];\n        }\n      }\n    }\n    /* _this.bizCode = data.bizCode*/\n\n\n    _thisAtom.atomPageDialog = true;\n  }), _defineProperty(_methods, \"bizTabCodeChange\", function bizTabCodeChange() {\n    this.bizTabCodeDis = this.form.bizTabCode == null;\n  }), _defineProperty(_methods, \"atomDimensionHandle\", function atomDimensionHandle() {\n    var _this14 = this;\n\n    if (this.form.bizCalcSql != null) {\n      var _this = this.$refs.dimensionPage;\n      _this.keepHistory = this.form.keepHistory;\n\n      if (this.form.bizTabCode == null) {\n        this.bizTabCodeDis = true;\n      }\n      /* const paramSql = {\r\n        bizCalcSql: this.form.bizCalcSql\r\n      }\r\n      bizCalcSqlVali(paramSql).then(data => {\r\n        if (data.code == 0) {\r\n          } else {\r\n          this.$message(data.msg)\r\n        }\r\n      })*/\n\n\n      var param = {\n        bizCalcSql: this.form.bizCalcSql,\n        bizCode: this.form.bizCode,\n        keepHistory: this.form.keepHistory,\n        bizTabCode: this.form.bizTabCode,\n        targetDataSource: this.form.targetDataSource\n      };\n      getDimensions(param).then(function (data) {\n        if (data.code == 0) {\n          _this.atomDimensions = data.data;\n          _this.dimensionDialog = true;\n        } else {\n          _this14.$message(data.msg);\n        }\n      });\n      getDimInfo().then(function (data) {\n        _this.dimensions = data.data;\n      });\n      /* const colParam = {\r\n        'id': this.form.targetDataSource,\r\n        'tablename': this.form.bizTabCode\r\n        /!* 'data_type': this.form.filterColumn*!/\r\n      }*/\n\n      if (this.form.bizTabCode != null) {\n        getColumnByTabel(this.form.targetDataSource, this.form.bizTabCode).then(function (data) {\n          _this.colCodes = data.data;\n        });\n        /* getColumns(colParam).then(data => {\r\n          if (data.code == 0) {\r\n            _this.colCodes = data.data\r\n            console.log(data.data)\r\n          } else {\r\n            _this.colCodes = []\r\n            alert('数据源连接错误')\r\n          }\r\n        })*/\n      } else {\n        this.bizTabCodeDis = true;\n      }\n    }\n  }), _defineProperty(_methods, \"getAtomDimensions\", function getAtomDimensions(data) {\n    this.form.atomDimensions = data;\n  }), _defineProperty(_methods, \"handleCategoryClick\", function handleCategoryClick(data) {\n    console.log(data);\n    this.crud.form.categoryId = data.id;\n    this.crud.query.categoryIds = data.childrenIds;\n    this.crud.query.categoryType = data.categoryType;\n    this.query.categoryType = data.categoryType;\n    this.categoryType = data.categoryType;\n    this.crud.query.categoryId = data.id;\n    this.form.categoryId = data.id;\n    this.form.tenant = data.tenant;\n    this.query.tenant = data.tenant;\n    this.crud.query.tenant = data.tenant;\n    var parentId = data.parentId;\n\n    if (parentId == null || parentId == \"r1\") {\n      this.crud.optShow.add = false;\n      this.crud.form.categoryId = null;\n      this.crud.query.categoryIds = null;\n      this.crud.query.categoryId = null; //this.crud.form.indFirstType = data.id;\n      //this.initIndSecondType(data.id,'form');\n    } else if (parentId == '0') {\n      if (data.categoryType == 0) {\n        this.crud.optShow.add = true;\n      }\n\n      this.crud.form.indFirstType = data.id;\n      this.initIndSecondType(data.id, 'form');\n    } else {\n      if (data.categoryType == 0) {\n        this.crud.optShow.add = true;\n      }\n\n      this.crud.form.indFirstType = data.parentId;\n      this.initIndSecondType(data.parentId, 'form');\n      this.crud.form.indSecondType = data.id;\n    }\n\n    this.initDimInfos(2);\n    this.crud.refresh();\n  }), _defineProperty(_methods, \"dataSourceChangeHandle\", function dataSourceChangeHandle(val) {\n    var _this15 = this;\n\n    this.form.bizTabCode = null;\n    /* const param = {\r\n      id: val\r\n    }\r\n    getTables(param).then(data => {\r\n      this.tableInfo = data.data\r\n    })*/\n    // 通过数据源id查询表\n\n    getTablesById(val).then(function (data) {\n      _this15.tableInfo = data.data;\n    });\n  }), _defineProperty(_methods, \"toSourceDataName\", function toSourceDataName(row) {\n    var name = '';\n    this.sourceData.forEach(function (row1) {\n      if (row1.id == row.sourceDataSource) {\n        name = row1.datasourceName;\n      }\n    });\n    return name;\n  }), _defineProperty(_methods, \"toTargetDataName\", function toTargetDataName(row) {\n    var name = '';\n    this.sourceData.forEach(function (row1) {\n      if (row1.id == row.targetDataSource) {\n        name = row1.datasourceName;\n      }\n    });\n    return name;\n  }), _defineProperty(_methods, \"processA\", function processA(data) {\n    var bizCodes = [];\n\n    for (var i = 0; i < data.length; i++) {\n      bizCodes.push(data[i].bizCode);\n    }\n\n    this.processParam.codes = bizCodes;\n    this.processDialog = true;\n  }), _defineProperty(_methods, \"processB\", function processB() {\n    var _this16 = this;\n\n    if (this.dateValue == '') {\n      this.crud.notify('日期不能为空', CRUD.NOTIFICATION_TYPE.ERROR);\n    } else {\n      this.processParam.periodDate = this.dateFormat(this.dateValue, 'YYYYMMDD');\n      process(this.processParam, 'atom').then(function (data) {\n        if (data.code == 0) {\n          _this16.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.SUCCESS);\n        } else {\n          _this16.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.ERROR);\n        }\n\n        _this16.processDialog = false;\n      });\n    }\n  }), _defineProperty(_methods, \"addDimension\", function addDimension() {\n    this.dimension.classificationId = null;\n    this.dimension.categoryName = null;\n    this.dimension.remarks = null;\n    this.dimension.serialNo = this.form.serialNo;\n    this.showIndDimensionAdd = true;\n  }), _defineProperty(_methods, \"addDimensionValue\", function addDimensionValue() {\n    this.initDimInfos(2);\n    /* this.dimensionValue.dimInfoId = null\r\n     this.dimensionValue.lastLevelDimValueId = null\r\n     this.dimensionValue.categoryName = null*/\n\n    this.dimensionValue.serialNo = this.form.serialNo;\n    this.showIndDimensionValueAdd = true;\n  }), _defineProperty(_methods, \"addDimensionAndValue\", function addDimensionAndValue() {\n    if (this.dimensionNumber >= 10) {\n      return;\n    }\n\n    this.dimensionArr.push(++this.dimensionNumber);\n    this.dimensionArr = this.uniqueArr(this.dimensionArr);\n\n    if (this.dimensionNumber == 3) {\n      this.dimAndValueObject3.isShow = true;\n    } else if (this.dimensionNumber == 4) {\n      this.dimAndValueObject4.isShow = true;\n    } else if (this.dimensionNumber == 5) {\n      this.dimAndValueObject5.isShow = true;\n    } else if (this.dimensionNumber == 6) {\n      this.dimAndValueObject6.isShow = true;\n    } else if (this.dimensionNumber == 7) {\n      this.dimAndValueObject7.isShow = true;\n    } else if (this.dimensionNumber == 8) {\n      this.dimAndValueObject8.isShow = true;\n    } else if (this.dimensionNumber == 9) {\n      this.dimAndValueObject9.isShow = true;\n    } else if (this.dimensionNumber == 10) {\n      this.dimAndValueObject10.isShow = true;\n    } // this.dimensionArr.push({ id: ++this.dimensionNumber, value: { dimension: null, dimensionValue: null } })\n\n  }), _defineProperty(_methods, \"deleteDimensionAndValue\", function deleteDimensionAndValue(item) {\n    this.dimensionArr.splice(this.dimensionArr.indexOf(item), 1);\n\n    if (item == 1) {\n      this.dimAndValueObject1 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 2) {\n      this.dimAndValueObject2 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 3) {\n      this.dimAndValueObject3 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 4) {\n      this.dimAndValueObject4 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 5) {\n      this.dimAndValueObject5 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 6) {\n      this.dimAndValueObject6 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 7) {\n      this.dimAndValueObject7 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 8) {\n      this.dimAndValueObject8 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 9) {\n      this.dimAndValueObject9 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    } else if (item == 10) {\n      this.dimAndValueObject10 = {\n        isShow: false,\n        dimension: null,\n        dimensionValue: null,\n        dimensionName: null\n      };\n    }\n\n    this.dimensionNumber = 2;\n  }), _defineProperty(_methods, \"uniqueArr\", function uniqueArr(arr) {\n    var x = new Set(arr);\n    return _toConsumableArray(x);\n  }), _defineProperty(_methods, \"showIndDefRuleDialog\", function showIndDefRuleDialog() {\n    // this.indDefRuleStr = ''\n    this.value = [];\n    this.showIndDefRule = true;\n  }), _defineProperty(_methods, \"closeIndDefRuleDialog\", function closeIndDefRuleDialog() {\n    this.showIndDefRule = false;\n  }), _defineProperty(_methods, \"handleChange\", function handleChange(value, direction, movedKeys) {//value = value.toString();\n    //direction = direction.toString();\n    //value = value.substring(value.lastIndexOf(\",\")+1,value.length).trim();\n\n    /*if(value == \"true\" && direction == \"right\"){\r\n        this.$message({\r\n          message: '该指标结果可能存在补录，请确认是否引用！',\r\n          type: 'warning'\r\n        });\r\n    }*/\n  }), _defineProperty(_methods, \"addIndInnerWarnValue\", function addIndInnerWarnValue() {\n    this.indInnerWarnValueArr.push(++this.indInnerWarnValueNumber);\n    this.indInnerWarnValueArr = this.uniqueArr(this.indInnerWarnValueArr);\n  }), _defineProperty(_methods, \"delIndInnerWarnValue\", function delIndInnerWarnValue(item) {\n    this.indInnerWarnValueArr.splice(this.indInnerWarnValueArr.indexOf(item), 1);\n    this.indInnerWarnValueNumber = 1;\n  }), _defineProperty(_methods, \"addIndInnerWarnPassValue\", function addIndInnerWarnPassValue() {\n    this.indInnerWarnPassValueArr.push(++this.indInnerWarnPassValueNumber);\n    this.indInnerWarnPassValueArr = this.uniqueArr(this.indInnerWarnPassValueArr);\n  }), _defineProperty(_methods, \"delIndInnerWarnPassValue\", function delIndInnerWarnPassValue(item) {\n    this.indInnerWarnPassValueArr.splice(this.indInnerWarnPassValueArr.indexOf(item), 1);\n    this.indInnerWarnPassValueNumber = 1;\n  }), _defineProperty(_methods, \"addIndMonWarnValue\", function addIndMonWarnValue() {\n    this.indMonWarnValueArr.push(++this.indMonWarnValueNumber);\n    this.indMonWarnValueArr = this.uniqueArr(this.indMonWarnValueArr);\n  }), _defineProperty(_methods, \"delIndMonWarnValue\", function delIndMonWarnValue(item) {\n    this.indMonWarnValueArr.splice(this.indMonWarnValueArr.indexOf(item), 1);\n    this.indMonWarnValueNumber = 1;\n  }), _defineProperty(_methods, \"addIndMonWarnPassValue\", function addIndMonWarnPassValue() {\n    this.indMonWarnPassValueArr.push(++this.indMonWarnPassValueNumber);\n    this.indMonWarnPassValueArr = this.uniqueArr(this.indMonWarnPassValueArr);\n  }), _defineProperty(_methods, \"delIndMonWarnPassValue\", function delIndMonWarnPassValue(item) {\n    this.indMonWarnPassValueArr.splice(this.indMonWarnPassValueArr.indexOf(item), 1);\n    this.indMonWarnPassValueNumber = 1;\n  }), _defineProperty(_methods, \"commitAtomWithSign\", function commitAtomWithSign() {\n    var _this17 = this;\n\n    this.$refs['signform'].validate(function (valid) {\n      console.log(\"this.sign.signDeptId  \" + _this17.sign.signDeptId);\n      console.log(\"valid is\" + valid);\n\n      if (!valid) {\n        return;\n      }\n\n      if (_this17.sign.signDeptId != null && _this17.sign.signDeptId != '' && _this17.sign.signDeptId != 'null' && _this17.sign.signDeptId != 'undefined') {\n        checkDeptUser(_this17.sign.signDeptId).then(function (res) {\n          if (res.code == \"0000\") {\n            if (_this17.sign.oprType == 1) {\n              //新增\n              _this17.crud.form.signDeptIds = _this17.sign.signDeptId;\n\n              _this17.crud.submitCU();\n            } else if (_this17.sign.oprType == 2) {\n              //修改\n              _this17.crud.form.signDeptIds = _this17.sign.signDeptId;\n\n              _this17.crud.submitCU();\n            } else if (_this17.sign.oprType == 3) {\n              //发起审批流程\n              _this17.startProcessVerify(_this17.sign.data);\n            } else if (_this17.sign.oprType == 4) {\n              //删除\n              _this17.sign.data.signDeptIds = _this17.sign.signDeptId;\n\n              _this17.abolishSingleAtom(_this17.sign.data);\n            } else if (_this17.sign.oprType == 5) {\n              //废止\n              _this17.submitCacelInd(_this17.sign.data, _this17.sign.signDeptId);\n            }\n\n            _this17.closeSignDialog();\n          } else {\n            _this17.$notify({\n              title: res.msg,\n              type: 'error',\n              duration: 2500\n            });\n          }\n        });\n      } else {\n        if (_this17.sign.oprType == 1) {\n          //新增\n          _this17.crud.form.signDeptIds = _this17.sign.signDeptId;\n\n          _this17.crud.submitCU();\n        } else if (_this17.sign.oprType == 2) {\n          //修改\n          _this17.crud.form.signDeptIds = _this17.sign.signDeptId;\n\n          _this17.crud.submitCU();\n        } else if (_this17.sign.oprType == 3) {\n          //发起审批流程\n          _this17.startProcessVerify(_this17.sign.data);\n        } else if (_this17.sign.oprType == 4) {\n          //删除\n          _this17.sign.data.signDeptIds = _this17.sign.signDeptId;\n\n          _this17.abolishSingleAtom(_this17.sign.data);\n        } else if (_this17.sign.oprType == 5) {\n          //废止\n          _this17.submitCacelInd(_this17.sign.data, _this17.sign.signDeptId);\n        }\n\n        _this17.closeSignDialog();\n      }\n    });\n  }), _defineProperty(_methods, \"cancelInd\", function cancelInd(data) {\n    var _this18 = this;\n\n    var newIeArr = 0;\n    var unNewIeArr = 0;\n    if (data == null && !Array.isArray(data)) return;\n    var ids = \"\";\n\n    for (var i = 0; i < data.length; i++) {\n      var indVerifyStatus = data[i].indVerifyStatus;\n      var indDeployStatus = data[i].indDeployStatus;\n      var bizCode = data[i].bizCode;\n\n      if (indVerifyStatus == '2') {\n        this.$notify({\n          title: '审批中的指标不能废止',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indDeployStatus == '3') {\n        this.$notify({\n          title: '已废止的指标不能再次废止',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indDeployStatus == '1') {\n        newIeArr += 1;\n      } else {\n        unNewIeArr += 1;\n      }\n\n      ids += data[i].id + \",\";\n    }\n\n    if (ids != null && ids.includes(\",\")) {\n      ids = ids.substr(0, ids.length - 1);\n    }\n\n    if (newIeArr > 0 && unNewIeArr > 0) {\n      this.$notify({\n        title: '请选择审批状态一致的指标操作',\n        type: 'error',\n        duration: 2500\n      });\n      return;\n    } else if (newIeArr == 0 && unNewIeArr == 0) {\n      this.$notify({\n        title: '请选择指标记录再操作',\n        type: 'error',\n        duration: 2500\n      });\n      return;\n    }\n\n    checkRef(ids).then(function (res) {\n      if (res.code == 0) {\n        if (res.data == false) {\n          if (newIeArr > 0 && unNewIeArr == 0) {\n            //批量删除\n            //批量删除\n            _this18.$confirm('确认删除指标?', '删除指标', {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              type: 'warning'\n            }).then(function () {\n              defaultCrud.delAllLoading = true;\n              delAtom(ids).then(function (res) {\n                if (res.code == 0) {\n                  _this18.$notify({\n                    title: '指标删除成功',\n                    type: 'success',\n                    duration: 2500\n                  });\n                } else {\n                  _this18.$notify({\n                    title: '指标删除失败',\n                    type: 'error',\n                    duration: 2500\n                  });\n                }\n\n                _this18.crud.refresh();\n              });\n            }).catch(function () {});\n          } else if (newIeArr == 0 && unNewIeArr > 0) {\n            //批量废止\n            _this18.openSignDialog(ids, 5, '发起废止流程', '请确认是否发起指标废止流程? ');\n          }\n        } else {\n          _this18.$notify({\n            title: '该指标已被引用，不能删除或废止！',\n            type: 'error',\n            duration: 2500\n          });\n        }\n      } else {\n        _this18.$notify({\n          title: '删除或废止失败！',\n          type: 'error',\n          duration: 2500\n        });\n      }\n    });\n  }), _defineProperty(_methods, \"submitCacelInd\", function submitCacelInd(ids, signDeptId) {\n    var _this19 = this;\n\n    //批量废止\n    abolish(ids, signDeptId).then(function (res) {\n      if (res.code == 0) {\n        _this19.$notify({\n          title: '发起指标废止流程成功',\n          type: 'success',\n          duration: 2500\n        });\n      } else {\n        _this19.$notify({\n          title: '发起指标废止流程失败',\n          type: 'error',\n          duration: 2500\n        });\n      }\n\n      _this19.crud.refresh();\n    });\n  }), _defineProperty(_methods, \"processVerify\", function processVerify(data) {\n    if (data == null && !Array.isArray(data)) return;\n    var newIeArr = 0;\n    var unNewIeArr = 0;\n    var ids = \"\";\n\n    for (var i = 0; i < data.length; i++) {\n      var indVerifyStatus = data[i].indVerifyStatus;\n      var indDeployStatus = data[i].indDeployStatus;\n\n      if (indDeployStatus == '1') {\n        newIeArr += 1;\n      } else {\n        unNewIeArr += 1;\n      }\n\n      if (newIeArr > 0 && unNewIeArr > 0) {\n        this.$notify({\n          title: '请选择发布状态一致的指标操作',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indVerifyStatus == '2') {\n        this.$notify({\n          title: '审批中的指标不能重复发起审批',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indVerifyStatus == '3') {\n        this.$notify({\n          title: '已拒绝的指标不能发起审批',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indVerifyStatus == '4') {\n        this.$notify({\n          title: '已审批通过的指标不能发起审批',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      if (indDeployStatus == '3') {\n        this.$notify({\n          title: '已废止的指标不能发起审批',\n          type: 'error',\n          duration: 2500\n        });\n        return;\n      }\n\n      ids += data[i].id + \",\";\n    }\n\n    if (ids != null && ids.includes(\",\")) {\n      ids = ids.substr(0, ids.length - 1);\n    }\n\n    this.openSignDialog(ids, 3, '发起审批流程', '是否发起审批? ');\n  }), _defineProperty(_methods, \"openSignDialog\", function openSignDialog(data, oprType, title, msg) {\n    this.showSign = true;\n    this.showSignOrg = false;\n    this.sign.signDeptId = null;\n    this.sign.signDeptName = null;\n    this.sign.isSign = '0';\n    this.sign.data = data;\n    this.sign.oprType = oprType;\n    this.sign.title = title;\n    this.sign.msg = msg;\n  }), _defineProperty(_methods, \"startProcessVerify\", function startProcessVerify(ids) {\n    var _this20 = this;\n\n    startProcess(ids, this.sign.signDeptId).then(function (res) {\n      if (res.code == 0) {\n        _this20.$notify({\n          title: '发起审批请求成功',\n          type: 'success',\n          duration: 2500\n        });\n      } else {\n        _this20.$notify({\n          title: '发起审批请求失败',\n          type: 'error',\n          duration: 2500\n        });\n      }\n\n      _this20.crud.refresh();\n    });\n  }), _defineProperty(_methods, \"closeIndHistoryDialog\", function closeIndHistoryDialog() {\n    this.historyData = [];\n    this.showIndHistory = false;\n  }), _defineProperty(_methods, \"closeFlowDialog\", function closeFlowDialog() {\n    this.flowData = [];\n    this.showFlow = false;\n  }), _defineProperty(_methods, \"closeIndDimensionAddDialog\", function closeIndDimensionAddDialog() {\n    this.showIndDimensionAdd = false;\n  }), _defineProperty(_methods, \"commitDim\", function commitDim() {\n    var _this21 = this;\n\n    this.$refs['dimform'].validate(function (valid) {\n      if (!valid) {\n        return;\n      }\n\n      _this21.dimension.status = '1';\n      _this21.dimension.tenant = _this21.form.tenant;\n      _this21.dimension.serialNo = _this21.form.serialNo;\n      crudIndDimInfo.crud.add(_this21.dimension).then(function (data) {\n        if (data.code && data.code != 0) {\n          _this21.$notify({\n            title: data.msg,\n            type: 'error',\n            duration: 2500\n          });\n\n          _this21.showIndDimensionAdd = false;\n        } else {\n          _this21.$notify({\n            title: '新增成功',\n            type: 'success',\n            duration: 2500\n          });\n\n          _this21.initDimInfos(2);\n\n          _this21.showIndDimensionAdd = false;\n        }\n      });\n    });\n  }), _defineProperty(_methods, \"closeIndDimensionValueAddDialog\", function closeIndDimensionValueAddDialog() {\n    this.showIndDimensionValueAdd = false;\n  }), _defineProperty(_methods, \"commitDimValue\", function commitDimValue() {\n    var _this22 = this;\n\n    this.$refs['dimValform'].validate(function (valid) {\n      console.log(\"valid is\" + valid);\n\n      if (!valid) {\n        return;\n      }\n\n      if (_this22.dimensionValue.dimInfoId == null || _this22.dimensionValue.dimInfoId.length == 0) {\n        _this22.$notify({\n          title: '所属维度不能为空',\n          type: 'error',\n          duration: 2500\n        });\n\n        return;\n      }\n\n      if (_this22.dimensionValue.categoryName == null || _this22.dimensionValue.categoryName.length == 0) {\n        _this22.$notify({\n          title: '指标维度值不能为空',\n          type: 'error',\n          duration: 2500\n        });\n\n        return;\n      }\n\n      _this22.dimensionValue.status = 1;\n      _this22.dimensionValue.tenant = _this22.form.tenant;\n      _this22.dimension.serialNo = _this22.form.serialNo;\n      crudIndDimVal.crud.add(_this22.dimensionValue).then(function (data) {\n        if (data.code && data.code != 0) {\n          _this22.$notify({\n            title: data.msg,\n            type: 'error',\n            duration: 2500\n          });\n\n          _this22.showIndDimensionValueAdd = false;\n        } else {\n          _this22.$notify({\n            title: '新增成功',\n            type: 'success',\n            duration: 2500\n          });\n\n          _this22.initDimValues(2);\n\n          _this22.showIndDimensionValueAdd = false;\n        }\n      });\n    });\n  }), _defineProperty(_methods, \"selectInd\", function selectInd() {\n    if (this.value.length == 0) {\n      this.$message({\n        message: '请选择一个指标！',\n        type: 'error'\n      });\n      return;\n    }\n    /* if(this.value.length > 1) {\r\n       this.$message({\r\n         message: '只能选择一个指标！',\r\n         type: 'error'\r\n       });\r\n       return;\r\n     }*/\n\n\n    var atoms = this.value;\n    var refAtoms = \"\";\n    var _indDefRuleStr = \"\";\n\n    var _iterator = _createForOfIteratorHelper(atoms),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var atom = _step.value;\n        var keyLabel = atom;\n        var keyArr = keyLabel.split(\",\");\n        var atomId = keyArr[0];\n        var atomName = keyArr[1];\n        var hasRef = keyArr[2];\n        var atomCode = keyArr[3];\n\n        if (hasRef == \"true\") {\n          refAtoms += atomName + \",\";\n        }\n\n        _indDefRuleStr += ' [' + atomName + '] '; //this.indDefRuleId += atomId;\n        //this.indDefRuleVal += atomCode;\n\n        this.indDefRuleStrs.push('[' + atomName + ']');\n        this.indDefRuleIds.push(atomId);\n        this.indDefRuleVals.push(atomCode);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    if (refAtoms != \"\") {\n      this.$message({\n        message: refAtoms + ' 指标结果可能存在补录，请确认是否引用！',\n        type: 'warning'\n      });\n    }\n    /*if(this.indDefRuleStr != null\r\n        && (this.endsWithStr(this.indDefRuleStr))) {\r\n      this.indDefRuleStr += '[' + keyArr[1] + ']';\r\n      this.indDefRuleId += keyArr[0];\r\n      this.indDefRuleVal += keyArr[3];\r\n    } else {\r\n      this.indDefRuleStr = '[' + keyArr[1] + ']';\r\n      this.indDefRuleId += keyArr[0];\r\n      this.indDefRuleVal = keyArr[3];\r\n    }*/\n\n\n    this.showIndDefRule = false; //this.hasCalc = false;\n\n    /*this.rules.indDefRule.required = false\r\n    if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n      if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n        this.errmsgIndDefRule = true\r\n      } else {\r\n        this.errmsgIndDefRule = false\r\n      }\r\n      } else {\r\n      this.errmsgIndDefRule = false\r\n    }*/\n\n    this.form.indDefRule = this.form.indDefRule == null ? '' : this.form.indDefRule;\n    this.form.indDefRule += _indDefRuleStr;\n    this.checkIndDefRule();\n  }), _defineProperty(_methods, \"indDefRulePlus\", function indDefRulePlus() {\n    if (this.indDefRuleStr != null && this.indDefRuleStr.length > 0 && !this.beginWithStr(this.indDefRuleStr)) {\n      if (this.endsWithStr(this.indDefRuleStr)) {\n        this.indDefRuleStr = this.indDefRuleStr.substring(0, this.indDefRuleStr.length - 3) + ' + ';\n        this.indDefRuleVal = this.indDefRuleVal.substring(0, this.indDefRuleVal.length - 3) + ' + ';\n        this.indDefRuleId = this.indDefRuleId.substring(0, this.indDefRuleId.length - 3) + ' + ';\n      } else {\n        this.indDefRuleStr += ' + ';\n        this.indDefRuleVal += ' + ';\n        this.indDefRuleId += ' + ';\n      }\n\n      this.form.indDefRule = this.indDefRuleStr;\n    }\n  }), _defineProperty(_methods, \"indDefRuleSubtraction\", function indDefRuleSubtraction() {\n    if (this.indDefRuleStr != null && this.indDefRuleStr.length > 0 && !this.beginWithStr(this.indDefRuleStr)) {\n      if (this.endsWithStr(this.indDefRuleStr)) {\n        this.indDefRuleStr = this.indDefRuleStr.substring(0, this.indDefRuleStr.length - 3) + ' - ';\n        this.indDefRuleVal = this.indDefRuleVal.substring(0, this.indDefRuleVal.length - 3) + ' - ';\n        this.indDefRuleId = this.indDefRuleId.substring(0, this.indDefRuleId.length - 3) + ' - ';\n      } else {\n        this.indDefRuleStr += ' - ';\n        this.indDefRuleVal += ' - ';\n        this.indDefRuleId += ' - ';\n      }\n\n      this.form.indDefRule = this.indDefRuleStr;\n    }\n  }), _defineProperty(_methods, \"indDefRuleMultiplication\", function indDefRuleMultiplication() {\n    if (this.indDefRuleStr != null && this.indDefRuleStr.length > 0 && !this.beginWithStr(this.indDefRuleStr)) {\n      if (this.endsWithStr(this.indDefRuleStr)) {\n        this.indDefRuleStr = this.indDefRuleStr.substring(0, this.indDefRuleStr.length - 3) + ' × ';\n        this.indDefRuleVal = this.indDefRuleVal.substring(0, this.indDefRuleVal.length - 3) + ' × ';\n        this.indDefRuleId = this.indDefRuleId.substring(0, this.indDefRuleId.length - 3) + ' × ';\n      } else {\n        this.indDefRuleStr += ' × ';\n        this.indDefRuleVal += ' × ';\n        this.indDefRuleId += ' × ';\n      }\n\n      this.form.indDefRule = this.indDefRuleStr;\n    }\n  }), _defineProperty(_methods, \"indDefRuleDivision\", function indDefRuleDivision() {\n    if (this.indDefRuleStr != null && this.indDefRuleStr.length > 0 && !this.beginWithStr(this.indDefRuleStr)) {\n      if (this.endsWithStr(this.indDefRuleStr)) {\n        this.indDefRuleStr = this.indDefRuleStr.substring(0, this.indDefRuleStr.length - 3) + ' / ';\n        this.indDefRuleVal = this.indDefRuleVal.substring(0, this.indDefRuleVal.length - 3) + ' / ';\n        this.indDefRuleId = this.indDefRuleId.substring(0, this.indDefRuleId.length - 3) + ' / ';\n      } else {\n        this.indDefRuleStr += ' / ';\n        this.indDefRuleVal += ' / ';\n        this.indDefRuleId += ' / ';\n      }\n\n      this.form.indDefRule = this.indDefRuleStr;\n    }\n  }), _defineProperty(_methods, \"changeDimVal1\", function changeDimVal1(val) {\n    if (val == null || val == '') {\n      this.errmsgDimV1 = true;\n    } else {\n      this.errmsgDimV1 = false;\n      this.dimAndValueObject1.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal2\", function changeDimVal2(val) {\n    if (this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV2 = true;\n    } else {\n      this.errmsgDimV2 = false;\n      this.dimAndValueObject2.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal3\", function changeDimVal3(val) {\n    if (this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV3 = true;\n    } else {\n      this.errmsgDimV3 = false;\n      this.dimAndValueObject3.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal4\", function changeDimVal4(val) {\n    if (this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV4 = true;\n    } else {\n      this.errmsgDimV4 = false;\n      this.dimAndValueObject4.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal5\", function changeDimVal5(val) {\n    if (this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV5 = true;\n    } else {\n      this.errmsgDimV5 = false;\n      this.dimAndValueObject5.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal6\", function changeDimVal6(val) {\n    if (this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV6 = true;\n    } else {\n      this.errmsgDimV6 = false;\n      this.dimAndValueObject6.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal7\", function changeDimVal7(val) {\n    if (this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV7 = true;\n    } else {\n      this.errmsgDimV7 = false;\n      this.dimAndValueObject7.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal8\", function changeDimVal8(val) {\n    if (this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV8 = true;\n    } else {\n      this.errmsgDimV8 = false;\n      this.dimAndValueObject8.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal9\", function changeDimVal9(val) {\n    if (this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV9 = true;\n    } else {\n      this.errmsgDimV9 = false;\n      this.dimAndValueObject9.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"changeDimVal10\", function changeDimVal10(val) {\n    if (this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != '' && (val == null || val == '')) {\n      this.errmsgDimV10 = true;\n    } else {\n      this.errmsgDimV10 = false;\n      this.dimAndValueObject10.dimensionValue = '';\n    }\n  }), _defineProperty(_methods, \"handleDimValueClick1\", function handleDimValueClick1(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName1.push(data.categoryName);\n      this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1);\n      this.dimValueTmp1.push(data.id);\n      this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1);\n    } else {\n      this.dimValueTmpName1.splice(this.dimValueTmpName1.indexOf(data.categoryName), 1);\n      this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1);\n      this.dimValueTmp1.splice(this.dimValueTmp1.indexOf(data.id), 1);\n      this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1);\n    }\n\n    this.dimAndValueObject1.dimensionName = this.dimensionTmpName1.join(',');\n    this.dimAndValueObject1.dimensionValue = this.dimensionTmp1.join(',');\n    this.errmsgDimV1 = this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '';\n  }), _defineProperty(_methods, \"handleDimValueClick2\", function handleDimValueClick2(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName2.push(data.categoryName);\n      this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2);\n      this.dimValueTmp2.push(data.id);\n      this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2);\n    } else {\n      this.dimValueTmpName2.splice(this.dimValueTmpName2.indexOf(data.categoryName), 1);\n      this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2);\n      this.dimValueTmp2.splice(this.dimValueTmp2.indexOf(data.id), 1);\n      this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2);\n    }\n\n    this.dimAndValueObject2.dimensionName = this.dimensionTmpName2.join(',');\n    this.dimAndValueObject2.dimensionValue = this.dimensionTmp2.join(',');\n    this.errmsgDimV2 = this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != null && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick3\", function handleDimValueClick3(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName3.push(data.categoryName);\n      this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3);\n      this.dimValueTmp3.push(data.id);\n      this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3);\n    } else {\n      this.dimValueTmpName3.splice(this.dimValueTmpName3.indexOf(data.categoryName), 1);\n      this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3);\n      this.dimValueTmp3.splice(this.dimValueTmp3.indexOf(data.id), 1);\n      this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3);\n    }\n\n    this.dimAndValueObject3.dimensionName = this.dimensionTmpName3.join(',');\n    this.dimAndValueObject3.dimensionValue = this.dimensionTmp3.join(',');\n    this.errmsgDimV3 = this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != null && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick4\", function handleDimValueClick4(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName4.push(data.categoryName);\n      this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4);\n      this.dimValueTmp4.push(data.id);\n      this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4);\n    } else {\n      this.dimValueTmpName4.splice(this.dimValueTmpName4.indexOf(data.categoryName), 1);\n      this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4);\n      this.dimValueTmp4.splice(this.dimValueTmp4.indexOf(data.id), 1);\n      this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4);\n    }\n\n    this.dimAndValueObject4.dimensionName = this.dimensionTmpName4.join(',');\n    this.dimAndValueObject4.dimensionValue = this.dimensionTmp4.join(',');\n    this.errmsgDimV4 = this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != null && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick5\", function handleDimValueClick5(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName5.push(data.categoryName);\n      this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5);\n      this.dimValueTmp5.push(data.id);\n      this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5);\n    } else {\n      this.dimValueTmpName5.splice(this.dimValueTmpName3.indexOf(data.categoryName), 1);\n      this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5);\n      this.dimValueTmp5.splice(this.dimValueTmp5.indexOf(data.id), 1);\n      this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5);\n    }\n\n    this.dimAndValueObject5.dimensionName = this.dimensionTmpName5.join(',');\n    this.dimAndValueObject5.dimensionValue = this.dimensionTmp5.join(',');\n    this.errmsgDimV5 = this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != null && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick6\", function handleDimValueClick6(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName6.push(data.categoryName);\n      this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6);\n      this.dimValueTmp6.push(data.id);\n      this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6);\n    } else {\n      this.dimValueTmpName6.splice(this.dimValueTmpName6.indexOf(data.categoryName), 1);\n      this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6);\n      this.dimValueTmp6.splice(this.dimValueTmp6.indexOf(data.id), 1);\n      this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6);\n    }\n\n    this.dimAndValueObject6.dimensionName = this.dimensionTmpName6.join(',');\n    this.dimAndValueObject6.dimensionValue = this.dimensionTmp6.join(',');\n    this.errmsgDimV6 = this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != null && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick7\", function handleDimValueClick7(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName7.push(data.categoryName);\n      this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7);\n      this.dimValueTmp7.push(data.id);\n      this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7);\n    } else {\n      this.dimValueTmpName7.splice(this.dimValueTmpName7.indexOf(data.categoryName), 1);\n      this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7);\n      this.dimValueTmp7.splice(this.dimValueTmp7.indexOf(data.id), 1);\n      this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7);\n    }\n\n    this.dimAndValueObject7.dimensionName = this.dimensionTmpName7.join(',');\n    this.dimAndValueObject7.dimensionValue = this.dimensionTmp7.join(',');\n    this.errmsgDimV7 = this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != null && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick8\", function handleDimValueClick8(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName8.push(data.categoryName);\n      this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8);\n      this.dimValueTmp8.push(data.id);\n      this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8);\n    } else {\n      this.dimValueTmpName8.splice(this.dimValueTmpName8.indexOf(data.categoryName), 1);\n      this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8);\n      this.dimValueTmp8.splice(this.dimValueTmp8.indexOf(data.id), 1);\n      this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8);\n    }\n\n    this.dimAndValueObject8.dimensionName = this.dimensionTmpName8.join(',');\n    this.dimAndValueObject8.dimensionValue = this.dimensionTmp8.join(',');\n    this.errmsgDimV8 = this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != null && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick9\", function handleDimValueClick9(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName9.push(data.categoryName);\n      this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9);\n      this.dimValueTmp9.push(data.id);\n      this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9);\n    } else {\n      this.dimValueTmpName9.splice(this.dimValueTmpName9.indexOf(data.categoryName), 1);\n      this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9);\n      this.dimValueTmp9.splice(this.dimValueTmp9.indexOf(data.id), 1);\n      this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9);\n    }\n\n    this.dimAndValueObject9.dimensionName = this.dimensionTmpName9.join(',');\n    this.dimAndValueObject9.dimensionValue = this.dimensionTmp9.join(',');\n    this.errmsgDimV9 = this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != null && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '');\n  }), _defineProperty(_methods, \"handleDimValueClick10\", function handleDimValueClick10(data, selected) {\n    if (selected == true) {\n      this.dimValueTmpName10.push(data.categoryName);\n      this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10);\n      this.dimValueTmp10.push(data.id);\n      this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10);\n    } else {\n      this.dimValueTmpName10.splice(this.dimValueTmpName10.indexOf(data.categoryName), 1);\n      this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10);\n      this.dimValueTmp10.splice(this.dimValueTmp10.indexOf(data.id), 1);\n      this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10);\n    }\n\n    this.dimAndValueObject10.dimensionName = this.dimensionTmpName10.join(',');\n    this.dimAndValueObject10.dimensionValue = this.dimensionTmp10.join(',');\n    this.errmsgDimV10 = this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != null && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '');\n  }), _defineProperty(_methods, \"indInnerWarnValueBiggerClick\", function indInnerWarnValueBiggerClick() {\n    this.form.indInnerWarnFlg = '>';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indInnerWarnValueBiggerEqualsClick\", function indInnerWarnValueBiggerEqualsClick() {\n    this.form.indInnerWarnFlg = '>=';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indInnerWarnValueEqualsClick\", function indInnerWarnValueEqualsClick() {\n    this.form.indInnerWarnFlg = '=';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indInnerWarnValueSmallerClick\", function indInnerWarnValueSmallerClick() {\n    this.form.indInnerWarnFlg = '<';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indInnerWarnValueSmallerEqualsClick\", function indInnerWarnValueSmallerEqualsClick() {\n    this.form.indInnerWarnFlg = '<=';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indInnerWarnValueNotEqualsClick\", function indInnerWarnValueNotEqualsClick() {\n    this.form.indInnerWarnFlg = '≠';\n    this.errmsgInnerWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueBiggerClick\", function indMonWarnValueBiggerClick() {\n    this.form.indMonWarnFlg = '>';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueBiggerEqualsClick\", function indMonWarnValueBiggerEqualsClick() {\n    this.form.indMonWarnFlg = '>=';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueEqualsClick\", function indMonWarnValueEqualsClick() {\n    this.form.indMonWarnFlg = '=';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueSmallerClick\", function indMonWarnValueSmallerClick() {\n    this.form.indMonWarnFlg = '<';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueSmallerEqualsClick\", function indMonWarnValueSmallerEqualsClick() {\n    this.form.indMonWarnFlg = '<=';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"indMonWarnValueNotEqualsClick\", function indMonWarnValueNotEqualsClick() {\n    this.form.indMonWarnFlg = '≠';\n    this.errmsgMonWarning = false;\n  }), _defineProperty(_methods, \"modifyInd\", function modifyInd(data) {}), _defineProperty(_methods, \"getCategoryName\", function () {\n    var _getCategoryName = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(row) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(row.indFirstType == null)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", '未知分类');\n\n            case 2:\n              _context.next = 4;\n              return crudIndCategory.getCategoryName(row.indFirstType);\n\n            case 4:\n              res = _context.sent;\n\n              if (!(res.code == 0)) {\n                _context.next = 7;\n                break;\n              }\n\n              return _context.abrupt(\"return\", res.data);\n\n            case 7:\n              return _context.abrupt(\"return\", '未知分类');\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function getCategoryName(_x) {\n      return _getCategoryName.apply(this, arguments);\n    }\n\n    return getCategoryName;\n  }()), _defineProperty(_methods, \"getDepts\", function getDepts() {\n    var _this23 = this;\n\n    _getDepts({\n      enabled: true\n    }).then(function (res) {\n      _this23.depts = res.content;\n    });\n  }), _defineProperty(_methods, \"openEdit\", function openEdit(row) {\n    var _this24 = this;\n\n    var id = row.id;\n    checkRef(id).then(function (res) {\n      if (res.code == 0) {\n        if (res.data) {\n          _this24.$notify({\n            title: '该指标已被引用，不能修改！',\n            type: 'error',\n            duration: 2500\n          });\n\n          return;\n        }\n\n        _this24.crud.toEdit(row);\n      }\n    });\n  }), _defineProperty(_methods, \"delAtom\", function delAtom(row) {\n    var _this25 = this;\n\n    checkRef(row.id).then(function (res) {\n      if (res.code == 0) {\n        if (res.data == false) {\n          if (row.indVerifyStatus == \"2\") {\n            _this25.$notify({\n              title: '审批中的指标不能删除',\n              type: 'error',\n              duration: 2500\n            });\n\n            return;\n          }\n\n          if (row.indDeployStatus == \"3\") {\n            //已废止\n            _this25.$alert('已废止指标，不能删除', '删除指标');\n\n            return;\n          }\n\n          if (row.indDeployStatus == \"1\") {\n            //未发布\n            _this25.delSingleAtom(row);\n          } else if (row.indDeployStatus == \"2\") {\n            //已发布\n            var msg = '该指标已发布，确认废止? ';\n            var title = '发起废止流程';\n\n            _this25.openSignDialog(row, 4, title, msg);\n          }\n        } else {\n          _this25.$notify({\n            title: '该指标已被引用，不能删除或废止！',\n            type: 'error',\n            duration: 2500\n          });\n\n          return;\n        }\n      } else {\n        _this25.$notify({\n          title: '未知错误！',\n          type: 'error',\n          duration: 2500\n        });\n      }\n    });\n  }), _defineProperty(_methods, \"delSingleAtom\", function delSingleAtom(row) {\n    var _this26 = this;\n\n    this.$confirm('请确认是否删除?', '删除指标', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).then(function () {\n      defaultCrud.delAllLoading = true;\n      delAtom(row.id).then(function (res) {\n        if (res.code == 0) {\n          _this26.$notify({\n            title: '指标删除成功',\n            type: 'success',\n            duration: 2500\n          });\n        } else {\n          _this26.$notify({\n            title: '指标删除失败',\n            type: 'error',\n            duration: 2500\n          });\n        }\n\n        _this26.crud.refresh();\n      });\n    }).catch(function () {});\n  }), _defineProperty(_methods, \"abolishSingleAtom\", function abolishSingleAtom(row) {\n    var _this27 = this;\n\n    abolish(row.id, row.signDeptIds).then(function (res) {\n      if (res.code == 0) {\n        _this27.$notify({\n          title: '发起指标废止流程成功',\n          type: 'success',\n          duration: 2500\n        });\n      } else {\n        _this27.$notify({\n          title: '发起指标废止流程失败',\n          type: 'error',\n          duration: 2500\n        });\n      }\n\n      _this27.crud.refresh();\n    });\n  }), _defineProperty(_methods, \"submitForm\", function submitForm() {\n    var _this28 = this;\n\n    this.crud.form.submitType = 1;\n\n    if (!this.isSelfRule) {\n      var formulaFlag = this.checkFormulaExp(this.form.indDefRule);\n\n      if (!formulaFlag) {\n        this.indDefRuleErr = '指标口径规则错误！';\n        this.errmsgIndDefRule = true;\n        return false;\n      }\n\n      var formulaExp = this.setFormulaExp(this.form.indDefRule);\n\n      if (formulaExp == null) {\n        this.indDefRuleErr = '指标口径规则错误！';\n        this.errmsgIndDefRule = true;\n        return false;\n      }\n\n      formulaExp = formulaExp.replaceAll(\"#\", \"[\");\n      var data = {\n        indDefRule: this.form.indDefRule,\n        indDefRuleExp: formulaExp,\n        indDefRuleStrs: this.indDefRuleStrs,\n        indDefRuleIds: this.indDefRuleIds\n      };\n      checkDefRule(data).then(function (res) {\n        if (res.code == 0) {\n          console.log(\"data===>\" + res.data);\n          _this28.indDefRuleErr = '指标口径规则不能为空';\n          _this28.errmsgIndDefRule = false;\n\n          _this28.crud.submitCU();\n\n          return true;\n        } else {\n          _this28.indDefRuleErr = res.msg;\n          _this28.errmsgIndDefRule = true;\n          return false;\n        }\n      });\n    } else {\n      this.crud.submitCU();\n    }\n  }), _defineProperty(_methods, \"submitAndStartProcess\", function submitAndStartProcess() {\n    var _this29 = this;\n\n    //验证指标类型\n    if (this.form.ieProp == null || this.form.ieProp == '') {\n      this.errmsgIeProp = true;\n    } else {\n      this.errmsgIeProp = false;\n    } //验证第一分类\n\n\n    if (this.form.indFirstType == null || this.form.indFirstType == '') {\n      this.errmsgIndFirstType = true;\n    } else {\n      this.errmsgIndFirstType = false;\n    } //验证第一分类\n\n\n    if (this.form.indSecondType == null || this.form.indSecondType == '') {\n      this.errmsgIndSecondType = true;\n    } else {\n      this.errmsgIndSecondType = false;\n    } //验证指标层级\n\n\n    if (this.form.indLevel == null || this.form.indLevel == '') {\n      this.errmsgIndLevel = true;\n    } else {\n      this.errmsgIndLevel = false;\n    } //验证币种\n\n\n    if (this.form.currency == null || this.form.currency == '' || this.form.currency == []) {\n      this.errmsgCurrency = true;\n    } else {\n      this.errmsgCurrency = false;\n    } //验证频率\n\n\n    if (this.form.indFrequency == null || this.form.indFrequency == '' || this.form.indFrequency == []) {\n      this.errmsgFrequency = true;\n    } else {\n      this.errmsgFrequency = false;\n    } //验证度量单位\n\n\n    if (this.form.indCalType == null || this.form.indCalType == '') {\n      this.errmsgIndCalType = true;\n    } else {\n      this.errmsgIndCalType = false;\n    } //验证监管属性\n\n\n    if (this.form.indMonField == null || this.form.indMonField == '') {\n      this.errmsgIndMonField = true;\n    } else {\n      this.errmsgIndMonField = false;\n    } //验证数据类型\n\n\n    if (this.form.indDataType == null || this.form.indDataType == '') {\n      this.errmsgIndDataType = true;\n    } else {\n      this.errmsgIndDataType = false;\n    } //this.errmsgBizName\n    //验证指标名称\n\n\n    if (this.form.bizName == null || this.form.bizName == '') {\n      this.errmsgBizName = true;\n    } else {\n      this.errmsgBizName = false;\n    } //验证指标定义\n\n\n    if (this.form.indDefinition == null || this.form.indDefinition == '') {\n      this.errmsgIndDefinition = true;\n      this.errmsgIndDefinitionStr = '指标定义不能为空';\n    } else {\n      if (this.form.indDefinition.length > 500) {\n        this.errmsgIndDefinition = true;\n        this.errmsgIndDefinitionStr = '指标定义不能超过500字';\n      } else {\n        this.errmsgIndDefinition = false;\n        this.errmsgIndDefinitionStr = '指标定义不能为空';\n      }\n    }\n\n    if (this.form.indDefRule == null || this.form.indDefRule == '') {\n      this.indDefRuleErr = '指标口径规则不能为空';\n      this.errmsgIndDefRule = true;\n    } else {\n      this.errmsgIndDefRule = false;\n    }\n\n    if (this.errmsgIndDataType || this.errmsgIndMonField || this.errmsgIndCalType || this.errmsgFrequency || this.errmsgCurrency || this.errmsgIndLevel || this.errmsgIndSecondType || this.errmsgIndFirstType || this.errmsgIeProp || this.errmsgBizName || this.errmsgIndDefinition || this.errmsgIndDefRule) {\n      return false;\n    }\n\n    this.$refs['form'].validate(function (valid) {\n      if (!valid) {\n        return;\n      }\n\n      _this29.crud.form.submitType = 2;\n\n      if (!_this29.isSelfRule) {\n        var formulaFlag = _this29.checkFormulaExp(_this29.form.indDefRule);\n\n        if (!formulaFlag) {\n          _this29.indDefRuleErr = '指标口径规则错误！';\n          _this29.errmsgIndDefRule = true;\n          return false;\n        }\n\n        var formulaExp = _this29.setFormulaExp(_this29.form.indDefRule);\n\n        if (formulaExp == null) {\n          _this29.indDefRuleErr = '指标口径规则错误！';\n          _this29.errmsgIndDefRule = true;\n          return false;\n        }\n\n        formulaExp = formulaExp.replaceAll(\"#\", \"[\");\n        var data = {\n          indDefRule: _this29.form.indDefRule,\n          indDefRuleExp: formulaExp,\n          indDefRuleStrs: _this29.indDefRuleStrs,\n          indDefRuleIds: _this29.indDefRuleIds\n        };\n        checkDefRule(data).then(function (res) {\n          if (res.code == 0) {\n            console.log(\"data===>\" + res.data);\n            _this29.indDefRuleErr = '指标口径规则不能为空';\n            _this29.errmsgIndDefRule = false;\n            var title = '';\n            var message = '';\n            var oprType = 1;\n\n            if (_this29.crud.form.formType == 'add') {\n              title = '发起新增审批流程';\n              message = '请确认是否发起新增审批流程? ';\n              oprType = 1;\n            } else {\n              title = '发起修改审批流程';\n              message = '请确认是否发起修改审批流程? ';\n              oprType = 2;\n            }\n\n            _this29.openSignDialog(_this29.crud.form, oprType, title, message);\n\n            return true;\n          } else {\n            _this29.indDefRuleErr = res.msg;\n            _this29.errmsgIndDefRule = true;\n            return false;\n          }\n        });\n      } else {\n        var title = '';\n        var message = '';\n        var oprType = 1;\n\n        if (_this29.crud.form.formType == 'add') {\n          title = '发起新增审批流程';\n          message = '请确认是否发起新增审批流程? ';\n          oprType = 1;\n        } else {\n          title = '发起修改审批流程';\n          message = '请确认是否发起修改审批流程? ';\n          oprType = 2;\n        }\n\n        _this29.openSignDialog(_this29.crud.form, oprType, title, message);\n      }\n    });\n  }), _defineProperty(_methods, \"endsWithStr\", function endsWithStr(indDefRuleStr) {\n    return indDefRuleStr.trim().endsWith(\"+\") || indDefRuleStr.trim().endsWith(\"-\") || indDefRuleStr.trim().endsWith(\"×\") || indDefRuleStr.trim().endsWith(\"/\");\n  }), _defineProperty(_methods, \"beginWithStr\", function beginWithStr(indDefRuleStr) {\n    return indDefRuleStr.trim().indexOf(\"+\") == 1 || indDefRuleStr.trim().indexOf(\"-\") == 1 || indDefRuleStr.trim().indexOf(\"×\") == 1 || indDefRuleStr.trim().indexOf(\"/\") == 1;\n  }), _defineProperty(_methods, \"clearRuleVal\", function clearRuleVal() {\n    this.indDefRuleStr = '';\n    this.indDefRuleVal = '';\n    this.indDefRuleId = '';\n    this.indDefRuleStrs = [];\n    this.indDefRuleIds = [];\n    this.form.indDefRuleStr = '';\n    this.form.indDefRuleVal = '';\n    this.form.indDefRuleId = '';\n    this.form.indDefRule = ''; //this.hasCalc = true;\n\n    this.rules.indDefRule.required = true;\n    /*if(this.indDefRuleStr == null || this.indDefRuleStr == '') {\r\n      if(this.form.indDefRule == null || this.form.indDefRule == '') {\r\n        this.errmsgIndDefRule = true\r\n      } else {\r\n        this.errmsgIndDefRule = false\r\n      }\r\n      } else {\r\n      this.errmsgIndDefRule = false\r\n    }*/\n\n    this.checkIndDefRule(this.form.indDefRule);\n  }), _defineProperty(_methods, \"changeIsSelfRule\", function changeIsSelfRule(val) {\n    console.log(\"vvvvv=>\" + val); //if(val) {\n\n    this.form.indDefRule = '';\n    this.indDefRuleStr = '';\n    this.indDefRuleVal = '';\n    this.indDefRuleId = '';\n    this.form.indDefRuleStr = '';\n    this.form.indDefRuleVal = '';\n    this.form.indDefRuleId = ''; //}\n  }), _defineProperty(_methods, \"checkWarning\", function checkWarning(val, type) {\n    if (type == 'inner') {\n      if (val != null && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\n        this.innerwarningErrMsg = '请选择运算符';\n        this.errmsgInnerWarning = true;\n      } else if (val != null && (val.startsWith(\".\") || val == '.')) {\n        this.innerwarningErrMsg = '预警值不合法';\n        this.errmsgInnerWarning = true;\n      } else if ((val == null || val == '') && this.form.indInnerWarnFlg != null && this.form.indInnerWarnFlg != '') {\n        this.innerwarningErrMsg = '请输入预警值';\n        this.errmsgInnerWarning = true;\n      } else {\n        this.innerwarningErrMsg = '请选择运算符';\n        this.errmsgInnerWarning = false;\n      }\n    } else {\n      if (val != null && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\n        this.monwarningErrMsg = '请选择运算符';\n        this.errmsgMonWarning = true;\n      } else if (val != null && val.startsWith(\".\")) {\n        this.monwarningErrMsg = '预警值不合法';\n        this.errmsgMonWarning = true;\n      } else if ((val == null || val == '') && this.form.indMonWarnFlg != null && this.form.indMonWarnFlg != '') {\n        this.monwarningErrMsg = '请输入预警值';\n        this.errmsgMonWarning = true;\n      } else {\n        this.monwarningErrMsg = '请选择运算符';\n        this.errmsgMonWarning = false;\n      }\n    }\n  }), _defineProperty(_methods, \"toAddAtomToMyClass\", function toAddAtomToMyClass() {\n    console.log('myCategoryId ===> ', this.form.categoryId);\n\n    if (this.form.categoryId == null || this.form.categoryId == 0) {\n      this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR);\n      return;\n    }\n\n    var _thisAtom = this.$refs.selectAtom;\n    _thisAtom.selectAtomDialog = true;\n    _thisAtom.myCategoryId = this.form.categoryId;\n  }), _defineProperty(_methods, \"refreshList\", function refreshList() {\n    this.crud.refresh();\n  }), _defineProperty(_methods, \"generatorUUID\", function generatorUUID() {\n    return uuidv4();\n  }), _defineProperty(_methods, \"getCurrentDept\", function getCurrentDept() {\n    var _this30 = this;\n\n    _getCurrentDept().then(function (res) {\n      console.log(\"dessss => \" + res);\n      _this30.form.businessDept = res.id;\n    });\n  }), _defineProperty(_methods, \"handleZoom\", function handleZoom() {\n    if (this.zoomDirection == 'left') {\n      this.categorySpan = 0;\n      this.tableSpan = 24;\n      this.zoomDirection = 'right';\n    } else {\n      this.categorySpan = 6;\n      this.tableSpan = 18;\n      this.zoomDirection = 'left';\n    }\n  }), _defineProperty(_methods, \"checkFormulaExp\", function checkFormulaExp(formulaStr) {\n    //公式前端校验\n    var formulaTmp = formulaStr.replaceAll(\" \", \"\");\n\n    do {\n      if (formulaTmp.lastIndexOf(\"[\") == -1 && formulaTmp.lastIndexOf(\"]\") == -1) {\n        continue;\n      }\n\n      if (formulaTmp.lastIndexOf(\"]\") < formulaTmp.length - 1) {\n        var suf = formulaTmp.charAt(formulaTmp.lastIndexOf(\"]\") + 1);\n\n        if (suf != '+' && suf != '-' && suf != '*' && suf != '/' && suf != ')') {\n          return false;\n        }\n      }\n\n      if (formulaTmp.lastIndexOf(\"[\") > 0) {\n        var pre = formulaTmp.charAt(formulaTmp.lastIndexOf(\"[\") - 1);\n\n        if (pre != '+' && pre != '-' && pre != '*' && pre != '/' && pre != '(') {\n          return false;\n        }\n      }\n\n      formulaTmp = formulaTmp.replace(formulaTmp.substring(formulaTmp.lastIndexOf(\"[\"), formulaTmp.lastIndexOf(\"]\") + 1), \"1\");\n    } while (formulaTmp.lastIndexOf(\"]\") > 0);\n\n    return true;\n  }), _defineProperty(_methods, \"setFormulaExp\", function setFormulaExp(formulaStr) {\n    var formulaExp = formulaStr;\n\n    do {\n      var pre = formulaExp.lastIndexOf(\"[\");\n      var suf = formulaExp.lastIndexOf(\"]\"); //指标名称\n\n      var indName = formulaExp.substring(pre, suf + 1);\n      var indKey = ''; //指标编码\n\n      var targetObj = this.transferData.filter(function (itemObj) {\n        return indName.indexOf(itemObj.label) >= 0;\n      });\n\n      if (targetObj[0] == null) {\n        if (pre != -1 && suf != -1) {\n          return null;\n        }\n\n        return '[]';\n      }\n\n      indKey = targetObj[0].key;\n      var indKeys = indKey.split(\",\");\n      var indId = indKeys[0];\n      var indCode = indKeys[3];\n      formulaExp = formulaExp.replace(indName, '#' + indCode + ';');\n    } while (formulaExp.lastIndexOf(\"]\") > 0);\n\n    return formulaExp;\n  }), _methods)\n};",null]}