{"remainingRequest":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js!D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\dataLab\\datasearch\\dataworksAcProject.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\dataLab\\datasearch\\dataworksAcProject.vue","mtime":1655868146814},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/SZBank/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/SZBank/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _request = _interopRequireDefault(require(\"@/utils/request\"));\n\nvar _dataworksAcProject = require(\"@/api/dataLab/dataworksAcProject\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"DataworksAcProject\",\n  data: function data() {\n    return {\n      queryForm: {\n        dataworksAccount: \"\",\n        total: 0,\n        page: 1,\n        size: 10,\n        loading: false\n      },\n      tableData: [],\n      addDialogVisible: false,\n      editDialogVisible: false,\n      editForm: {},\n      oldDataAccount: \"\",\n      oldProjectName: \"\",\n      editFormRules: {\n        dataworksAccount: [{\n          required: true,\n          trigger: ['blur', 'change'],\n          message: '请输入dataworks账户'\n        }],\n        projectName: [{\n          required: true,\n          trigger: ['blur', 'change'],\n          message: '请输入ODPS Project'\n        }]\n      },\n      dataworksAccountList: []\n    };\n  },\n  methods: {\n    // 分页\n    handleSizeChange: function handleSizeChange(val) {\n      this.queryForm.size = val;\n      this.queryPageList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.queryForm.page = val;\n      this.queryPageList();\n    },\n    queryPageList: function () {\n      var _queryPageList = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.queryForm.loading = true;\n                _context.next = 3;\n                return (0, _request.default)({\n                  url: '/datalab/dataworksAcProject/list',\n                  method: 'post',\n                  data: {\n                    pageSize: this.queryForm.size,\n                    pageNum: this.queryForm.page,\n                    dataworksAccount: this.queryForm.dataworksAccount\n                  }\n                });\n\n              case 3:\n                res = _context.sent;\n\n                if (res.data && res.data.records) {\n                  this.tableData = res.data.records;\n                  this.queryForm.total = res.data.total;\n                  this.queryForm.page = res.data.current;\n                }\n\n                this.queryForm.loading = false; //console.log(res)\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function queryPageList() {\n        return _queryPageList.apply(this, arguments);\n      }\n\n      return queryPageList;\n    }(),\n    //重置查询条件\n    resetQueryForm: function resetQueryForm() {\n      this.queryForm.dataworksAccount = '';\n      this.queryPageList();\n    },\n    handleCloseDetail: function handleCloseDetail() {\n      this.addDialogVisible = false;\n      this.editDialogVisible = false;\n      this.$refs.editFormRef.resetFields();\n      this.queryPageList();\n    },\n    //新增\n    handleAddRule: function handleAddRule() {\n      this.addDialogVisible = true;\n      this.editForm = {};\n    },\n    //编辑\n    handleEdit: function handleEdit(index, row) {\n      this.editDialogVisible = true;\n      this.editForm = row;\n      this.oldDataAccount = row.dataworksAccount;\n      this.oldProjectName = row.projectName;\n    },\n    //提交新增\n    handleSendAdd: function handleSendAdd() {\n      var _this = this;\n\n      this.$refs['editFormRef'].validate(function (valid) {\n        if (valid) {\n          (0, _request.default)({\n            url: '/datalab/dataworksAcProject/add',\n            method: 'post',\n            data: {\n              dataworksAccount: _this.editForm.dataworksAccount,\n              projectName: _this.editForm.projectName\n            }\n          }).then(function (res) {\n            if (res.returnCode === '200') {\n              _this.$message({\n                message: '新增成功',\n                type: 'success'\n              });\n            } else {\n              _this.$message({\n                message: '新增失败' + res.returnMsg,\n                type: 'error'\n              });\n            }\n\n            _this.addDialogVisible = false;\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //提交编辑\n    handleSendEdit: function handleSendEdit() {\n      var _this2 = this;\n\n      this.$refs['editFormRef'].validate(function (valid) {\n        if (valid) {\n          (0, _request.default)({\n            url: '/datalab/dataworksAcProject/update',\n            method: 'post',\n            data: {\n              dataworksAccount: _this2.editForm.dataworksAccount,\n              projectName: _this2.editForm.projectName,\n              oldDataAccount: _this2.oldDataAccount,\n              oldProjectName: _this2.oldProjectName\n            }\n          }).then(function (res) {\n            if (res.returnCode === '200') {\n              _this2.$message({\n                message: '修改成功',\n                type: 'success'\n              });\n            } else {\n              _this2.$message({\n                message: '修改失败:' + res.returnMsg,\n                type: 'error'\n              });\n            }\n\n            _this2.editDialogVisible = false;\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //删除\n    handleDelete: function handleDelete(index, row) {\n      var _this3 = this;\n\n      this.$confirm('确定删除dataworks账户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        (0, _request.default)({\n          url: '/datalab/dataworksAcProject/delete',\n          method: 'post',\n          data: {\n            dataworksAccount: row.dataworksAccount,\n            projectName: row.projectName\n          }\n        }).then(function (res) {\n          if (res.returnCode === '200') {\n            _this3.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n\n            _this3.queryPageList();\n          } else {\n            _this3.$message({\n              type: 'error',\n              message: res.returnMsg\n            });\n          }\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    //查看对应UM用户\n    showRelate: function showRelate(index, row) {\n      this.$router.push({\n        path: 'umRelate',\n        query: {\n          dataworksAccount: row.dataworksAccount,\n          projectName: row.projectName\n        }\n      });\n    },\n    getDataworksAccount: function getDataworksAccount() {\n      var _this4 = this;\n\n      (0, _dataworksAcProject.getDataworksAccount)().then(function (data) {\n        _this4.dataworksAccountList = data;\n        console.log(_this4.dataworksAccountList);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.queryPageList();\n    this.getDataworksAccount();\n  }\n};\nexports.default = _default;",null]}