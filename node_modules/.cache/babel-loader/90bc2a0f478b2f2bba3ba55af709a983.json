{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\manager\\authManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\manager\\authManager.vue","mtime":1654852398639},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _name$components$data;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = (_name$components$data = {\n  name: \"authManager\",\n  components: {},\n  data: function data() {\n    return {\n      name: \"\",\n      date: \"\",\n      // 表格\n      tableData: [],\n      propList: [],\n      // 分页\n      pageSize: 10,\n      total: 10,\n      currentPage: 1,\n      // 当前选中\n      currentRow: null,\n      // 树状图\n      treeData: [],\n      defaultProps: {\n        id: \"id\",\n        children: \"children\",\n        label: \"name\"\n      }\n    };\n  },\n  watch: {},\n  created: function created() {},\n  mounted: function mounted() {},\n  computed: {}\n}, (0, _defineProperty2.default)(_name$components$data, \"created\", function created() {\n  this.propList = [{\n    prop: \"name\",\n    label: \"角色名称\",\n    align: \"center\"\n  }, {\n    prop: \"remark\",\n    label: \"描述\",\n    align: \"center\"\n  }];\n  this.initList();\n}), (0, _defineProperty2.default)(_name$components$data, \"methods\", {\n  // 重置\n  reset: function reset() {\n    this.name = \"\";\n    this.date = \"\";\n  },\n  // 从第一页开始查询\n  initList: function initList() {\n    this.currentPage = 1;\n    this.queryList();\n  },\n  // 列表查询\n  queryList: function queryList() {\n    var _this = this;\n\n    // name(输入名称或者描述搜索) crtDate(时间控制) size(分页条数)  page(页码)\n    var request = {\n      name: this.name,\n      size: this.pageSize,\n      page: this.currentPage\n    };\n    this.$api.qryRoleListPage(request).then(function (res) {\n      if (res.data && res.data.records) {\n        _this.tableData = res.data.records;\n        _this.total = res.data.total;\n      }\n    });\n  },\n  // 设置当前选中行为哪行\n  setCurrent: function setCurrent(row) {\n    this.$refs.singleTable.setCurrentRow(row);\n  },\n  // 当前选中改变 --- 显示菜单树\n  handleRowChange: function handleRowChange(val) {\n    var _this2 = this;\n\n    this.currentRow = val;\n    this.$api.showRolesMenu({\n      id: val.id\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.data) {\n        _this2.handleDisplay(res.data);\n      }\n    });\n  },\n  // 处理tree回显\n  handleDisplay: function handleDisplay(val) {\n    var _this3 = this;\n\n    // 先显示出树，才能获取到所有节点\n    val.length > 0 ? this.treeData = val : this.treeData = []; // 已勾选id - 调用递归方法进行处理\n\n    var checkedKeyArray = [];\n    val ? this.getCheckedId(val, checkedKeyArray) : \"\";\n    this.$nextTick(function () {\n      checkedKeyArray.forEach(function (item) {\n        if (_this3.$refs.tree) {\n          // 选中树，获取到树的节点，如果存在isSelect，则设置回显\n          var node = _this3.$refs.tree.getNode(item);\n\n          if (node.data.isSelect == 1) {\n            _this3.$refs.tree.setChecked(node, true);\n          }\n        }\n      });\n    });\n  },\n  // 递归处理 - 所有层级中选中的菜单id\n  getCheckedId: function getCheckedId(val, checkedKeyArray) {\n    var _this4 = this;\n\n    val.forEach(function (item) {\n      if (item.isSelect == 1) {\n        checkedKeyArray.push(item.id);\n      }\n\n      if (item.children && item.children.length > 0) {\n        _this4.getCheckedId(item.children, checkedKeyArray);\n      }\n    });\n  },\n  //  分页\n  handleCurrentChange: function handleCurrentChange(val) {\n    this.currentPage = val;\n    this.queryList();\n  },\n  // 节点点击\n  handleNodeClick: function handleNodeClick(node, data) {\n    console.log(node);\n  },\n  // 复选框选中\n  handleCheckChange: function handleCheckChange(data, checked, indeterminate) {\n    console.log(data, checked, indeterminate);\n  },\n  // 获取选中的节点\n  getCheckedNodes: function getCheckedNodes() {\n    var selectedNode = this.$refs.tree.getCheckedNodes(false, true);\n    var menuIds = [];\n    selectedNode.forEach(function (item) {\n      menuIds.push(item.id);\n    });\n    return menuIds;\n  },\n  // 保存菜单\n  saveMenu: function saveMenu() {\n    var _this5 = this;\n\n    var request = {\n      roleId: this.currentRow.id,\n      menuIds: this.getCheckedNodes()\n    };\n    this.$api.saveRoleMenu(request).then(function (res) {\n      if (res.code == 0 || res.code == 200) {\n        _this5.$message.success(res.msg);\n\n        _this5.queryList();\n      } else {\n        _this5.$message.error(res.msg);\n      }\n    });\n  }\n}), _name$components$data);\n\nexports.default = _default;",null]}