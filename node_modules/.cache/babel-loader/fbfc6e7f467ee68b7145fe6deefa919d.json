{"remainingRequest":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\assetSearch\\assetSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\assetSearch\\assetSearch.vue","mtime":1651838218327},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650772030306},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650772056629}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      // 首页传来的关键字\n      keywords: '',\n      tabList: [{\n        label: \"全部表\",\n        name: \"all\"\n      }, {\n        label: \"我的表\",\n        name: \"mine\"\n      }],\n      activeTab: \"all\",\n      // 树形控件\n      filterText: \"\",\n      defaultProps: {\n        id: \"contentsId\",\n        children: \"children\",\n        label: \"name\"\n      },\n      treeData: [],\n      treeDataAll: [],\n      treeDataMine: [],\n      // 目录列表\n      catalogueList: [],\n      // 资产类型\n      assetType: \"all\",\n      // 一级目录\n      firstType: \"all\",\n      firstList: [],\n      // 二级目录\n      secondType: \"all\",\n      secondList: [],\n      // 三级目录\n      thirdType: \"all\",\n      thirdList: [],\n      // 精准筛选\n      // 属主部门\n      deptCode: '',\n      table: {\n        project: ''\n      },\n      api: {\n        application: ''\n      },\n      target: {\n        targetName: '',\n        targetCode: '',\n        targetType: '',\n        classifyOne: '',\n        classifyTwo: ''\n      },\n      label: {\n        classifyName: '',\n        objectCode: '',\n        fromCode: ''\n      },\n      // 列表部分\n      tableData: [],\n      // 收藏\n      save: true,\n      // 分页\n      currentPage: 1,\n      pageSize: 10,\n      total: 50,\n      // 数据预览\n      dataPreVis: false,\n      preDataList: [],\n      preDataProp: [],\n      // 申请权限\n      authorityVis: false,\n      // 加入购物车参数\n      request: {\n        assetId: \"\",\n        beginTime: \"\",\n        endTime: \"\"\n      },\n      // 直接申请\n      directApplyVis: false,\n      daterange: \"\",\n      radio: \"2\",\n      // 提示弹窗\n      tipDialog: false,\n      nodeData: [],\n      // 应用列表\n      appList: [],\n      // 指标类型列表\n      targetTypeList: [],\n      // 一级分类列表\n      classifyOneList: [],\n      // 二级分类列表\n      classifyTwoList: [],\n      // 部门树\n      deptTreeList: []\n    };\n  },\n  watch: {\n    $route: function $route(to, from) {\n      console.log(to, from, \"$route\");\n      this.getRouteData();\n    },\n    save: function save(val) {\n      console.log(val);\n    },\n    // 节点过滤\n    filterText: function filterText(val) {\n      this.$refs.tree.filter(val);\n    },\n    // 树状图tab\n    activeTab: function activeTab(val) {\n      if (val === \"all\") {\n        this.treeData = this.treeDataAll;\n        this.getListByKeywords();\n      } else {\n        this.treeData = this.treeDataMine;\n        this.getListByKeywords();\n      }\n    },\n    // 目录联动\n    // 资产类型\n    assetType: function assetType(val) {\n      if (val === \"all\") {\n        this.thirdList = [];\n      } else if (val === \"table\") {\n        this.secondType = \"all\";\n      } else if (val === \"api\") {\n        this.secondType = \"all\";\n      } else if (val === \"target\") {\n        this.secondType = \"all\";\n      } else if (val === \"label\") {\n        this.secondType = \"all\";\n      }\n    },\n    // 一级\n    firstType: function firstType(val) {\n      var data;\n      data = this.firstList.filter(function (item) {\n        return item.contentsId == val;\n      });\n\n      if (data.length < 1) {\n        this.secondList = [];\n      } else {\n        this.secondList = JSON.parse(JSON.stringify(data[0].children));\n\n        if (this.secondList.length > 0) {\n          this.secondList.unshift({\n            contentsId: 'all',\n            name: '全部',\n            children: []\n          });\n        }\n      }\n    },\n    // 二级\n    secondType: function secondType(val) {\n      var data;\n      data = this.secondList.filter(function (item) {\n        return item.contentsId == val;\n      });\n      console.log(data, 333);\n\n      if (data.length < 1) {\n        this.thirdList = [];\n      } else {\n        this.thirdList = JSON.parse(JSON.stringify(data[0].children));\n\n        if (this.thirdList.length > 0) {\n          this.thirdList.unshift({\n            contentsId: 'all',\n            name: '全部',\n            children: []\n          });\n        }\n      }\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    // 首页跳转\n    this.getRouteData(); // 树状图初始数据\n\n    this.$api.getAllCatalogueList({}).then(function (res) {\n      _this.treeData = res;\n      _this.treeDataAll = res;\n    }); // 我的表目录树\n\n    this.$api.getAuthTree({}).then(function (res) {\n      _this.treeDataMine = res.data;\n    }); // 全部目录 \n\n    this.$api.getAllCatalogueList({}).then(function (res) {\n      console.log(res, 'chushihua');\n      _this.firstList = res;\n\n      _this.firstList.unshift({\n        contentsId: 'all',\n        name: '全部',\n        children: []\n      });\n    }); // 查询所有应用   appList\n    // 查询指标类型, 一级分类，二级分类      \n    // 查询部门树    \n\n    this.$api.getAppList({}).then(function (res) {\n      _this.appList = res.data;\n    });\n    this.$api.getTargetSelect({}).then(function (res) {\n      _this.targetTypeList = res.data.targetTypeList;\n      _this.classifyOneList = res.data.classifyOneList;\n      _this.classifyTwoList = res.data.classifyTwoList;\n    });\n    this.$api.getDeptTree({}).then(function (res) {\n      _this.deptTreeList = res.data;\n    }); // 初始化列表\n\n    this.getListByKeywords(); // 数据预览\n\n    this.preDataProp = [{\n      prop: \"A1\",\n      label: \"A1\",\n      align: \"center\"\n    }, {\n      prop: \"A2\",\n      label: \"A2\",\n      align: \"center\"\n    }, {\n      prop: \"A3\",\n      label: \"A3\",\n      align: \"center\"\n    }, {\n      prop: \"A4\",\n      label: \"A4\",\n      align: \"center\"\n    }, {\n      prop: \"A5\",\n      label: \"A5\",\n      align: \"center\"\n    }, {\n      prop: \"A6\",\n      label: \"A6\",\n      align: \"center\"\n    }, {\n      prop: \"A7\",\n      label: \"A7\",\n      align: \"center\"\n    }];\n    this.preDataList = [{\n      A1: \"XXXXXXXXX\",\n      A2: \"XXXXXXXXX\",\n      A3: \"XXXXXXXXX\",\n      A4: \"XXXXXXXXX\",\n      A5: \"XXXXXXXXX\",\n      A6: \"XXXXXXXXX\",\n      A7: \"XXXXXXXXX\"\n    }, {\n      A1: \"XXXXXXXXX\",\n      A2: \"XXXXXXXXX\",\n      A3: \"XXXXXXXXX\",\n      A4: \"XXXXXXXXX\",\n      A5: \"XXXXXXXXX\",\n      A6: \"XXXXXXXXX\",\n      A7: \"XXXXXXXXX\"\n    }, {\n      A1: \"XXXXXXXXX\",\n      A2: \"XXXXXXXXX\",\n      A3: \"XXXXXXXXX\",\n      A4: \"XXXXXXXXX\",\n      A5: \"XXXXXXXXX\",\n      A6: \"XXXXXXXXX\",\n      A7: \"XXXXXXXXX\"\n    }, {\n      A1: \"XXXXXXXXX\",\n      A2: \"XXXXXXXXX\",\n      A3: \"XXXXXXXXX\",\n      A4: \"XXXXXXXXX\",\n      A5: \"XXXXXXXXX\",\n      A6: \"XXXXXXXXX\",\n      A7: \"XXXXXXXXX\"\n    }, {\n      A1: \"XXXXXXXXX\",\n      A2: \"XXXXXXXXX\",\n      A3: \"XXXXXXXXX\",\n      A4: \"XXXXXXXXX\",\n      A5: \"XXXXXXXXX\",\n      A6: \"XXXXXXXXX\",\n      A7: \"XXXXXXXXX\"\n    }];\n  },\n  mounted: function mounted() {},\n  methods: {\n    getRouteData: function getRouteData() {\n      //   console.log(this.$route.query);\n      if (this.$route.query.data != undefined) {\n        if (typeof this.$route.query.data == \"number\") {\n          // 1 表资产 2 API资产 3 指标资产 4 标签资产\n          if (this.$route.query.data == 1) {\n            this.assetType = \"table\";\n          } else if (this.$route.query.data == 2) {\n            this.assetType = \"api\";\n          } else if (this.$route.query.data == 3) {\n            this.assetType = \"target\";\n          } else if (this.$route.query.data == 4) {\n            this.assetType = \"label\";\n          }\n        } else if (typeof this.$route.query.data == \"string\") {\n          this.keywords = this.$route.query.data; // 搜索\n\n          if (this.$route.query.from == \"home\") {\n            //   从首页搜索\n            console.log(this.$route.query.data, \"首页搜索\");\n            var index = this.$route.query.index;\n\n            if (index != undefined) {\n              // 0~3 表数据资产 4~6 指标数据资产 7~9 标签数据资产\n              if (index == 0 || index == 1 || index == 2 || index == 3) {\n                this.assetType = \"table\";\n              } else if (index == 4 || index == 5 || index == 6) {\n                this.assetType = \"target\";\n              } else if (index == 7 || index == 8 || index == 9) {\n                this.assetType = \"label\";\n              }\n\n              this.firstType = this.$route.query.firstDir;\n              this.secondType = this.$route.query.secondDir;\n              this.thirdType = (this.$route.query.index + 1).toString();\n              console.log(this.secondType, 'this.secondType');\n              console.log(this.thirdType, 'this.thirdType');\n            }\n\n            console.log(this.$route.query.index);\n          } else if (this.$route.query.from == \"other\") {\n            //   从其他页搜索\n            console.log(this.$route.query.data, \"其他页搜索\");\n          } // 初始化列表\n\n\n          this.getListByKeywords();\n        }\n      }\n    },\n    // 树状图tab\n    handleClick: function handleClick(tab, event) {\n      console.log(tab, event);\n    },\n    // 节点过滤\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value.toString()) !== -1;\n    },\n    // 节点点击   --- 树状图节点点击调接口重新查询列表\n    handleNodeClick: function handleNodeClick(data, node) {\n      var _this2 = this;\n\n      if (!data.children || data.children.length == 0) {\n        this.thirdType = data.contentsId;\n        this.secondType = node.parent.data.contentsId;\n        this.firstType = node.parent.parent.data.contentsId;\n        var request = {\n          assetType: this.assetType,\n          contentsOne: this.firstType,\n          contentsTwo: this.secondType,\n          contentsThree: this.thirdType\n        };\n        this.$api.getAssetPage(request).then(function (res) {\n          _this2.total = res.total;\n\n          if (_this2.assetType === 'table') {\n            _this2.tableData = res.tableList;\n          } else if (_this2.assetType === 'api') {\n            _this2.tableData = res.apiList;\n          } else if (_this2.assetType === 'target') {\n            _this2.tableData = res.targetList;\n          } else if (_this2.assetType === 'label') {\n            _this2.tableData = res.labelList;\n          } else {\n            _this2.tableData = res.obj;\n          }\n        });\n      }\n    },\n    // 列表查询\n    getListByKeywords: function getListByKeywords() {\n      var _this3 = this;\n\n      this.keywords = localStorage.getItem('searchKeyWords');\n      var request = {\n        keywords: this.keywords,\n        page: this.currentPage,\n        size: this.pageSize,\n        assetType: this.assetType,\n        contentsOne: this.firstType,\n        contentsTwo: this.secondType,\n        contentsThree: this.thirdType,\n        table: this.table,\n        api: this.api,\n        target: this.target,\n        label: this.label,\n        deptCode: this.deptCode\n      };\n      console.log(request);\n      this.$api.getListByKeywords(request).then(function (res) {\n        _this3.total = res.total;\n\n        if (_this3.assetType === 'table') {\n          _this3.tableData = res.tableList;\n        } else if (_this3.assetType === 'api') {\n          _this3.tableData = res.apiList;\n        } else if (_this3.assetType === 'target') {\n          _this3.tableData = res.targetList;\n        } else if (_this3.assetType === 'label') {\n          _this3.tableData = res.labelList;\n        } else {\n          _this3.tableData = res.obj;\n        }\n      });\n    },\n    // 分页\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.getListByKeywords();\n    },\n    // 我的购物车\n    jumpShopCar: function jumpShopCar() {\n      this.$router.push({\n        path: \"/myShopCar/index\"\n      });\n    },\n    // 我的收藏\n    jumpCollection: function jumpCollection() {\n      this.$router.push({\n        path: \"/myCollection/index\"\n      });\n    },\n    // 详情查看\n    viewDetails: function viewDetails(item) {\n      var _this4 = this;\n\n      this.$api.getAssetsDetail({\n        assetType: item.assetType,\n        id: item.id,\n        targetCode: item.targetCode,\n        labelCode: item.labelCode\n      }).then(function (res) {\n        console.log(res, item.assetType);\n        var queryData = {};\n\n        if (item.assetType === 'table') {\n          queryData = res.data;\n        } else {\n          queryData = res;\n        }\n\n        _this4.$router.push({\n          path: \"/detailsView/\" + item.assetType,\n          query: {\n            res: queryData\n          }\n        });\n      });\n    },\n    // 数据预览\n    previewData: function previewData(item) {\n      this.dataPreVis = true;\n    },\n    // 添加收藏\n    addFavorite: function addFavorite(item) {\n      var _this5 = this;\n\n      this.$api.addFavorite({\n        assetId: item.assetId,\n        assetType: item.assetType\n      }).then(function (res) {\n        _this5.$message.success('添加收藏成功!');\n\n        _this5.getListByKeywords();\n      });\n    },\n    // 删除收藏\n    delFavorite: function delFavorite(item) {\n      var _this6 = this;\n\n      this.$api.delFavorite({\n        assetId: item.assetId,\n        assetType: item.assetType\n      }).then(function (res) {\n        _this6.$message.success('取消收藏成功!');\n\n        _this6.getListByKeywords();\n      });\n    },\n    // 申请访问\n    applyForAccess: function applyForAccess(item) {\n      var _this7 = this;\n\n      this.$api.applyForAccess({\n        apiId: item.id\n      }).then(function (res) {\n        _this7.$message.success('申请成功!');\n\n        _this7.getListByKeywords();\n      });\n    },\n    // 申请权限\n    applyForAuthority: function applyForAuthority(item) {\n      this.authorityVis = true;\n      this.request.assetId = item.id;\n    },\n    // 加入购物车\n    addShopCar: function addShopCar() {\n      var _this8 = this;\n\n      this.$api.addShopCar(this.request).then(function (res) {\n        console.log(res);\n        _this8.authorityVis = false;\n      });\n    },\n    // 直接申请\n    directApply: function directApply() {\n      this.authorityVis = false;\n      this.directApplyVis = true;\n    },\n    // 确定申请\n    confirmApply: function confirmApply() {\n      var _this9 = this;\n\n      // 关闭申请弹窗\n      this.directApplyVis = false; // 直接申请权限接口\n\n      this.$api.applyForAuthority({\n        id: this.request.assetId\n      }).then(function (res) {\n        console.log(res);\n        _this9.tipDialog = true;\n      }).then(function () {\n        _this9.getListByKeywords(); // 提示框展示三秒自动关闭\n\n\n        setTimeout(function () {\n          _this9.tipDialog = false;\n        }, 3000);\n      });\n    }\n  }\n};\nexports.default = _default;",null]}