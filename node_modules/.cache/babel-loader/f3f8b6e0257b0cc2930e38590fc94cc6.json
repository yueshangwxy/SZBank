{"remainingRequest":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\pncui-portal-fashional\\src\\views\\dashboard\\indicatorboard\\DepositAnalysis.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\pncui-portal-fashional\\src\\views\\dashboard\\indicatorboard\\DepositAnalysis.vue","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"F:/code/indicator/Pncui-Indicator/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport echarts from 'echarts';\nimport { mapGetters } from 'vuex';\nimport { depositAnalysis } from \"../../../api/dashboard/dashboard.js\";\nimport { getYesterday } from '@eladmin/utils/data_format';\nexport default {\n  name: 'DepositAnalysis',\n  props: {\n    className: {\n      type: String,\n      default: 'box-card'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '100%'\n    },\n    autoResize: {\n      type: Boolean,\n      default: true\n    },\n    date: {\n      type: String,\n      default: getYesterday()\n    }\n  },\n  data: function data() {\n    return {\n      chart: null,\n      sidebarElm: null,\n      chartData: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    depositAnalysis(this.date).then(function (res) {\n      _this.chartData = res.data;\n\n      _this.initChart();\n    });\n    window.addEventListener('resize', this.onResize);\n  },\n  computed: _objectSpread({}, mapGetters(['sidebar'])),\n  watch: {\n    sidebar: {\n      deep: true,\n      immediate: true,\n      handler: function handler(newValue, oldValue) {\n        // console.log('=====watch>>', oldValue, newValue)\n        this.onResize(); // result为true，则表示是全部选中\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (!this.chart) {\n      return;\n    }\n\n    this.chart.dispose();\n    this.chart = null;\n  },\n  methods: {\n    setOptions: function setOptions() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          data = _ref.data;\n\n      this.chart.setOption({\n        tooltip: {\n          trigger: 'item',\n          formatter: function formatter(params, ticket, callback) {\n            var res = '';\n\n            if (params.data.detail) {\n              res = params.data.detail.map(function (e) {\n                return e.name + ':' + e.value;\n              }).join('<br/>');\n            }\n\n            return res;\n          }\n        },\n        legend: {\n          orient: 'vertical',\n          // left: 10,\n          x: '75%',\n          // 图例距离左的距离\n          y: '20%',\n          // 图例上下居中\n          data: data.map(function (e) {\n            return e.name;\n          })\n        },\n        color: ['#F09937', '#489FF8', '#74C8C4'],\n        series: [{\n          name: '存款结构',\n          type: 'pie',\n          radius: ['45%', '72%'],\n          center: ['35%', '50%'],\n          avoidLabelOverlap: false,\n          label: {\n            show: true,\n            formatter: '{d}%',\n            position: 'outside'\n          },\n          labelLine: {\n            show: true\n          },\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: '15'\n            }\n          },\n          data: data\n        }]\n      });\n    },\n    onResize: function onResize() {\n      if (this.chart) {\n        this.chart.resize();\n      }\n    },\n    initChart: function initChart() {\n      console.log('开始绘制存款结构分析图表...');\n      this.chart = echarts.init(document.querySelector('#card-main-deposit-analysis'));\n      this.setOptions(this.chartData);\n    }\n  }\n};",null]}