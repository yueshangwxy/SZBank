{"remainingRequest":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\code\\indicator\\Pncui-Indicator\\node_modules\\pncui-workflow\\src\\views\\activiti\\deployment.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\pncui-workflow\\src\\views\\activiti\\deployment.vue","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getBpmnFileNames, publishFileName, deleteDeployment, deployments } from \"../../api/workflow/activiti\";\nexport default {\n  name: 'Deployment',\n  data: function data() {\n    return {\n      rows: [],\n      loading: false,\n      selectBpmn: false,\n      form: {\n        fileName: '',\n        deployName: '',\n        category: ''\n      },\n      bpmnFileNames: [],\n      query: {},\n      page: {\n        // 页码\n        start: 0,\n        // 每页数据条数\n        size: 10,\n        // 总数据条数\n        total: 0\n      },\n      rules: {\n        fileName: [{\n          required: true,\n          message: '文件名称不能为空',\n          trigger: 'change'\n        }],\n        deployName: [{\n          required: true,\n          message: '部署名称不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  components: {},\n  mounted: function mounted() {\n    var _this = this;\n\n    this.refresh();\n    getBpmnFileNames().then(function (res) {\n      _this.bpmnFileNames = res.data;\n    });\n  },\n  methods: {\n    refresh: function refresh() {\n      var _this2 = this;\n\n      deployments(Object.assign({\n        order: 'desc',\n        sort: 'deployTime',\n        size: this.page.size,\n        start: this.page.start\n      }, this.query.name ? {\n        name: this.query.name\n      } : {})).then(function (res) {\n        //console.log(res)\n        _this2.rows = res.data.data;\n        _this2.page.total = res.data.total;\n      });\n    },\n    publish: function publish() {\n      var _this3 = this;\n\n      this.$refs['form'].validate(function (valid) {\n        if (!valid) {\n          return;\n        }\n\n        publishFileName(_this3.form.fileName, _this3.form.deployName, _this3.form.category).then(function (res) {\n          _this3.$message.success('流程发布成功');\n\n          _this3.selectBpmn = false;\n\n          _this3.refresh();\n        }).catch(function (error) {\n          _this3.$message.error(error);\n        });\n      });\n    },\n    deleteDeploy: function deleteDeploy(row) {\n      var _this4 = this;\n\n      console.log('================', row);\n      this.$confirm('确定要删除流程[' + row.name + ']吗？').then(function () {\n        deleteDeployment(row.id).then(function (res) {\n          _this4.$message.success('删除成功');\n\n          _this4.refresh();\n        });\n      });\n    },\n    // 当前页改变\n    pageChangeHandler: function pageChangeHandler(e) {\n      this.page.start = e;\n      this.refresh();\n    },\n    // 每页条数改变\n    sizeChangeHandler: function sizeChangeHandler(e) {\n      this.page.size = e;\n      this.page.start = 1;\n      this.refresh();\n    }\n  }\n};",null]}