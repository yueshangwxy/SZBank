{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet.vue","mtime":1652778689823},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/defineProperty\"));\n\nvar _vuex = require(\"vuex\");\n\nvar _avatar = _interopRequireDefault(require(\"@eladmin/assets/images/avatar.png\"));\n\nvar _RoleSelect = _interopRequireDefault(require(\"@eladmin/components/RoleSelect\"));\n\nvar _ThemeSelect = _interopRequireDefault(require(\"@portal/components/ThemeSelect\"));\n\nvar _Logo = _interopRequireDefault(require(\"@portal/layout/components/Sidebar/Logo\"));\n\nvar _name$components$data;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar _default = (_name$components$data = {\n  name: \"myWorkSheet\",\n  components: {\n    RoleSelect: _RoleSelect.default,\n    ThemeSelect: _ThemeSelect.default,\n    Logo: _Logo.default\n  },\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      Avatar: _avatar.default,\n      logo: require(\"../../../../public/images/logo.png\"),\n      activeTab: '',\n      tabList: [{\n        name: 'asset',\n        label: '数据资产平台'\n      }, {\n        name: 'service',\n        label: '数据服务平台'\n      }, {\n        name: 'laboratory',\n        label: '数据实验室'\n      }],\n      // radio\n      radio: 0,\n      // name: '',\n      // dept: '',\n      apiAddress: '',\n      apiName: '',\n      status: '',\n      // date: '',\n      searchInput: '',\n      dept: ''\n    }, (0, _defineProperty2.default)(_ref, \"status\", ''), (0, _defineProperty2.default)(_ref, \"dateValue\", ''), (0, _defineProperty2.default)(_ref, \"startTime\", ''), (0, _defineProperty2.default)(_ref, \"endTime\", ''), (0, _defineProperty2.default)(_ref, \"deptTreeList\", []), (0, _defineProperty2.default)(_ref, \"tableData\", []), (0, _defineProperty2.default)(_ref, \"propList\", []), (0, _defineProperty2.default)(_ref, \"pageSize\", 10), (0, _defineProperty2.default)(_ref, \"total\", 10), (0, _defineProperty2.default)(_ref, \"currentPage\", 1), (0, _defineProperty2.default)(_ref, \"approveDialog\", false), (0, _defineProperty2.default)(_ref, \"apprComment\", ''), (0, _defineProperty2.default)(_ref, \"selectedRow\", {}), (0, _defineProperty2.default)(_ref, \"appServiceVis\", false), (0, _defineProperty2.default)(_ref, \"activeName\", 'first'), (0, _defineProperty2.default)(_ref, \"diaDataProp\", []), (0, _defineProperty2.default)(_ref, \"diaDataList\", []), (0, _defineProperty2.default)(_ref, \"curAppCode\", ''), _ref;\n  },\n  watch: {\n    activeTab: function activeTab(val) {\n      var _this = this;\n\n      if (val === 'asset') {\n        this.propList = [{\n          prop: 'PROC_INST_ID',\n          label: '申请编号'\n        }, {\n          prop: 'NAME',\n          label: '申请名称'\n        }, {\n          prop: 'DEPT_NAME',\n          label: '申请部门'\n        }, {\n          prop: 'CRT_USER',\n          label: '申请人'\n        }, {\n          prop: 'CRT_DATE',\n          label: '申请时间'\n        }, {\n          prop: 'STATUS_DESC',\n          label: '状态',\n          type: 'tag',\n          tagType: function tagType(row) {\n            return row.STATUS_DESC === '已通过' ? 'info' : row.STATUS_DESC === '草稿' ? '' : row.STATUS_DESC === '待审批' ? 'warning' : 'danger';\n          }\n        }];\n        this.radio = 0;\n        this.reset();\n        this.initList();\n      } else if (val === 'service') {\n        this.radio = 0;\n        this.reset();\n        this.initList();\n        this.propList = [{\n          prop: 'num',\n          label: '申请编号'\n        }, {\n          prop: 'address',\n          label: 'api地址'\n        }, {\n          prop: 'name',\n          label: 'api名称'\n        }, {\n          prop: 'desc',\n          label: 'api描述'\n        }, {\n          prop: 'applicant',\n          label: '申请人'\n        }, {\n          prop: 'dept',\n          label: '申请部门'\n        }, {\n          prop: 'time',\n          label: '申请时间'\n        }, {\n          prop: 'status',\n          label: '状态'\n        }];\n        this.$api.qryWorkSheetList().then(function (res) {\n          console.log(res);\n          _this.tableData = res.serviceList;\n        });\n      } else {\n        this.radio = 0;\n        this.reset();\n        this.initList();\n        this.propList = [{\n          prop: 'num',\n          label: '实验室编号'\n        }, {\n          prop: 'name',\n          label: '实验室名称'\n        }, {\n          prop: 'dept',\n          label: '申请部门'\n        }, {\n          prop: 'applicant',\n          label: '申请人'\n        }, {\n          prop: 'time',\n          label: '申请时间'\n        }, {\n          prop: 'status',\n          label: '状态'\n        }];\n        this.$api.qryWorkSheetList().then(function (res) {\n          console.log(res);\n          _this.tableData = res.labList;\n        });\n      }\n    },\n    radio: function radio(val) {\n      if (val == 0) {\n        this.reset();\n        this.initList();\n        console.log('我的申请');\n      } else if (val == 1) {\n        this.reset();\n        this.initList();\n        console.log('待我审批');\n      } else {\n        this.reset();\n        this.initList();\n        console.log('我已审批');\n      }\n    },\n    dateValue: function dateValue(val) {\n      if (val) {\n        this.startTime = this.$formatDate(val[0]);\n        this.endTime = this.$formatDate(val[1]);\n      } else {\n        this.startTime = '';\n        this.endTime = '';\n      }\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.activeTab = 'asset';\n    this.$api.getDeptTree({}).then(function (res) {\n      _this2.deptTreeList = res.data;\n    });\n  },\n  computed: _objectSpread(_objectSpread(_objectSpread({}, (0, _vuex.mapGetters)([\"sidebar\", \"device\", \"user\", \"baseApi\"])), (0, _vuex.mapState)({\n    showBreadcrumb: function showBreadcrumb(state) {\n      return state.settings.showBreadcrumb;\n    }\n  })), {}, {\n    showLogo: function showLogo() {\n      return this.$store.state.settings.sidebarLogo;\n    },\n    show: {\n      get: function get() {\n        return this.$store.state.settings.showSettings;\n      },\n      set: function set(val) {\n        this.$store.dispatch(\"settings/changeSetting\", {\n          key: \"showSettings\",\n          value: val\n        });\n      }\n    }\n  })\n}, (0, _defineProperty2.default)(_name$components$data, \"created\", function created() {}), (0, _defineProperty2.default)(_name$components$data, \"methods\", {\n  // 退出登录提示\n  open: function open() {\n    var _this3 = this;\n\n    this.$confirm(\"确定注销并退出系统吗？\", \"提示\", {\n      confirmButtonText: \"确定\",\n      cancelButtonText: \"取消\",\n      type: \"warning\"\n    }).then(function () {\n      _this3.logout();\n    });\n  },\n  // 退出登录\n  logout: function logout() {\n    this.$store.dispatch(\"LogOut\").then(function () {\n      location.reload();\n    });\n  },\n  // 重置\n  reset: function reset() {\n    this.searchInput = '';\n    this.dept = '';\n    this.apiAddress = '';\n    this.apiName = '';\n    this.status = '';\n    this.dateValue = '';\n  },\n  // 列表查询  -- 从第一页开始查  搜索按钮\n  initList: function initList() {\n    this.currentPage = 1;\n    this.queryList();\n  },\n  // 列表查询 -- 当前页\n  queryList: function queryList() {\n    if (this.activeTab === 'asset') {\n      console.log('asset查询');\n      this.queryProcessList();\n    } else if (this.activeTab === 'service') {\n      console.log('service查询');\n      this.queryServiceList();\n    } else if (this.activeTab === 'laboratory') {\n      console.log('laboratory查询');\n      this.queryLaboratoryList();\n    }\n  },\n  // 列表查询  数据资产平台  -- 流程\n  queryProcessList: function queryProcessList() {\n    var _this4 = this;\n\n    var request = {\n      page: String(this.currentPage),\n      size: String(this.pageSize),\n      deptCode: this.dept,\n      name: this.searchInput,\n      crtDateBeg: this.startTime,\n      crtDateEnd: this.endTime\n    };\n    console.log(request);\n\n    if (this.radio == 0) {\n      request.state = this.status;\n      this.$api.appliedProcess(request).then(function (res) {\n        console.log(res);\n        var data = res.data;\n        _this4.tableData = data.records;\n        _this4.total = data.total;\n      });\n    } else if (this.radio == 1) {\n      // 待我审批\n      this.$api.waitApprove(request).then(function (res) {\n        console.log(res);\n        var data = res.data;\n        _this4.tableData = data.records;\n        _this4.total = data.total;\n      });\n    } else if (this.radio == 2) {\n      // 我已审批\n      this.$api.alreadyApprove(request).then(function (res) {\n        console.log(res);\n        var data = res.data;\n        _this4.tableData = data.records;\n        _this4.total = data.total;\n      });\n    }\n  },\n  // 列表查询  数据服务平台\n  queryServiceList: function queryServiceList() {\n    console.log('service');\n  },\n  // 列表查询  数据实验室\n  queryLaboratoryList: function queryLaboratoryList() {\n    console.log('laboratory');\n  },\n  // 详情\n  viewDetails: function viewDetails(row) {\n    console.log(row);\n\n    if (this.activeTab === 'asset') {\n      this.$router.push({\n        path: '/detailsView/table',\n        query: {\n          id: row.tableId\n        }\n      });\n    }\n  },\n  // 审批按钮\n  approveBtn: function approveBtn(row) {\n    this.approveDialog = true;\n    this.apprComment = '';\n    this.selectedRow = row;\n  },\n  // 审批  -- 通过\n  pass: function pass() {\n    var _this5 = this;\n\n    console.log('通过', this.selectedRow.TASK_ID);\n    this.$api.completeTask({\n      taskId: this.selectedRow.TASK_ID,\n      submitType: '0',\n      assignee: '',\n      apprComment: this.apprComment\n    }).then(function (res) {\n      if (res.code == 0 || res.code == 200) {\n        _this5.approveDialog = false;\n\n        _this5.$message.success(res.msg);\n\n        _this5.queryProcessList();\n      } else {\n        _this5.$message.error(res.msg);\n      }\n    });\n  },\n  // 审批  -- 拒绝\n  reject: function reject() {\n    var _this6 = this;\n\n    console.log('拒绝', this.selectedRow.TASK_ID);\n    this.$api.completeTask({\n      taskId: this.selectedRow.TASK_ID,\n      submitType: '1',\n      assignee: '',\n      apprComment: this.apprComment\n    }).then(function (res) {\n      if (res.code == 0 || res.code == 200) {\n        _this6.approveDialog = false;\n\n        _this6.$message.success(res.msg);\n\n        _this6.queryProcessList();\n      } else {\n        _this6.$message.error(res.msg);\n      }\n    });\n  },\n  // 应用服务关系\n  appService: function appService(row) {\n    var _this7 = this;\n\n    console.log('应用服务关系');\n    this.diaDataProp = [{\n      prop: 'name',\n      label: '名称',\n      align: 'center'\n    }, {\n      prop: 'description',\n      label: '描述',\n      align: 'center'\n    }];\n    this.appServiceVis = true;\n    this.curAppCode = row.appCode;\n    this.$api.qryAppService({\n      appCode: this.curAppCode\n    }).then(function (res) {\n      console.log(res, 23333);\n      _this7.diaDataList = res.data;\n    });\n  },\n  // 弹窗tab\n  handleClick: function handleClick(tab, event) {\n    var _this8 = this;\n\n    console.log(tab.name);\n\n    if (tab.name === 'first') {\n      this.$api.qryAppService({\n        appCode: this.curAppCode\n      }).then(function (res) {\n        _this8.diaDataList = res.data;\n      });\n    } else {\n      this.$api.qryAppAccessService({\n        appCode: this.curAppCode\n      }).then(function (res) {\n        _this8.diaDataList = res.data;\n      });\n    }\n  },\n  // 分页\n  handleCurrentChange: function handleCurrentChange(val) {\n    console.log(val);\n    this.currentPage = val;\n    this.queryList();\n  }\n}), _name$components$data);\n\nexports.default = _default;",null]}