{"remainingRequest":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tablePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tablePage.vue","mtime":1649224879336},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649224862071},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1649224861568},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649224862071},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1649224877943}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _assetsClassify = require(\"../../../api/searchPage/assetsClassify\");\n\nvar _es = require(\"../../../api/searchPage/es\");\n\nvar _permissionApplication = require(\"../../../api/searchPage/permissionApplication\");\n\nvar _assetsTablePreview = require(\"../../../api/searchPage/assetsTablePreview\");\n\nvar _assetsClassification = require(\"../../../api/searchPage/assetsClassification\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'TablePage',\n  data: function data() {\n    return {\n      activeAuth: 'all',\n      // 树形控件\n      filterText: '',\n      defaultProps: {\n        id: 'id',\n        children: 'children',\n        label: 'name'\n      },\n      treeData: [],\n      treeDataAll: [],\n      treeDataAuth: [],\n      // 筛选\n      filterForm: {\n        input1: '',\n        input2: '',\n        input3: '',\n        input4: '',\n        input5: ''\n      },\n      // 表格\n      tableList: [],\n      tableListAll: [],\n      tableListAuth: [],\n      // 分页\n      pageSize: 10,\n      currentPage: 1,\n      total: 50,\n      // 数据预览弹窗\n      dataPreVis: false,\n      preDataList: [],\n      preDataProp: [],\n      // 详情查看\n      detailsShow: false,\n      detailType: 'fieldInfo',\n      infoOptions: [],\n      infoVal: '',\n      fieldInfoDataList: [],\n      fieldInfoDataProp: [],\n      // 申请权限\n      applyVis: false,\n      applyItem: [],\n      effectTime: '临时生效',\n      startDate: '',\n      endDate: '',\n      nodeData: []\n    };\n  },\n  watch: {\n    filterText: function filterText(val) {\n      this.$refs.tree.filter(val);\n    },\n    activeAuth: function activeAuth(val) {\n      if (val === 'all') {\n        this.treeData = this.treeDataAll;\n        this.tableList = this.tableListAll;\n      } else {\n        this.treeData = this.treeDataAuth;\n        this.tableList = this.tableListAuth;\n      }\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    // 树形控件数据\n    (0, _assetsClassify.getTree)(\"table\").then(function (data) {\n      _this.treeData = data;\n      _this.treeDataAll = data;\n      _this.treeDataAuth = data;\n    }); // 数据预览\n\n    this.preDataProp = [{\n      prop: 'dataInfo',\n      label: '数据信息' // sortable: true\n      // width: '100px',\n\n    }\n    /*,\r\n    {\r\n       prop: 'nickName',\r\n       label: '昵称',\r\n       // width: '100px',\r\n    }*/\n    ]; // 详情查看  --字段信息\n\n    this.fieldInfoDataProp = [{\n      prop: 'field',\n      label: '字段名称' // sortable: true\n      // width: '100px',\n\n    }, {\n      prop: 'types',\n      label: '字段类型' // width: '100px',\n\n    }\n    /*                {\r\n                        prop: 'phone',\r\n                        label: '字段长度',\r\n                        // width: '100px',\r\n                    },*/\n    ];\n  },\n  mounted: function mounted() {\n    var param = {\n      \"keywords\": '',\n      \"page\": this.currentPage,\n      \"size\": this.pageSize,\n      \"assetType\": 'table'\n    };\n    this.getListByKeywords(param);\n  },\n  methods: {\n    getListByKeywords: function getListByKeywords(param) {\n      var _this2 = this;\n\n      (0, _es.getListByKeywords)(param).then(function (data) {\n        _this2.total = data.count.table;\n        _this2.tableList = data.obj;\n        _this2.tableListAll = data.obj;\n        _this2.tableListAuth = data.obj;\n      });\n    },\n    handleClick: function handleClick(tab, event) {},\n    // 节点过滤\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value.toString()) !== -1;\n    },\n    // 节点点击\n    handleNodeClick: function handleNodeClick(data) {\n      var _this3 = this;\n\n      this.nodeData = data;\n      console.log(data);\n      var param = {\n        \"page\": this.currentPage,\n        \"size\": this.pageSize,\n        \"assetType\": 'table',\n        \"obj\": data\n      };\n      (0, _es.getListByClassify)(param).then(function (data) {\n        _this3.total = data.count.table;\n        _this3.tableList = data.obj;\n        _this3.tableListAll = data.obj;\n        _this3.tableListAuth = data.obj;\n      });\n    },\n    // 重置 \n    reset: function reset() {\n      this.filterForm = {};\n      this.nodeData = [];\n      this.currentPage = 1;\n      this.pageSize = 10;\n      var param = {\n        \"keywords\": '',\n        \"page\": 1,\n        \"size\": 10,\n        \"assetType\": 'table'\n      };\n      this.getListByKeywords(param);\n    },\n    // 搜索\n    doSubmit: function doSubmit() {\n      this.nodeData = [];\n      var param = {\n        \"keywords\": '',\n        \"page\": this.currentPage,\n        \"size\": this.pageSize,\n        \"assetType\": 'table',\n        \"searchList\": this.filterForm\n      };\n      this.getListByKeywords(param);\n    },\n    // 按钮   --- 数据预览\n    dataPre: function dataPre(name) {\n      var _this4 = this;\n\n      name = \"ind_atom_info\";\n      (0, _assetsTablePreview.getListByName)(name).then(function (data) {\n        if (data.code == '200') {\n          _this4.preDataList = data.data;\n          console.log(\"---------------\" + JSON.stringify(_this4.preDataList));\n          _this4.dataPreVis = true;\n        } else {\n          _this4.$message({\n            message: data.msg,\n            type: 'warning'\n          });\n        }\n      });\n    },\n    goApply: function goApply() {\n      var _this5 = this;\n\n      var assetId = this.applyItem.assetId;\n      var param = {\n        \"assetId\": assetId,\n        \"beginTime\": this.startDate,\n        \"endTime\": this.endDate\n      };\n      console.log(this.applyItem.assetId + \"---------\" + this.startDate + \"-----------\" + this.endDate);\n      (0, _permissionApplication.startApplication)(param).then(function (data) {\n        console.log(data);\n\n        if (data.code == '0') {\n          _this5.$message({\n            message: '操作成功',\n            type: 'success'\n          });\n\n          _this5.applyVis = false;\n        }\n      });\n    },\n    goPrepare: function goPrepare() {\n      var _this6 = this;\n\n      var assetId = this.applyItem.assetId;\n      var param = {\n        \"assetId\": assetId,\n        \"beginTime\": this.startDate,\n        \"endTime\": this.endDate\n      };\n      console.log(this.applyItem.assetId + \"---------\" + this.startDate + \"-----------\" + this.endDate);\n      (0, _permissionApplication.startApplication)(param).then(function (data) {\n        console.log(data);\n\n        if (data.code == '0') {\n          _this6.$message({\n            message: '操作成功',\n            type: 'success'\n          });\n\n          _this6.applyVis = false;\n        }\n      });\n    },\n    // 按钮   --- 详情查看\n    detailView: function detailView(name) {\n      var _this7 = this;\n\n      name = \"index_table\";\n      (0, _assetsClassification.getDetailByName)(name).then(function (data) {\n        if (data.code == '200') {\n          _this7.fieldInfoDataList = data.data;\n          _this7.detailsShow = true;\n        } else {\n          _this7.$message({\n            message: data.msg,\n            type: 'warning'\n          });\n        }\n      });\n    },\n    // 详情查看 tab\n    handleDetailClick: function handleDetailClick(tab, event) {},\n    // 按钮   --- 申请权限\n    applyAuthority: function applyAuthority(item) {\n      this.applyVis = true;\n      this.applyItem = item;\n    },\n    // 分页\n    handleSizeChange: function handleSizeChange(val) {\n      var _this8 = this;\n\n      console.log(\"\\u6BCF\\u9875 \".concat(val, \" \\u6761\"));\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.filterForm = {};\n\n      if (this.nodeData !== undefined && Object.keys(this.nodeData).length > 0) {\n        var param = {\n          \"page\": this.currentPage,\n          \"size\": this.pageSize,\n          \"assetType\": 'table',\n          \"obj\": this.nodeData\n        };\n        (0, _es.getListByClassify)(param).then(function (data) {\n          _this8.total = data.count.table;\n          _this8.tableList = data.obj;\n          _this8.tableListAll = data.obj;\n          _this8.tableListAuth = data.obj;\n        });\n      } else {\n        var _param = {\n          \"keywords\": '',\n          \"page\": this.currentPage,\n          \"size\": this.pageSize,\n          \"assetType\": 'table'\n        };\n        this.getListByKeywords(_param);\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      var _this9 = this;\n\n      console.log(\"\\u5F53\\u524D\\u9875: \".concat(val));\n      this.currentPage = val;\n\n      if (this.nodeData !== undefined && Object.keys(this.nodeData).length > 0) {\n        var param = {\n          \"page\": this.currentPage,\n          \"size\": this.pageSize,\n          \"assetType\": 'table',\n          \"obj\": this.nodeData\n        };\n        (0, _es.getListByClassify)(param).then(function (data) {\n          _this9.total = data.count.table;\n          _this9.tableList = data.obj;\n          _this9.tableListAll = data.obj;\n          _this9.tableListAuth = data.obj;\n        });\n      } else {\n        var _param2 = {\n          \"keywords\": '',\n          \"page\": this.currentPage,\n          \"size\": this.pageSize,\n          \"assetType\": 'table'\n        };\n        this.getListByKeywords(_param2);\n      }\n    }\n  }\n};\nexports.default = _default;",null]}