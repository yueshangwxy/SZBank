{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\applyForDoc.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\applyForDoc.vue","mtime":1654824275284},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createForOfIteratorHelper2 = _interopRequireDefault(require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _selectUser = _interopRequireDefault(require(\"./selectUser.vue\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {\n    selectUser: _selectUser.default\n  },\n  data: function data() {\n    return {\n      title: \"文件申请\",\n      editPage: true,\n      showSelectUser: false,\n      id: \"\",\n      ruleForm: {\n        name: \"\",\n        description: \"\",\n        overtime: \"\",\n        currentLimit: \"\",\n        type: \"\",\n        destinationAddress: \"\",\n        latestGenerationTime: \"\",\n        separator: \"\",\n        fileFormat: \"\",\n        serviceType: \"2\",\n        status: \"\",\n        dept: \"\",\n        dockName: \"\",\n        belongUser: \"\",\n        fieldList: \"\",\n        belongApplication: \"\",\n        belongApplicationName: \"\",\n        sitPath: \"\",\n        prePath: \"\",\n        serviceParamList: [{\n          name: \"\",\n          type: \"\",\n          parameterType: \"\",\n          // 1入参 2出参\n          description: \"\",\n          defaultValue: \"\",\n          isPass: \"\"\n        }],\n        applicationInfoList: []\n      },\n      // 部门树\n      deptTree: [],\n      // 表单\n      labelPosition: \"top\",\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入名称\",\n          trigger: \"blur\"\n        }],\n        description: [{\n          required: true,\n          message: \"请输入描述\",\n          trigger: \"blur\"\n        }],\n        destinationAddress: [{\n          required: true,\n          message: \"请输入目标地址\",\n          trigger: \"blur\"\n        }],\n        latestGenerationTime: [{\n          required: true,\n          message: \"请选择时间\",\n          trigger: \"change\"\n        }],\n        separator: [{\n          required: true,\n          message: \"请输入分隔符\",\n          trigger: \"blur\"\n        }],\n        fileFormat: [{\n          required: true,\n          message: \"请选择格式\",\n          trigger: \"change\"\n        }],\n        status: [{\n          required: true,\n          message: \"请选择接口状态\",\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.initData();\n  },\n  // beforeRouteLeave(to, from, next) {\n  //   if (to.name === \"myService\") {\n  //     this.$store.commit(\"SET_KEEPALIVE\", true);\n  //   } else {\n  //     this.$store.commit(\"SET_KEEPALIVE\", false);\n  //   }\n  //   next();\n  // },\n  // watch: {\n  //   $route(e) {\n  //     if (e.name === \"applyForDoc\") {\n  //       this.initData();\n  //     }\n  //   },\n  // },\n  methods: {\n    initData: function initData() {\n      var _this = this;\n\n      this.editPage = this.$route.name === \"editDoc\" ? true : false;\n\n      if (this.editPage) {\n        this.title = this.$route.meta.title;\n      }\n\n      this.$api.findDeptTree({}).then(function (res) {\n        _this.deptTree = res.data;\n      });\n\n      if (this.$route.name === \"editDoc\") {\n        this.id = this.$route.query.id ? this.$route.query.id : \"\";\n        this.$api.viewServiceDetail({\n          id: this.id\n        }).then(function (res) {\n          _this.ruleForm = res.data;\n        });\n      }\n    },\n    slectBelongUser: function slectBelongUser(user) {\n      if (user && user.username) {\n        this.$set(this.ruleForm, \"dockName\", user.nickName);\n        this.$set(this.ruleForm, \"belongUser\", user.username);\n      }\n\n      this.showSelectUser = !this.showSelectUser;\n    },\n    // 取消\n    cancel: function cancel() {\n      var _this2 = this;\n\n      console.log(\"取消\");\n      var currentView = this.$store.state.tagsView.visitedViews[0];\n\n      var _iterator = (0, _createForOfIteratorHelper2.default)(this.$store.state.tagsView.visitedViews),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          currentView = _step.value;\n\n          if (currentView.path === this.$route.path) {\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.$store.dispatch(\"tagsView/delView\", currentView).then(function () {\n        _this2.$router.push({\n          path: \"/dataServicePlatform/myService\"\n        });\n      });\n    },\n    // 提交申请\n    submitApplication: function submitApplication() {\n      var _this3 = this;\n\n      console.log(\"提交申请\", this.ruleForm);\n      this.$refs.ruleForm.validate(function (valid) {\n        if (valid) {\n          _this3.$api.applyForService(_this3.ruleForm).then(function (res) {\n            if (res.code == 0 || res.code == 200) {\n              _this3.$message.success(res.msg);\n\n              _this3.cancel();\n            } else {\n              _this3.$message.error(res.msg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 确认更新\n    confirmModify: function confirmModify() {\n      var _this4 = this;\n\n      console.log(\"确定修改\", this.ruleForm);\n      this.$refs.ruleForm.validate(function (valid) {\n        if (valid) {\n          _this4.$api.serviceUpdate(_this4.ruleForm).then(function (res) {\n            if (res.code == 0 || res.code == 200) {\n              _this4.$message.success(res.msg);\n\n              _this4.cancel();\n            } else {\n              _this4.$message.error(res.msg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}