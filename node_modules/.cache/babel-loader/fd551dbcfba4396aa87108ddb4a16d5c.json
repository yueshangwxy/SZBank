{"remainingRequest":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js!D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\myShopCar\\myShopCar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\myShopCar\\myShopCar.vue","mtime":1656042806020},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"MyShopCar\",\n  data: function data() {\n    return {\n      searchInput: \"\",\n      // 表格\n      tableData: [],\n      propList: [],\n      // 分页\n      pageSize: 10,\n      currentPage: 1,\n      total: 4,\n      // 审批 弹窗\n      confirmDialog: false,\n      // 提示弹窗\n      tipDialog: false,\n      // 审批参数\n      request: [],\n      // 当前选中行\n      selectRows: [],\n      // 是否批量操作\n      isbatch: false\n    };\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    if (to.path === \"/detailsView/table\" || to.path === \"/detailsView/api\" || to.path === \"/detailsView/label\" || to.path === \"/detailsView/target\") {\n      this.$store.commit(\"SET_KEEPALIVE\", true);\n    } else {\n      this.$store.commit(\"SET_KEEPALIVE\", false);\n    }\n\n    next();\n  },\n  created: function created() {\n    this.$store.commit(\"SET_KEEPALIVE\", true);\n    this.propList = [{\n      prop: \"tableName\",\n      label: \"表名\",\n      width: \"160\"\n    }, {\n      prop: \"deptCode\",\n      width: 130,\n      label: \"业务属主部门\"\n    }, {\n      prop: \"project\",\n      label: \"存储项目名称\",\n      width: \"160\"\n    }, {\n      prop: \"driverType\",\n      width: 130,\n      label: \"底层存储类型\"\n    }, {\n      prop: \"owner\",\n      label: \"所属用户\"\n    }, {\n      prop: \"beginTimeStr\",\n      width: 130,\n      label: \"权限开始日期\"\n    }, {\n      prop: \"endTimeStr\",\n      width: 130,\n      label: \"权限结束日期\",\n      type: \"endTime\",\n      render: function render(row) {\n        var endTimeStr = row.endTimeStr ? row.endTimeStr.indexOf(\"9999\") > -1 ? \"永久\" : row.endTimeStr : \"\";\n        return endTimeStr;\n      }\n    }, {\n      prop: \"crtDateStr\",\n      label: \"申请时间\"\n    }];\n  },\n  mounted: function mounted() {\n    this.initList();\n  },\n  methods: {\n    transInvalidTime: function transInvalidTime(time) {\n      if (time && time.includes(\"9999\")) {\n        return \"永久\";\n      } else {\n        return time;\n      }\n    },\n    // 从第一页开始查找\n    initList: function initList() {\n      this.currentPage = 1;\n      this.queryList();\n    },\n    // 查询列表\n    queryList: function queryList() {\n      var _this = this;\n\n      this.$api.qryShopCar({\n        page: this.currentPage,\n        size: this.pageSize,\n        tableName: this.searchInput\n      }).then(function (res) {\n        var data = res.data;\n        _this.tableData = data.records;\n        _this.total = data.total;\n      });\n    },\n    // 复选框选中\n    handleSelectionChange: function handleSelectionChange(val) {\n      var _this2 = this;\n\n      // [{}]  [{},{}]\n      // this.selectRows = val\n      // if(this.selectRows.length<1) {\n      //     this.businessKey = ''\n      // } else {\n      //     this.selectRows.forEach(ele => {\n      //         this.businessKey = this.businessKey += ele.tableId + ','\n      //     });\n      //     this.businessKey = this.businessKey.slice(0,this.businessKey.length-1)\n      // }\n      this.selectRows = [];\n      val.forEach(function (item) {\n        _this2.selectRows.push({\n          tableId: item.tableId,\n          beginTime: item.beginTimeStr,\n          endTime: item.endTimeStr\n        });\n      });\n    },\n    // 详情查看\n    viewDetails: function viewDetails(row) {\n      console.log(\"详情查看\", row.tableId);\n      this.$router.push({\n        path: \"/detailsView/table\",\n        query: {\n          id: row.tableId\n        }\n      });\n    },\n    // 发起审批  -- 单个\n    initiateApproval: function initiateApproval(row) {\n      this.confirmDialog = true;\n      this.isbatch = false;\n      this.request = [{\n        tableId: row.tableId,\n        beginTime: row.beginTimeStr,\n        endTime: row.endTimeStr\n      }];\n    },\n    // 发起审批  -- 批量\n    batchOperation: function batchOperation() {\n      this.confirmDialog = true;\n      this.isbatch = true;\n    },\n    // 确认审批\n    confrim: function confrim() {\n      var _this3 = this;\n\n      this.confirmDialog = false;\n      var list = [];\n\n      if (this.isbatch) {\n        list = this.selectRows;\n      } else {\n        list = this.request;\n      } // 调接口审批\n\n\n      this.$api.initiateApproval({\n        list: list\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.code == 200 || res.code == 0) {\n          _this3.tipDialog = true;\n          setTimeout(function () {\n            _this3.tipDialog = false;\n\n            _this3.queryList();\n          }, 3000);\n        } else {\n          _this3.$message.error(res.msg);\n        }\n      });\n    },\n    // 删除\n    deleteRow: function deleteRow(row) {\n      var _this4 = this;\n\n      this.$confirm(\"确定删除吗?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        _this4.$api.delShopCar({\n          Id: row.id\n        }).then(function (res) {\n          _this4.queryList();\n\n          _this4.$message.success(res.message);\n        });\n      });\n    },\n    // 分页\n    handleSizeChange: function handleSizeChange(val) {\n      console.log(\"\\u6BCF\\u9875 \".concat(val, \" \\u6761\"));\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.queryList();\n    }\n  }\n};\nexports.default = _default;",null]}