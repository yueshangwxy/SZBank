{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet.vue","mtime":1655429879087},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"D:/code/DataAssetPlatform000/Pncui-Ind/node_modules/@babel/runtime/helpers/objectSpread2\"));\n\nvar _vuex = require(\"vuex\");\n\nvar _avatar = _interopRequireDefault(require(\"@eladmin/assets/images/avatar.png\"));\n\nvar _RoleSelect = _interopRequireDefault(require(\"@eladmin/components/RoleSelect\"));\n\nvar _ThemeSelect = _interopRequireDefault(require(\"@portal/components/ThemeSelect\"));\n\nvar _Logo = _interopRequireDefault(require(\"@portal/layout/components/Sidebar/Logo\"));\n\nvar _processDetails = _interopRequireDefault(require(\"./workSheet/processDetails.vue\"));\n\nvar _apiDetails = _interopRequireDefault(require(\"./workSheet/apiDetails.vue\"));\n\nvar _validator = require(\"@/utils/validator\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"myWorkSheet\",\n  components: {\n    RoleSelect: _RoleSelect.default,\n    ThemeSelect: _ThemeSelect.default,\n    Logo: _Logo.default,\n    ProcessDetails: _processDetails.default,\n    ApiDetails: _apiDetails.default\n  },\n  data: function data() {\n    return {\n      Avatar: _avatar.default,\n      logo: require(\"../../../../public/images/logo.png\"),\n      activeTab: \"\",\n      tabList: [{\n        name: \"asset\",\n        label: \"数据资产平台\"\n      }, {\n        name: \"service\",\n        label: \"数据服务平台\"\n      }, {\n        name: \"laboratory\",\n        label: \"数据查询平台\"\n      }],\n      // radio\n      radio: 0,\n      // name: '',\n      // dept: '',\n      apiAddress: \"\",\n      apiName: \"\",\n      status: \"\",\n      // date: '',\n      searchInput: \"\",\n      dept: \"\",\n      dateValue: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      // 部门树\n      deptTreeList: [],\n      // 表格\n      tableData: [],\n      propList: [],\n      // 分页\n      pageSize: 10,\n      total: 10,\n      currentPage: 1,\n      // 审批弹窗\n      approveDialog: false,\n      ruleForm: {\n        apprComment: \"\"\n      },\n      rules: {\n        apprComment: [{\n          required: true,\n          message: \"请输入审批意见\",\n          trigger: \"blur\"\n        }]\n      },\n      selectedRow: {},\n      // 应用服务关系\n      appServiceVis: false,\n      activeName: \"first\",\n      diaDataProp: [],\n      diaDataList: [],\n      curAppCode: \"\",\n      // 审批链路\n      linkVisible: false,\n      linkDataProp: [],\n      linkDataList: [],\n      // 流程详情弹窗\n      detailVis: false,\n      tableId: \"\",\n      // 服务审批\n      serviceApprove: false,\n      serviceForm: {\n        approveStatus: \"\"\n      },\n      serviceRules: {\n        approveStatus: [{\n          required: true,\n          message: \"请选择审批状态\",\n          trigger: \"change\"\n        }]\n      },\n      // api详情弹窗\n      apiDetailVis: false,\n      apiId: \"\",\n      //实验室详情弹窗\n      labDetailVis: false,\n      labDetail: {},\n      labApproveDialog: false,\n      // 数据资产平台  流程审批开关\n      processFlag: true,\n      labLinkVisible: false,\n      labLinkDataProp: []\n    };\n  },\n  watch: {\n    activeTab: function activeTab(val) {\n      if (val === \"asset\") {\n        this.propList = [{\n          prop: \"PROC_INST_ID\",\n          label: \"申请编号\"\n        }, {\n          prop: \"DEPT_NAME\",\n          label: \"申请部门\"\n        }, {\n          prop: \"CRT_USER\",\n          label: \"申请人\"\n        }, {\n          prop: \"TABLE_NAME\",\n          label: \"表英文名\"\n        }, {\n          prop: \"TABLE_COMMENT\",\n          label: \"表中文名\"\n        }, {\n          prop: \"EFF_BEGIN_TIME\",\n          label: \"权限开始日期\"\n        }, {\n          prop: \"EFF_END_TIME\",\n          type: \"endTime\",\n          label: \"权限结束日期\"\n        }, {\n          prop: \"CRT_DATE\",\n          label: \"申请时间\"\n        }, {\n          prop: \"STATUS_DESC\",\n          label: \"状态\",\n          type: \"tag\",\n          tagType: function tagType(row) {\n            return row.STATUS_DESC === \"已通过\" ? \"info\" : row.STATUS_DESC === \"草稿\" ? \"\" : row.STATUS_DESC === \"待审批\" ? \"warning\" : \"danger\";\n          },\n          render: function render(row) {\n            return row.STATUS_DESC;\n          }\n        }];\n        this.radio = 0;\n        this.reset();\n        this.initList();\n      } else if (val === \"service\") {\n        this.propList = [{\n          prop: \"indexName\",\n          label: \"api名称\"\n        }, {\n          prop: \"apiDescription\",\n          label: \"api描述\"\n        }, {\n          prop: \"applicantName\",\n          label: \"申请人\"\n        }, {\n          prop: \"dept\",\n          label: \"申请部门\"\n        }, {\n          prop: \"applyDate\",\n          label: \"申请时间\"\n        }, {\n          prop: \"status\",\n          label: \"状态\",\n          type: \"tag\",\n          tagType: function tagType(row) {\n            return row.status == 1 ? \"info\" : row.status == 2 ? \"warning\" : \"danger\";\n          },\n          render: function render(row) {\n            return row.status == 1 ? \"通过\" : row.status == 2 ? \"申请中\" : \"拒绝\";\n          }\n        }];\n        this.radio = 0;\n        this.reset();\n        this.initList();\n      } else if (val === \"laboratory\") {\n        this.propList = [{\n          prop: \"id\",\n          label: \"申请编号\"\n        }, {\n          prop: \"tableName\",\n          label: \"表或视名(包含项目)\"\n        }, {\n          prop: \"sqlTextShow\",\n          label: \"申请口径\"\n        }, {\n          prop: \"applyDescription\",\n          label: \"申请说明\"\n        }, {\n          prop: \"applyUserName\",\n          label: \"申请人\"\n        }, {\n          prop: \"applyDeptName\",\n          label: \"申请人部门\"\n        }, {\n          prop: \"applyTimeShow\",\n          label: \"申请时间\"\n        }, {\n          prop: \"applyStatus\",\n          label: \"申请状态\",\n          type: \"tag\",\n          tagType: function tagType(row) {\n            return row.applyStatus === \"03\" || row.applyStatus === \"05\" || row.applyStatus === \"06\" || row.applyStatus === \"07\" ? \"info\" : row.applyStatus === \"00\" ? \"warning\" : \"danger\";\n          },\n          render: function render(row) {\n            return row.applyStatus === \"03\" || row.applyStatus === \"05\" || row.applyStatus === \"06\" || row.applyStatus === \"07\" ? \"已通过\" : row.applyStatus === \"00\" ? \"待审批\" : \"已拒绝\";\n          }\n        }];\n        this.radio = 0;\n        this.reset();\n        this.initList();\n      }\n    },\n    radio: function radio(val) {\n      if (val == 0) {\n        this.reset();\n        this.initList();\n        console.log(\"我的申请\");\n      } else if (val == 1) {\n        this.reset();\n        this.initList();\n        console.log(\"待我审批\");\n      } else {\n        this.reset();\n        this.initList();\n        console.log(\"我已审批\");\n      }\n    },\n    dateValue: function dateValue(val) {\n      if (val) {\n        this.startTime = this.$formatDate(val[0]);\n        this.endTime = this.$formatDate(val[1]);\n      } else {\n        this.startTime = \"\";\n        this.endTime = \"\";\n      }\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    this.activeTab = \"asset\";\n    this.$api.getDeptTree({}).then(function (res) {\n      _this.deptTreeList = res.data;\n    });\n    /* 办理环节 0 运行 1 已处理，结束  2 退回 */\n\n    this.linkDataProp = [{\n      prop: \"status\",\n      label: \"办理环节\",\n      type: \"tag\",\n      align: \"center\",\n      tagType: function tagType(row) {\n        return row.status === \"1\" ? \"info\" : row.status === \"0\" ? \"warning\" : \"danger\";\n      },\n      render: function render(row) {\n        return row.status === \"1\" ? \"已处理，结束\" : row.status === \"0\" ? \"运行\" : \"退回\";\n      }\n    }, {\n      prop: \"assignee\",\n      label: \"办理人\",\n      align: \"center\"\n    }, {\n      prop: \"apprComment\",\n      label: \"办理意见\"\n    }, {\n      prop: \"duration\",\n      label: \"办理时效(工作日)\",\n      align: \"center\"\n    }, {\n      prop: \"updDateStr\",\n      label: \"更新时间\"\n    }];\n    this.labLinkDataProp = [{\n      prop: \"status\",\n      label: \"办理环节\",\n      type: \"tag\",\n      align: \"center\",\n      tagType: function tagType(row) {\n        return row.status === \"03\" || row.status === \"05\" || row.status === \"06\" || row.status === \"07\" ? \"info\" : row.status === \"00\" ? \"warning\" : \"danger\";\n      },\n      render: function render(row) {\n        return row.status === \"03\" || row.status === \"05\" || row.status === \"06\" || row.status === \"07\" ? \"已处理，结束\" : row.status === \"00\" ? \"运行\" : \"退回\";\n      }\n    }, {\n      prop: \"assignee\",\n      label: \"办理人\",\n      align: \"center\"\n    }, {\n      prop: \"apprComment\",\n      label: \"办理意见\"\n    }, {\n      prop: \"duration\",\n      label: \"办理时效\",\n      align: \"center\"\n    }, {\n      prop: \"updDateStr\",\n      label: \"更新时间\"\n    }];\n  },\n  computed: (0, _objectSpread2.default)((0, _objectSpread2.default)((0, _objectSpread2.default)({}, (0, _vuex.mapGetters)([\"sidebar\", \"device\", \"user\", \"baseApi\"])), (0, _vuex.mapState)({\n    showBreadcrumb: function showBreadcrumb(state) {\n      return state.settings.showBreadcrumb;\n    }\n  })), {}, {\n    showLogo: function showLogo() {\n      return this.$store.state.settings.sidebarLogo;\n    },\n    show: {\n      get: function get() {\n        return this.$store.state.settings.showSettings;\n      },\n      set: function set(val) {\n        this.$store.dispatch(\"settings/changeSetting\", {\n          key: \"showSettings\",\n          value: val\n        });\n      }\n    },\n    isSuperLogin: function isSuperLogin() {\n      return (0, _validator.isMiddleAdmin)() || (0, _validator.isSuperAdmin)();\n    },\n    isSuperLogin2: function isSuperLogin2() {\n      return (0, _validator.isSuperAdmin)();\n    }\n  }),\n  methods: {\n    // 正常时间\n    transEndTime: function transEndTime(time) {\n      if (time && time.includes(\"9999\")) {\n        return \"永久\";\n      } else {\n        return time;\n      }\n    },\n    // 退出登录提示\n    open: function open() {\n      var _this2 = this;\n\n      this.$confirm(\"确定注销并退出系统吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        _this2.logout();\n      });\n    },\n    // 退出登录\n    logout: function logout() {\n      this.$store.dispatch(\"LogOut\").then(function () {\n        location.reload();\n      });\n    },\n    // 重置\n    reset: function reset() {\n      this.searchInput = \"\";\n      this.dept = \"\";\n      this.apiAddress = \"\";\n      this.apiName = \"\";\n      this.status = \"\";\n      this.serviceStatus = \"\";\n      this.dateValue = \"\";\n    },\n    // 列表查询  -- 从第一页开始查  搜索按钮\n    initList: function initList() {\n      this.currentPage = 1;\n      this.queryList();\n    },\n    // 列表查询 -- 当前页\n    queryList: function queryList() {\n      if (this.activeTab === \"asset\") {\n        console.log(\"asset查询\");\n        this.queryProcessList();\n      } else if (this.activeTab === \"service\") {\n        console.log(\"service查询\");\n        this.queryServiceList();\n      } else if (this.activeTab === \"laboratory\") {\n        console.log(\"laboratory查询\");\n        this.queryLaboratoryList();\n      }\n    },\n    // 列表查询  数据资产平台  -- 流程\n    queryProcessList: function queryProcessList() {\n      var _this3 = this;\n\n      var request = {\n        page: String(this.currentPage),\n        size: String(this.pageSize),\n        deptCode: this.dept,\n        name: this.searchInput,\n        crtDateBeg: this.startTime,\n        crtDateEnd: this.endTime\n      };\n      console.log(request);\n\n      if (this.radio == 0) {\n        request.state = this.status;\n        this.$api.appliedProcess(request).then(function (res) {\n          console.log(res);\n          var data = res.data;\n          _this3.tableData = data.records;\n          _this3.total = data.total;\n        });\n      } else if (this.radio == 1) {\n        // 待我审批\n        this.$api.waitApprove(request).then(function (res) {\n          console.log(res);\n          var data = res.data;\n          _this3.tableData = data.records;\n          _this3.total = data.total;\n        });\n      } else if (this.radio == 2) {\n        // 我已审批\n        this.$api.alreadyApprove(request).then(function (res) {\n          console.log(res);\n          var data = res.data;\n          _this3.tableData = data.records;\n          _this3.total = data.total;\n        });\n      }\n    },\n    // 列表查询  数据服务平台\n    queryServiceList: function queryServiceList() {\n      var _this4 = this;\n\n      console.log(\"service\");\n      var request = {\n        page: this.currentPage,\n        size: this.pageSize,\n        interfaceAds: this.apiAddress,\n        indexName: this.apiName,\n        beginTime: this.startTime,\n        endTime: this.endTime,\n        status: this.serviceStatus\n      };\n      this.$api.qryServiceWorkSheet(request).then(function (res) {\n        console.log(res);\n        _this4.tableData = res.data.records;\n        _this4.total = res.data.total;\n      });\n    },\n    // 列表查询 \n    queryLaboratoryList: function queryLaboratoryList() {\n      var _this5 = this;\n\n      console.log(\"laboratory\");\n      var request = {\n        pageNum: this.currentPage,\n        pageSize: this.pageSize,\n        beginTime: this.startTime,\n        endTime: this.endTime,\n        queryState: this.status,\n        dataType: this.radio\n      };\n      this.$api.qryLabWorkSheet(request).then(function (res) {\n        console.log(res);\n        _this5.tableData = res.data.records;\n        _this5.total = res.data.total;\n      });\n    },\n    // 详情\n    viewDetails: function viewDetails(row) {\n      if (this.activeTab === \"asset\") {\n        this.tableId = row.BUSINESS_KEY;\n        this.detailVis = true;\n      } else if (this.activeTab === \"service\") {\n        this.apiId = row.apiId;\n        this.apiDetailVis = true;\n      } else if (this.activeTab === \"laboratory\") {\n        this.labDetail = row;\n        this.labDetailVis = true;\n      }\n    },\n    // 关闭详情\n    handleClose: function handleClose() {\n      this.detailVis = false;\n      this.apiDetailVis = false;\n      this.labDetailVis = false;\n    },\n    // 审批按钮\n    approveBtn: function approveBtn(row) {\n      var _this6 = this;\n\n      if (this.activeTab === \"laboratory\") this.labApproveDialog = true;else this.approveDialog = true;\n      this.selectedRow = row;\n      this.$nextTick(function () {\n        _this6.$refs[\"ruleForm\"].resetFields();\n      });\n    },\n    // 审批  -- 通过\n    pass: function pass(formName) {\n      var _this7 = this;\n\n      console.log(\"通过\", this.selectedRow.TASK_ID);\n      this.$refs[formName].validate(function (valid) {\n        if (valid && _this7.processFlag) {\n          _this7.processFlag = false;\n\n          _this7.$api.completeTask({\n            taskId: _this7.selectedRow.TASK_ID,\n            submitType: \"0\",\n            assignee: \"\",\n            apprComment: _this7.ruleForm.apprComment\n          }).then(function (res) {\n            if (res.code == 0 || res.code == 200) {\n              _this7.approveDialog = false;\n\n              _this7.$message.success(res.msg);\n\n              _this7.queryProcessList();\n            } else {\n              _this7.$message.error(res.msg);\n            }\n\n            _this7.processFlag = true;\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 审批  -- 拒绝\n    reject: function reject(formName) {\n      var _this8 = this;\n\n      console.log(\"拒绝\", this.selectedRow.TASK_ID);\n      this.$refs[formName].validate(function (valid) {\n        if (valid && _this8.processFlag) {\n          _this8.processFlag = false;\n\n          _this8.$api.completeTask({\n            taskId: _this8.selectedRow.TASK_ID,\n            submitType: \"1\",\n            assignee: \"\",\n            apprComment: _this8.ruleForm.apprComment\n          }).then(function (res) {\n            if (res.code == 0 || res.code == 200) {\n              _this8.approveDialog = false;\n\n              _this8.$message.success(res.msg);\n\n              _this8.queryProcessList();\n            } else {\n              _this8.$message.error(res.msg);\n            }\n\n            _this8.processFlag = true;\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 实验室审批  -- 通过\n    labPass: function labPass(formName) {\n      var _this9 = this;\n\n      console.log(\"通过\", this.selectedRow.id);\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this9.$api.labCompleteTask({\n            id: _this9.selectedRow.id,\n            applyState: \"03\",\n            approvalOpinion: _this9.ruleForm.apprComment\n          }).then(function (res) {\n            if (res.returnCode == 0 || res.returnCode == 200) {\n              _this9.labApproveDialog = false;\n\n              _this9.$message.success(res.returnMsg);\n\n              _this9.queryLaboratoryList();\n            } else {\n              _this9.$message.error(res.returnMsg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 实验室审批  -- 拒绝\n    labReject: function labReject(formName) {\n      var _this10 = this;\n\n      console.log(\"拒绝\", this.selectedRow.id);\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this10.$api.labCompleteTask({\n            id: _this10.selectedRow.id,\n            applyState: \"04\",\n            approvalOpinion: _this10.ruleForm.apprComment\n          }).then(function (res) {\n            if (res.returnCode == 0 || res.returnCode == 200) {\n              _this10.labApproveDialog = false;\n\n              _this10.$message.success(res.returnMsg);\n\n              _this10.queryLaboratoryList();\n            } else {\n              _this10.$message.error(res.returnMsg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 实验室审批链路\n    labApproveLink: function labApproveLink(row) {\n      var _this11 = this;\n\n      this.labLinkVisible = true;\n      this.$api.labApprovalLink({\n        id: row.id\n      }).then(function (res) {\n        //console.log(res, 233331111111111111111);\n        _this11.linkDataList = res.data;\n      });\n    },\n    // 审批链路\n    approveLink: function approveLink(row) {\n      var _this12 = this;\n\n      console.log(row.PROC_INST_ID);\n      this.linkVisible = true;\n      this.$api.approvalLink({\n        procInstId: row.PROC_INST_ID\n      }).then(function (res) {\n        console.log(res, 23333);\n        _this12.linkDataList = res.data;\n      });\n    },\n    // 服务平台  -- 审批\n    applyForApiAuth: function applyForApiAuth(row) {\n      var _this13 = this;\n\n      this.serviceApprove = true;\n      this.selectedRow = row;\n      this.$nextTick(function () {\n        _this13.$refs[\"serviceForm\"].resetFields();\n      });\n    },\n    // 服务平台审批确定\n    confirmApproval: function confirmApproval() {\n      var _this14 = this;\n\n      this.$refs[\"serviceForm\"].validate(function (valid) {\n        if (valid) {\n          _this14.$api.applyForApiAuth({\n            id: _this14.selectedRow.id,\n            status: _this14.serviceForm.approveStatus\n          }).then(function (res) {\n            if (res.code == 200 || res.code == 0) {\n              _this14.$message.success(res.msg);\n\n              _this14.queryList();\n\n              _this14.serviceApprove = false;\n            } else {\n              _this14.$message.error(res.msg);\n\n              _this14.serviceApprove = false;\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 应用服务关系\n    appService: function appService(row) {\n      var _this15 = this;\n\n      console.log(\"应用服务关系\");\n      this.diaDataProp = [{\n        prop: \"name\",\n        label: \"名称\",\n        align: \"center\"\n      }, {\n        prop: \"description\",\n        label: \"描述\",\n        align: \"center\"\n      }];\n      this.appServiceVis = true;\n      this.curAppCode = row.appCode;\n      this.$api.qryAppService({\n        appCode: this.curAppCode\n      }).then(function (res) {\n        console.log(res, 23333);\n        _this15.diaDataList = res.data;\n      });\n    },\n    // 弹窗tab\n    handleClick: function handleClick(tab, event) {\n      var _this16 = this;\n\n      console.log(tab.name);\n\n      if (tab.name === \"first\") {\n        this.$api.qryAppService({\n          appCode: this.curAppCode\n        }).then(function (res) {\n          _this16.diaDataList = res.data;\n        });\n      } else {\n        this.$api.qryAppAccessService({\n          appCode: this.curAppCode\n        }).then(function (res) {\n          _this16.diaDataList = res.data;\n        });\n      }\n    },\n    // 分页\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(val);\n      this.currentPage = val;\n      this.queryList();\n    }\n  }\n};\nexports.default = _default;",null]}