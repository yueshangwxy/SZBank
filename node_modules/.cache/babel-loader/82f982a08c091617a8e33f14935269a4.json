{"remainingRequest":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js!D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\dataLab\\sqlAnalysis\\sqlAnalysis.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\dataLab\\sqlAnalysis\\sqlAnalysis.vue","mtime":1652774979570},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _sqlAnalysis = require(\"@/api/dataLab/sqlAnalysis\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'SqlAnalysis',\n  data: function data() {\n    return {\n      // 树形控件\n      filterText: '',\n      defaultProps: {\n        id: 'id',\n        children: 'children',\n        label: 'tableName'\n      },\n      treeData: [],\n      // 文本域\n      textarea: '',\n      description: '',\n      // 表格\n      tableList: [],\n      propList: [],\n      // 分页\n      pageSize: 10,\n      currentPage: 1,\n      total: 0,\n      downLoadDialog: false,\n      descriptionDialog: false\n    };\n  },\n  watch: {\n    filterText: function filterText(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    (0, _sqlAnalysis.getTablesWithPermissions)().then(function (data) {\n      _this.treeData = data;\n    });\n    this.propList = [{\n      prop: 'column1',\n      label: 'column1',\n      align: 'center' // 当前列对齐方式  居中  默认为居左\n\n    }, {\n      prop: 'column2',\n      label: 'column2'\n    }, {\n      prop: 'column3',\n      label: 'column3'\n    }, {\n      prop: 'column4',\n      label: 'column4'\n    }, {\n      prop: 'column5',\n      label: 'column5'\n    }, {\n      prop: 'column6',\n      label: 'column6'\n    }];\n    this.tableList = [];\n  },\n  mounted: function mounted() {},\n  methods: {\n    // 节点过滤\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value.toString()) !== -1;\n    },\n    // 节点点击\n    handleNodeClick: function handleNodeClick(data) {\n      console.log(data);\n    },\n    executeSql: function executeSql() {\n      if (this.textarea == null || this.textarea == \"\") {\n        this.$message({\n          type: 'warning',\n          message: '请填写SQL!'\n        });\n      } else {\n        var param = {\n          \"sql\": this.textarea\n        };\n        this.getListBySQL(param);\n      }\n    },\n    dataDownLoad: function dataDownLoad() {\n      this.downLoadDialog = true;\n    },\n    downLoad: function downLoad(flag) {\n      var _this2 = this;\n\n      if (this.textarea == null || this.textarea == \"\") {\n        this.$message({\n          type: 'warning',\n          message: '请填写SQL!'\n        });\n      } else {\n        var param = {\n          \"flag\": flag,\n          \"sql\": this.textarea\n        };\n\n        if (flag == \"1\") {\n          this.descriptionDialog = true;\n        } else {\n          (0, _sqlAnalysis.downLoad)(param).then(function (data) {\n            if (data.code == '200') {\n              _this2.$message({\n                type: 'success',\n                message: data.msg\n              });\n\n              _this2.downLoadDialog = false;\n            } else {\n              _this2.$message({\n                type: 'error',\n                message: data.msg\n              });\n            }\n          });\n        }\n      }\n    },\n    downLoadSourceData: function downLoadSourceData() {\n      var _this3 = this;\n\n      var param = {\n        \"flag\": \"1\",\n        \"sql\": this.textarea,\n        \"description\": this.description\n      };\n      (0, _sqlAnalysis.downLoad)(param).then(function (data) {\n        console.log(JSON.stringify(data));\n\n        if (data.code == '200') {\n          _this3.$message({\n            type: 'success',\n            message: data.msg\n          });\n\n          _this3.downLoadDialog = false;\n          _this3.descriptionDialog = false;\n        } else {\n          _this3.$message({\n            type: 'error',\n            message: data.msg\n          });\n        }\n      });\n    },\n    closeDescriptionDialog: function closeDescriptionDialog() {\n      this.descriptionDialog = false;\n      this.description = \"\";\n    },\n    getListBySQL: function getListBySQL(param) {\n      var _this4 = this;\n\n      (0, _sqlAnalysis.getListBySQL)(param).then(function (data) {\n        if (data.code == \"200\") {\n          _this4.propList = data.head;\n          _this4.tableList = data.data;\n          _this4.total = _this4.tableList.length;\n        } else {\n          _this4.$message({\n            type: 'error',\n            message: data.msg\n          });\n        }\n      });\n    },\n    // 分页\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n    }\n  }\n};\nexports.default = _default;",null]}