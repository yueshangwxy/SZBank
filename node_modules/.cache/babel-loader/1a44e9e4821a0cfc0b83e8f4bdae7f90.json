{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\myService.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\myService.vue","mtime":1654824275286},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _validator = require(\"@/utils/validator\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"myService\",\n  data: function data() {\n    return {\n      name: \"\",\n      oppositePerson: \"\",\n      dept: \"\",\n      type: \"\",\n      serviceType: \"\",\n      // 表格\n      tableData: [],\n      propList: [],\n      // 分页\n      pageSize: 10,\n      currentPage: 1,\n      total: 10,\n      // 上下线确认弹窗\n      confirmDialog: false,\n      message: \"\",\n      // 当前操作id\n      currentOperation: {\n        online: 0,\n        id: \"\"\n      },\n      // 部门树\n      deptTree: []\n    };\n  },\n  // beforeRouteLeave(to, from, next) {\n  //   if (\n  //     to.name === \"editApi\" ||\n  //     to.name === \"apiDetail\" ||\n  //     to.name === \"docDetail\" ||\n  //     to.name === 'applyForApi' ||\n  //     to.name === 'applyForDoc' ||\n  //     to.name === \"editDoc\"\n  //   ) {\n  //     this.$store.commit(\"SET_KEEPALIVE\", true);\n  //   } else {\n  //     this.$store.commit(\"SET_KEEPALIVE\", false);\n  //   }\n  //   next();\n  // },\n  created: function created() {\n    var _this = this;\n\n    // this.$store.commit(\"SET_KEEPALIVE\", true);\n    this.propList = [{\n      prop: \"name\",\n      label: \"名称\"\n    }, {\n      prop: \"description\",\n      label: \"描述\"\n    }, {\n      prop: \"dept\",\n      label: \"所属部门\"\n    }, {\n      prop: \"belongUser\",\n      label: \"对接人\"\n    }, {\n      prop: \"serviceType\",\n      label: \"服务类型\",\n      type: \"service\",\n      render: function render(row) {\n        var label = row.serviceType === \"1\" ? \"API\" : \"文件\";\n        return label;\n      }\n    }, {\n      prop: \"status\",\n      label: \"状态\",\n      type: \"tag\",\n      tagType: function tagType(row) {\n        var type = \"\";\n\n        if (row.status === \"0\") {\n          type = \"info\";\n        } else if (row.status === \"1\") {\n          type = \"warning\";\n        } else if (row.status === \"2\") {\n          type = \"warning\";\n        } else if (row.status === \"3\") {\n          type = \"success\";\n        } else if (row.status === \"4\") {\n          type = \"danger\";\n        } else if (row.status === \"5\") {\n          type = \"warning\";\n        } else if (row.status === \"6\") {\n          type = \"warning\";\n        } else if (row.status === \"7\") {\n          type = \"warning\";\n        } else if (row.status === \"8\") {\n          type = \"\";\n        }\n\n        return type;\n      },\n      render: function render(row) {\n        var status = \"\";\n\n        if (row.status === \"0\") {\n          status = \"已下线\";\n        } else if (row.status === \"1\") {\n          status = \"草稿\";\n        } else if (row.status === \"2\") {\n          status = \"需求已提交\";\n        } else if (row.status === \"3\") {\n          status = \"需求已通过\";\n        } else if (row.status === \"4\") {\n          status = \"需求已驳回\";\n        } else if (row.status === \"5\") {\n          status = \"开发中\";\n        } else if (row.status === \"6\") {\n          status = \"测试中\";\n        } else if (row.status === \"7\") {\n          status = \"已完成待上线\";\n        } else if (row.status === \"8\") {\n          status = \"已上线\";\n        }\n\n        return status;\n      }\n    }, {\n      prop: \"crtUserCode\",\n      label: \"创建人\"\n    }, {\n      prop: \"createDate\",\n      label: \"创建时间\"\n    }];\n    this.$api.findDeptTree({}).then(function (res) {\n      _this.deptTree = res.data;\n    });\n  },\n  mounted: function mounted() {\n    this.queryList();\n  },\n  computed: {\n    isSuperLogin: function isSuperLogin() {\n      return (0, _validator.isMiddleAdmin)() || (0, _validator.isSuperAdmin)();\n    }\n  },\n  methods: {\n    isMiddleAdmin: function isMiddleAdmin() {\n      return (0, _validator.isMiddleAdmin)();\n    },\n    // 查询列表\n    queryList: function queryList() {\n      var _this2 = this;\n\n      var request = {\n        name: this.name,\n        // 名称\n        belongUser: this.oppositePerson,\n        // 对接人\n        dept: this.dept,\n        // 所属部门\n        serviceType: this.serviceType,\n        // 1API 2wenjian\n        crtUserCode: \"\",\n        // 创建人\n        page: this.currentPage,\n        size: this.pageSize\n      };\n      this.$api.qryServiceList(request).then(function (res) {\n        console.log(res);\n        _this2.tableData = res.data.records;\n        _this2.total = res.data.total;\n      });\n    },\n    // jumpApi\n    jumpApi: function jumpApi() {\n      this.$router.push({\n        path: \"/dataServicePlatform/applyForApi\"\n      });\n    },\n    // jumpDoc\n    jumpDoc: function jumpDoc() {\n      this.$router.push({\n        path: \"/dataServicePlatform/applyForDoc\"\n      });\n    },\n    // 查看\n    viewDetails: function viewDetails(row) {\n      if (row.serviceType === \"1\") {\n        this.$router.push({\n          path: \"/dataServicePlatform/apiDetail\",\n          query: {\n            id: row.id\n          }\n        });\n      } else if (row.serviceType === \"2\") {\n        this.$router.push({\n          path: \"/dataServicePlatform/docDetail\",\n          query: {\n            id: row.id\n          }\n        });\n      }\n    },\n\n    /**\r\n     * 普通用户只能在草稿状态下编辑\r\n     */\n    hasEditRole: function hasEditRole(row) {\n      if (!this.isSuperLogin && row.status !== \"1\") {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    // 编辑\n    edit: function edit(row) {\n      if (row.serviceType === \"1\") {\n        this.$router.push({\n          path: \"/dataServicePlatform/editApi\",\n          query: {\n            id: row.id\n          }\n        });\n      } else if (row.serviceType === \"2\") {\n        this.$router.push({\n          path: \"/dataServicePlatform/editDoc\",\n          query: {\n            id: row.id\n          }\n        });\n      }\n    },\n    // 上线\n    online: function online(row) {\n      console.log(row);\n      this.message = \"您要上线此条服务吗？\";\n      this.confirmDialog = true;\n      this.currentOperation = {\n        online: 0,\n        id: row.id\n      };\n    },\n    // 下线\n    offline: function offline(row) {\n      console.log(row);\n      this.message = \"您要下线此条服务吗？\";\n      this.confirmDialog = true;\n      this.currentOperation = {\n        online: 1,\n        id: row.id\n      };\n    },\n    // 确认上下线\n    confrim: function confrim() {\n      var _this3 = this;\n\n      this.confirmDialog = false;\n      console.log(this.currentOperation, \"上下线\"); // 调接口\n\n      if (this.currentOperation.online === 0) {\n        this.$api.serviceOnline({\n          id: this.currentOperation.id\n        }).then(function (res) {\n          console.log(res, \"上线\");\n\n          if (res.code == 0 || res.code == 200) {\n            _this3.$message.success(res.msg);\n\n            _this3.queryList();\n          } else {\n            _this3.$message.error(res.msg);\n          }\n        });\n      } else {\n        this.$api.serviceOffline({\n          id: this.currentOperation.id\n        }).then(function (res) {\n          console.log(res, \"下线\");\n\n          if (res.code == 0 || res.code == 200) {\n            _this3.$message.success(res.msg);\n\n            _this3.queryList();\n          } else {\n            _this3.$message.error(res.msg);\n          }\n        });\n      }\n    },\n    // 分页\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(\"\\u5F53\\u524D\\u9875: \".concat(val));\n      this.currentPage = val;\n      this.queryList();\n    }\n  }\n};\nexports.default = _default;",null]}