{"remainingRequest":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform\\Pncui-Indicator\\src\\views\\indicators\\indicator\\noticeQuery.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\src\\views\\indicators\\indicator\\noticeQuery.vue","mtime":1647917138769},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647917124586},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":1647917124178},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647917124586},{"path":"D:\\code\\DataAssetPlatform\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":1647917137429}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudSysNotice from '../../../api/indicators/notice'\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\nimport {quillEditor} from \"vue-quill-editor\";\nimport quillConfig from \"../../../api/indicators/quill-config\";\nimport $ from 'jquery';\n// crud交由presenter持有\nconst defaultCrud = CRUD({ title: '公告管理', url: crudSysNotice.url, sort: 'sortNo', crudMethod: { ...crudSysNotice.crud }})\nconst defaultForm = { id: null, title: null, content:null, effectDateFrom: null,  effectDateTo: null, sortNo: 1, crtUserCode:null, crtDate:null }\n\n\nexport default {\n    name: 'noticeQuery',\n    components: { pagination, crudOperation, rrOperation, udOperation,quillEditor },\n    mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n\n    data() {\n        const checkDateFrom = (rule, value, cb) => {\n            if(this.form.effectDateFrom == null || this.form.effectDateTo == null){\n                return cb();\n            }\n            this.$refs['form'].clearValidate(['effectDateTo']);\n            if(this.form.effectDateFrom > this.form.effectDateTo){\n                return cb(\"开始日期要小于结束日期\");\n            }\n            return cb();\n        };\n        const checkDateTo = (rule, value, cb) => {\n            if(this.form.effectDateFrom == null || this.form.effectDateTo == null){\n                return cb();\n            }\n            this.$refs['form'].clearValidate(['effectDateFrom']);\n            if(this.form.effectDateFrom > this.form.effectDateTo){\n                return cb(\"结束日期要大于开始日期\");\n            }\n            return cb();\n        };\n      return {\n        contentQuillOption: {\n          placeholder: \"请输入公告内容\",\n          theme: 'snow',\n          modules: {\n            toolbar: false // 禁用工具栏\n          }\n        },\n        titleQuillOption: {\n          placeholder: \"请输入公告标题\",\n          theme: 'snow',\n          modules: {\n            toolbar: false // 禁用工具栏\n          }\n        },\n            permission: {\n                /*add: ['admin', 'sysNotice:add'],\n                edit: ['admin', 'sysNotice:edit'],\n                del: ['admin', 'sysNotice:del']*/\n            },\n\n            rules: {\n                title: [\n                    { required: true, message: '标题不能为空', trigger: 'blur' }\n                ],\n                content: [\n                    { required: true, message: '内容不能为空', trigger: 'blur' }\n                ],\n                effectDateFrom: [\n                    { required: true, message: '开始日期不能为空', trigger: 'blur' },\n                    { validator: checkDateFrom, trigger: 'blur'}\n                ],\n                effectDateTo: [\n                    { required: true, message: '结束日期不能为空', trigger: 'blur' },\n                    { validator: checkDateTo, trigger: 'blur'}\n                ]\n            }\n        }\n    },\n  created() {\n      this.resetQuery()\n  },\n    methods: {\n      resetQuery(){\n        this.crud.resetQuery(false);\n        this.crud.refresh()\n      },\n        // 获取数据前设置好接口地址\n        [CRUD.HOOK.beforeRefresh]() {\n            return true\n        }\n    }\n}\n",null]}