{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\eladmin-system\\src\\views\\system\\job\\module\\form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\eladmin-system\\src\\views\\system\\job\\module\\form.vue","mtime":1650418877004},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport CRUD, { form } from '@crud/crud'\r\nimport { getDepts } from '../../../../api/system/dept'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\nconst defaultForm = {\r\n  id: null,\r\n  name: '',\r\n  sort: 999,\r\n  enabled: true,\r\n  dept: {\r\n    id: 1\r\n  }\r\n}\r\nexport default {\r\n  components: { Treeselect },\r\n  mixins: [form(defaultForm)],\r\n  props: {\r\n    jobStatus: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      depts: [],\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入名称', trigger: 'blur' }\r\n        ],\r\n        sort: [\r\n          { required: true, message: '请输入序号', trigger: 'blur', type: 'number' }\r\n        ],\r\n        dept: { required: true, message: '所属部门不能为空', trigger: 'select' }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    [CRUD.HOOK.beforeToCU]() {\r\n      getDepts({ enabled: true }).then(res => {\r\n        this.depts = res.content\r\n      })\r\n    },\r\n    // 提交前的验证\r\n    [CRUD.HOOK.afterValidateCU]() {\r\n      if (!this.form.dept.id) {\r\n        this.$notify({\r\n          title: '所属部门不能为空',\r\n          type: 'warning'\r\n        })\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n  }\r\n}\r\n",null]}