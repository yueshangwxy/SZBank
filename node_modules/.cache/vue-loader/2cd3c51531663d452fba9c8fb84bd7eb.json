{"remainingRequest":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tablePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tablePage.vue","mtime":1650772058565},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650772030306},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650772056629}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nimport {getTree} from '../../../api/searchPage/assetsClassify'\r\nimport {getListByKeywords,getDetail,getListByClassify} from '../../../api/searchPage/es'\r\nimport {startApplication} from '../../../api/searchPage/permissionApplication'\r\nimport {getListByName} from '../../../api/searchPage/assetsTablePreview'\r\nimport {getDetailByName} from '../../../api/searchPage/assetsClassification'\r\n\r\n    export default {\r\n        name: 'TablePage',\r\n        props: {\r\n            testData: {\r\n                type: Array\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                activeAuth: 'all',\r\n                // 树形控件\r\n                filterText: '',\r\n                defaultProps: {\r\n                    id:'id',\r\n                    children: 'children',\r\n                    label: 'name'\r\n                },\r\n                treeData: [],\r\n                treeDataAll: [],\r\n                treeDataAuth: [],\r\n                // 筛选\r\n                /* filterForm: {\r\n                    input1: '',\r\n                    input2: '',\r\n                    input3: '',\r\n                    input4: '',\r\n                    input5: '',\r\n                }, */\r\n                // 表格\r\n                tableList: [],\r\n                tableListAll: [],\r\n                tableListAuth: [],\r\n                // 分页\r\n                pageSize: 10,\r\n                currentPage: 1,\r\n                total: 50,\r\n                // 数据预览弹窗\r\n                dataPreVis: false,\r\n                preDataList: [],\r\n                preDataProp: [],\r\n                // 详情查看\r\n                detailsShow: false,\r\n                detailType: 'fieldInfo',\r\n                infoOptions: [],\r\n                infoVal: '',\r\n                fieldInfoDataList: [],\r\n                fieldInfoDataProp: [],\r\n                // 申请权限\r\n                applyVis: false,\r\n                applyItem:[],\r\n                effectTime: '临时生效',\r\n                startDate: '',\r\n                endDate: '',\r\n\r\n                nodeData:[],\r\n\r\n            }\r\n        },\r\n        watch: {\r\n            testData(val){\r\n                console.log(val);\r\n                this.tableList = val\r\n            },\r\n            filterText(val) {\r\n                this.$refs.tree.filter(val);\r\n            },\r\n            activeAuth(val) {\r\n                if(val==='all') {\r\n                    this.treeData = this.treeDataAll\r\n                    this.tableList = this.tableListAll\r\n                }else {\r\n                    this.treeData = this.treeDataAuth\r\n                    this.tableList = this.tableListAuth\r\n                }\r\n            },\r\n        },\r\n        created() {\r\n            // 树形控件数据\r\n            getTree(\"table\").then(data =>{\r\n                this.treeData = data\r\n                this.treeDataAll = data\r\n            })\r\n            getAuthTree().then(data =>{\r\n                this.treeDataAuth = data\r\n            })\r\n\r\n            // 数据预览\r\n            this.preDataProp = [\r\n                {\r\n                    prop: 'dataInfo',\r\n                    label: '数据信息',\r\n                    // sortable: true\r\n                    // width: '100px',\r\n                }/*,\r\n                {\r\n                    prop: 'nickName',\r\n                    label: '昵称',\r\n                    // width: '100px',\r\n                }*/\r\n            ]\r\n\r\n            // 详情查看  --字段信息\r\n            this.fieldInfoDataProp = [\r\n                {\r\n                    prop: 'field',\r\n                    label: '字段名称',\r\n                    // sortable: true\r\n                    // width: '100px',\r\n                },\r\n                {\r\n                    prop: 'types',\r\n                    label: '字段类型',\r\n                    // width: '100px',\r\n                },\r\n/*                {\r\n                    prop: 'phone',\r\n                    label: '字段长度',\r\n                    // width: '100px',\r\n                },*/\r\n\r\n            ]\r\n\r\n        },\r\n        mounted() {\r\n            const param ={\r\n                \"keywords\":'',\r\n                \"page\":this.currentPage,\r\n                \"size\":this.pageSize,\r\n                \"assetType\":'table'\r\n            }\r\n            this.getListByKeywords(param);\r\n\r\n        },\r\n        methods: {\r\n            getListByKeywords(param){\r\n                getListByKeywords(param).then(data =>{\r\n                    console.log(333);\r\n                    // this.total = data.count.table\r\n                    this.tableList = data.obj\r\n                    this.tableListAll = data.obj\r\n                    this.tableListAuth = data.obj\r\n                })\r\n            },\r\n            handleClick(tab, event) {\r\n\r\n            },\r\n            // 节点过滤\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.name.indexOf(value.toString()) !== -1;\r\n            },\r\n            // 节点点击\r\n            handleNodeClick(data) {\r\n                this.$emit('changeLevel',data)\r\n                this.nodeData = data\r\n                console.log(data);\r\n                const param ={\r\n                    \"page\":this.currentPage,\r\n                    \"size\":this.pageSize,\r\n                    \"assetType\":'table',\r\n                    \"obj\":data\r\n                }\r\n                getListByClassify(param).then(data =>{\r\n                    this.total = data.count.table\r\n                    this.tableList = data.obj\r\n                    this.tableListAll = data.obj\r\n                    this.tableListAuth = data.obj\r\n                })\r\n            },\r\n            // 我的购物车\r\n            jumpUrl() {\r\n                this.$router.push({\r\n                    path: '/myShopCar/index',\r\n                })\r\n            },\r\n            // 重置 \r\n            /* reset() {\r\n                this.filterForm = {}\r\n                this.nodeData=[]\r\n                this.currentPage = 1\r\n                this.pageSize = 10\r\n                const param ={\r\n                    \"keywords\":'',\r\n                    \"page\":1,\r\n                    \"size\":10,\r\n                    \"assetType\":'table'\r\n                }\r\n                this.getListByKeywords(param);\r\n            }, */\r\n            // 搜索\r\n            /* doSubmit(){\r\n                this.nodeData=[]\r\n                const  param ={\r\n                    \"keywords\":'',\r\n                    \"page\":this.currentPage,\r\n                    \"size\":this.pageSize,\r\n                    \"assetType\":'table',\r\n                    \"searchList\" :this.filterForm\r\n                }\r\n                this.getListByKeywords(param)\r\n\r\n            }, */\r\n            // 按钮   --- 数据预览\r\n            dataPre(name) {\r\n                name = \"ind_atom_info\"\r\n                getListByName(name).then(data =>{\r\n                    if(data.code == '200'){\r\n                        this.preDataList = data.data\r\n                        console.log(\"---------------\"+JSON.stringify(this.preDataList))\r\n                        this.dataPreVis = true\r\n                    }else {\r\n                        this.$message({\r\n                            message: data.msg,\r\n                            type: 'warning'\r\n                        });\r\n                    }\r\n                })\r\n\r\n            },\r\n            goApply(){\r\n                let assetId = this.applyItem.assetId;\r\n                const param ={\r\n                    \"assetId\":assetId,\r\n                    \"beginTime\":this.startDate,\r\n                    \"endTime\":this.endDate\r\n                }\r\n                console.log(this.applyItem.assetId+\"---------\"+this.startDate+\"-----------\"+this.endDate)\r\n                startApplication(param).then(data =>{\r\n                    console.log(data)\r\n                    if(data.code == '0'){\r\n                        this.$message({\r\n                            message: '操作成功',\r\n                            type: 'success'\r\n                        });\r\n                        this.applyVis = false\r\n\r\n                    }\r\n                })\r\n            },\r\n            goPrepare(){\r\n                let assetId = this.applyItem.assetId;\r\n                const param ={\r\n                    \"assetId\":assetId,\r\n                    \"beginTime\":this.startDate,\r\n                    \"endTime\":this.endDate\r\n                }\r\n                console.log(this.applyItem.assetId+\"---------\"+this.startDate+\"-----------\"+this.endDate)\r\n                startApplication(param).then(data =>{\r\n                    console.log(data)\r\n                    if(data.code == '0'){\r\n                        this.$message({\r\n                            message: '操作成功',\r\n                            type: 'success'\r\n                        });\r\n                        this.applyVis = false\r\n\r\n                    }\r\n                })\r\n            },\r\n            // 按钮   --- 详情查看\r\n            detailView(item) {\r\n\r\n                const param ={\r\n                    \"assetType\":'table',\r\n                    \"item\":item\r\n                }\r\n                getDetailByName(param).then(data =>{\r\n                    if(data.code == '200'){\r\n                        this.fieldInfoDataList =data.data\r\n                        this.detailsShow = true\r\n                    }else {\r\n                        this.$message({\r\n                            message: data.msg,\r\n                            type: 'warning'\r\n                        });\r\n                    }\r\n                })\r\n            },\r\n            // 详情查看 tab\r\n            handleDetailClick(tab,event) {\r\n\r\n            },\r\n            // 按钮   --- 申请权限\r\n            applyAuthority(item) {\r\n                this.applyVis = true\r\n                this.applyItem = item;\r\n            },\r\n\r\n            // 分页\r\n            handleSizeChange(val) {\r\n                console.log(`每页 ${val} 条`);\r\n                this.pageSize = val;\r\n                this.currentPage =1\r\n                this.filterForm = {}\r\n                if(this.nodeData !==undefined &&  Object.keys(this.nodeData).length > 0){\r\n                    const param ={\r\n                        \"page\":this.currentPage,\r\n                        \"size\":this.pageSize,\r\n                        \"assetType\":'table',\r\n                        \"obj\":this.nodeData\r\n                    }\r\n                    getListByClassify(param).then(data =>{\r\n                        this.total = data.count.table\r\n                        this.tableList = data.obj\r\n                        this.tableListAll = data.obj\r\n                        this.tableListAuth = data.obj\r\n                    })\r\n                }else {\r\n\r\n                    const param = {\r\n                        \"keywords\": '',\r\n                        \"page\": this.currentPage,\r\n                        \"size\": this.pageSize,\r\n                        \"assetType\": 'table'\r\n                    }\r\n                    this.getListByKeywords(param);\r\n                }\r\n            },\r\n            handleCurrentChange(val) {\r\n                console.log(`当前页: ${val}`);\r\n                this.currentPage = val\r\n                if(this.nodeData !==undefined && Object.keys(this.nodeData).length > 0){\r\n                    const param ={\r\n                        \"page\":this.currentPage,\r\n                        \"size\":this.pageSize,\r\n                        \"assetType\":'table',\r\n                        \"obj\":this.nodeData\r\n                    }\r\n                    getListByClassify(param).then(data =>{\r\n                        this.total = data.count.table\r\n                        this.tableList = data.obj\r\n                        this.tableListAll = data.obj\r\n                        this.tableListAuth = data.obj\r\n                    })\r\n                }else {\r\n\r\n                    const param = {\r\n                        \"keywords\": '',\r\n                        \"page\": this.currentPage,\r\n                        \"size\": this.pageSize,\r\n                        \"assetType\": 'table'\r\n                    }\r\n                    this.getListByKeywords(param);\r\n                }\r\n            }\r\n        },\r\n    }\r\n",null]}