{"remainingRequest":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\basicDataMnt\\classify.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\basicDataMnt\\classify.vue","mtime":1654824275274},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: 'Classify',\r\n  data() {\r\n    return {\r\n      fileList: [],\r\n      tipDialog: false,\r\n      dataList: [],\r\n      propList: [\r\n        {\r\n          prop: 'field',\r\n          label: 'field',\r\n          align: 'center',\r\n        },\r\n        {\r\n          prop: 'row',\r\n          label: 'row',\r\n          align: 'center',\r\n        },\r\n      ],\r\n      title: '',\r\n    }\r\n  },\r\n  methods: {\r\n    // 移出前\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`)\r\n    },\r\n    // 移除附件\r\n    upLoadRemove(file, fileList) {\r\n      let tempFileList = []\r\n      for (var index = 0; index < this.fileList.length; index++) {\r\n        if (this.fileList[index].name !== file.name) {\r\n          tempFileList.push(this.fileList[index])\r\n        }\r\n      }\r\n      this.fileList = tempFileList\r\n    },\r\n    \r\n    // 监控上传文件列表\r\n    uploadChange(file, fileList) {\r\n      let testmsg = file.name.substring(file.name.lastIndexOf('.') + 1)\r\n      if (testmsg !== 'xls' && testmsg !== 'xlsx') {\r\n          this.$refs.upload.clearFiles()\r\n          this.$message({\r\n              message: '上传文件只能是 .xls、.xlsx格式!',\r\n              type: 'warning'\r\n          })\r\n          return false\r\n      } else {\r\n        this.fileList = fileList;\r\n  \r\n        let formData = new FormData()\r\n        this.fileList.forEach(item => {\r\n          formData.append('file', item.raw)\r\n        })\r\n        this.$api.importCcn(formData).then((res) => {\r\n          if(res.success==='true') {\r\n            this.$message.success(res.message)\r\n            this.fileList = [];\r\n          } else {\r\n            this.tipDialog = true;\r\n            this.dataList = res.result;\r\n            this.title = res.message;\r\n            this.fileList = [];\r\n          }\r\n        }).catch(err=> {\r\n          this.fileList = [];\r\n        })\r\n      }\r\n    },\r\n    linefeed(h, { column, $index }) {\r\n      let realWidth = 0;\r\n      let span = document.createElement(\"span\");\r\n      span.innerText = column.label;\r\n      if(!column.label) {\r\n        document.body.appendChild(span);\r\n        realWidth = 100;\r\n        column.minWidth = realWidth; // 可能还有边距/边框等值，需要根据实际情况加上\r\n        document.body.removeChild(span);\r\n        return h(\"span\", column.label);\r\n      }else {\r\n        document.body.appendChild(span);\r\n        realWidth = span.getBoundingClientRect().width + 30;\r\n        column.minWidth = realWidth; // 可能还有边距/边框等值，需要根据实际情况加上\r\n        document.body.removeChild(span);\r\n        return h(\"span\", column.label);\r\n      }\r\n    },\r\n  }\r\n}\r\n",null]}