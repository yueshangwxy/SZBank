{"remainingRequest":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\parameter\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\parameter\\index.vue","mtime":1644369310613},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport crudIndParameter from '../../../api/indicators/indParameter'\r\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\r\nimport rrOperation from '@crud/RR.operation'\r\nimport crudOperation from '@crud/CRUD.operation'\r\nimport udOperation from '@crud/UD.operation'\r\nimport pagination from '@crud/Pagination'\r\nimport category from '../category/category'\r\n\r\n// crud交由presenter持有\r\nconst defaultCrud = CRUD({ title: '参数', url: crudIndParameter.url, sort: 'id,desc', crudMethod: { ...crudIndParameter.method }})\r\nconst defaultForm = { id: null, categoryId: null, parmCode: null, parmName: null, parmType: null, parmValue: null, parmDesc: null, status: '1', crtUserCode: null, crtOrgCode: null, crtDate: null, updUserCode: null, updOrgCode: null, updDate: null }\r\nconst moment = require('moment')\r\nexport default {\r\n  name: 'IndParameter',\r\n  components: { pagination, crudOperation, rrOperation, udOperation, category },\r\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\r\n  dicts: ['STATUS', 'PARM_TYPE'],\r\n  data() {\r\n    return {\r\n      table: {\r\n        columns: {\r\n          id: 'hidden'\r\n        }\r\n      },\r\n      permission: {\r\n        add: ['admin', 'indParameter:add'],\r\n        edit: ['admin', 'indParameter:edit'],\r\n        del: ['admin', 'indParameter:del']\r\n      },\r\n      rules: {\r\n        parmName: [\r\n          { required: true, message: '参数名称不能为空', trigger: 'blur' }\r\n        ],\r\n        parmType: [\r\n          { required: true, message: '参数值类型不能为空', trigger: 'blur' }\r\n        ],\r\n        parmValue: [\r\n          { required: true, message: '参数值不能为空', trigger: 'blur' }\r\n        ],\r\n        status: [\r\n          { required: true, message: '状态不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n      }\r\n  },\r\n  methods: {\r\n    // 获取数据前设置好接口地址\r\n    [CRUD.HOOK.beforeRefresh]() {\r\n      return true\r\n    },\r\n    [CRUD.HOOK.beforeToAdd]() {\r\n      if (!this.form.categoryId) {\r\n        this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR)\r\n        return false\r\n      }\r\n      if (this.form.categoryId == '0') {\r\n        this.crud.notify('根节点不能添加', CRUD.NOTIFICATION_TYPE.ERROR)\r\n        return false\r\n      }\r\n    },\r\n    [CRUD.HOOK.beforeSubmit]() {\r\n      if (this.form.parmType === 'Number') {\r\n        const num = this.form.parmValue\r\n        if ((num.indexOf(' ') !== -1) || isNaN(num)) {\r\n          this.$message.error({\r\n            message: '参数值格式不正确,请输入数字'\r\n          })\r\n          return false\r\n        }\r\n      }\r\n    },\r\n    handleCategoryClick(data) {\r\n      // console.log(\"========handleCategoryClick====>\",data)\r\n      this.crud.form.categoryId = data.id\r\n      this.crud.query.categoryIds = data.childrenIds\r\n      this.form.categoryId = data.id\r\n      this.crud.refresh()\r\n    },\r\n    dateFormat(row) {\r\n        // return moment(row.crtDate).format('YYYY-MM-DD');\r\n        return moment(row.crtDate).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n}\r\n",null]}