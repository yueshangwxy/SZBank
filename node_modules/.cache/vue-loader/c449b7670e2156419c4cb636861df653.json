{"remainingRequest":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\selectAtom.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\atom\\selectAtom.vue","mtime":1646633727696},{"path":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport crudIndAtomInfo, {\r\n  getGenAndDerivedInd,\r\n  getGenInd,\r\n  getTablesById, bizNameIsContract, abolish,delAtom,checkRef,addIndToSelfCategory\r\n} from '@/api/indicators/indAtomInfo'\r\nimport  {getDimInfos} from '@/api/indicators/indDimInfo'\r\nimport {getDimValues, getDimValuesChildren} from '@/api/indicators/indDimValue'\r\nimport {process} from '@/api/indicators/indIndicatorInfo'\r\nimport CRUD, {crud, form, header, presenter} from '@crud/crud'\r\nimport rrOperation from '@crud/RR.operation'\r\nimport crudOperation from '@crud/CRUD.operation'\r\nimport udOperation from '@crud/UD.operation'\r\nimport pagination from '@crud/Pagination'\r\nimport category from '../../category/category'\r\nimport dimensionPage from '../atom/dimension/index'\r\nimport atomPage from './atomPage'\r\nimport {isSignedInteger, validateStrLenFiveHundred, validateStrLenHundred} from '@/utils/validator'\r\nimport {getClassifications} from '@/api/indicators/indClassification'\r\nimport crudIndCategory from '@/api/indicators/indCategory'\r\nimport { getDepts } from '@/utils/system'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\n// crud交由presenter持有\r\nconst defaultCrud = CRUD({\r\n  title: '指标信息',\r\n  url: crudIndAtomInfo.url,\r\n  sort: 'id,desc',\r\n  crudMethod: { ...crudIndAtomInfo.crud }\r\n})\r\nconst defaultForm = {\r\n  id: null,\r\n  categoryId: null,\r\n  sourceDataSource: 'local',\r\n  targetDataSource: 'local',\r\n  bizCode: null,\r\n  bizName: null,\r\n  genBizName: null,// 根指标名称\r\n  indFirstType: null,// 指标一级分类\r\n  indSecondType: null,// 指标二级分类\r\n  businessDept: null,// 业务属主部门\r\n  indLevel: null, // 指标层级\r\n  isDeptQuery: true,// 是否部门内部都可查询指标结果\r\n  isAdditionalRecording: false,// 指标结果是否会补录\r\n  indDimAndValueRelations: [],\r\n  indDefinition: null,// 指标定义\r\n  indDefRule: null,// 指标口径规则\r\n  indValueRange1: null,// 指标取值范围1\r\n  indValueRange2: null,// 指标取值范围2\r\n  indInnerWarnValue: '',// 指标内部警戒值（表示预警）\r\n  indInnerWarnPassValue: '',// 指标内部警戒值（表示通过）\r\n  indInnerWarnFlg: '',\r\n  indMonWarnValue: '',// 指标监管警戒值（表示预警）\r\n  indMonWarnPassValue: '',// 指标监管警戒值（表示通过）\r\n  indMonWarnFlg: '',\r\n  currency: null,// 币种\r\n  indValueType: null,// 指标数值属性\r\n  indFrequency: [],// 指标生成频率\r\n  indCalType: null,// 度量单位\r\n  indSafeLevel: null,// 指标安全等级\r\n  indMonField: null,// 监管属性\r\n  indProcessSys: null,// 权威加工系统\r\n  indDataType: null,// 数据类型\r\n  indDataForm: null,// 数据格式\r\n  indReference: null,// 参考依据\r\n  isRealTimeProcess: false,// 是否需要实时加工\r\n  indCurrentValue: true,// 当期值\r\n  indContemporaneousValue: true,// 同期值\r\n  indYearOnYearIncrement: true,// 同比增量\r\n  indYearOnYearGrowth: true,// 同比增幅\r\n  indPreviousPeriodValue: true,// 上期值\r\n  indMonthOnMonthIncrement: true,// 环比增量\r\n  indMonthOnMonthGrowth: true,// 环比增幅\r\n  indInitialValueOfTheYear: true,// 年初值\r\n  indYearOnYearIncre: true,// 较年初增量\r\n  indIncreaseOverTheBeginningOfTheYear: true,// 较年初增幅\r\n  indVerifyStatus: null,// 指标审批状态\r\n  indDeployStatus: null,// 指标发布状态\r\n  indVerifyId: null,\r\n  indStandSource: null,// 标准来源\r\n  ieProp: null,\r\n  createTable: null,\r\n  keepHistory: '1',\r\n  bizTabCode: null,\r\n  bizFlag: null,\r\n  bizCalcSql: null,// 实时指标取数SQL\r\n  bizBatchCalcSql: null,// 批量指标取数SQL\r\n  dimNames: null,\r\n  bizDesc: null,\r\n  calcSeq: null,\r\n  calcFreq: null,\r\n  crtUserCode: null,\r\n  crtOrgCode: null,\r\n  crtDate: null,\r\n  updUserCode: null,\r\n  updOrgCode: null,\r\n  updDate: null,\r\n  tenant: null,\r\n  retention: null,\r\n  tableShare: '1',\r\n  status: '2',\r\n  categoryType: '0',\r\n  atomDimensions: [],\r\n  indDefRuleStr: '',\r\n  indDefRuleVal: '',\r\n  submitType: 1\r\n}\r\nexport default {\r\n  name: 'SelectAtom',\r\n  components: {Treeselect,pagination, crudOperation, rrOperation, udOperation, category, dimensionPage, atomPage },\r\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\r\n  dicts: ['IE_PROP', 'CREATE_TABLE', 'YN', 'RETENTION', 'IE_STATUS', 'GEN_IND', 'IND_FIRST_TYPE', 'IND_SECOND_TYPE', 'BUSSINESS_DEPT',\r\n    'IND_LEVEL', 'IND_CURRENCY', 'IND_VALUE_TYPE', 'IE_FREQUENCY', 'IND_CAL_TYPE', 'IND_SAFE_LEVEL', 'IND_MON_FIELD', 'IND_PROCESS_SYS',\r\n    'IND_DATA_TYPE', 'IND_STAND_SOURCE', 'DIMENSION_CATEGORY', 'DIMENSION', 'LAST_LEVEL_DIMENSION_VALUE','IND_VERIFY_STATUS','IND_DEPLOY_STATUS'],\r\n  data() {\r\n    return {\r\n      title: '添加指标到自定义分类',\r\n      myCategoryId: null,\r\n      dimAndValueObject1: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject2: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject3: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject4: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject5: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject6: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject7: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject8: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject9: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      dimAndValueObject10: {\r\n        isShow: false,\r\n        dimension: null,\r\n        dimensionValue: null,\r\n        dimensionName: null\r\n      },\r\n      errmsgInnerWarning: false,\r\n      errmsgMonWarning: false,\r\n      table: {\r\n        columns: {\r\n          sourceDataSource: 'hidden',\r\n          targetDataSource: 'hidden',\r\n          keepHistory: 'hidden',\r\n          bizDesc: 'hidden',\r\n          crtOrgCode: 'hidden',\r\n          crtDate: 'hidden',\r\n          updUserCode: 'hidden',\r\n          updOrgCode: 'hidden',\r\n          updDate: 'hidden',\r\n          tenant: 'hidden'\r\n        }\r\n      },\r\n      permission: {\r\n        processA: ['indAtomInfo:processA'],\r\n        add: ['indAtomInfo:add'],\r\n        edit: ['indAtomInfo:edit'],\r\n        del: ['indAtomInfo:del'],\r\n        details: ['indAtomInfo:details'],\r\n        workflow: ['indAtomInfo:workflow'],\r\n        batchCheckResult: ['indAtomInfo:batchCheckResult'],\r\n        historyVersion: ['indAtomInfo:historyVersion'],\r\n        cancelInd: ['indAtomInfo:cancelInd'],\r\n        processVerify: ['indAtomInfo:processVerify'],\r\n        historyVersionDetail: ['indAtomInfo:historyVersionDetail']\r\n      },\r\n      rules: {\r\n        bizName: [\r\n          { required: true, message: '指标名称不能为空', trigger: 'blur' },\r\n          { validator: validateStrLenHundred, trigger: 'blur' }\r\n        ],\r\n        ieProp: [\r\n          { required: true, message: '指标类型不能为空', trigger: 'change' }\r\n        ],\r\n        genBizName: [\r\n          { required: true, message: '根指标不能为空', trigger: 'change' }\r\n        ],\r\n        indFirstType: [\r\n          { required: true, message: '指标一级分类不能为空', trigger: 'change' }\r\n        ],\r\n        indSecondType: [\r\n          { required: true, message: '指标二级分类不能为空', trigger: 'change' }\r\n        ],\r\n        businessDept: [\r\n          { required: true, message: '业务属主部门不能为空', trigger: 'change' }\r\n        ],\r\n        indLevel: [\r\n          { required: true, message: '指标层级不能为空', trigger: 'change' }\r\n        ],\r\n        indDefinition: [\r\n          { required: true, message: '指标定义不能为空', trigger: 'blur' },\r\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\r\n        ],\r\n        indDefRule: [\r\n         /* { required: this.hasCalc, message: '指标口径规则不能为空', trigger: 'blur' },*/\r\n          { required: true, message: '指标口径规则不能为空', trigger: 'blur' },\r\n          { validator: validateStrLenFiveHundred, trigger: 'blur' }\r\n        ],\r\n        indValueRange1: [\r\n          { validator: isSignedInteger, trigger: 'blur' }\r\n        ],\r\n        indValueRange2: [\r\n          { validator: isSignedInteger, trigger: 'blur' }\r\n        ],\r\n        currency: [\r\n          { required: true, message: '币种不能为空', trigger: 'change' }\r\n        ],\r\n        indFrequency: [\r\n          { required: true, message: '指标生成频率不能为空', trigger: 'change' }\r\n        ],\r\n        indCalType: [\r\n          { required: true, message: '度量单位不能为空', trigger: 'change' }\r\n        ],\r\n        indMonField: [\r\n          { required: true, message: '监管属性不能为空', trigger: 'change' }\r\n        ],\r\n        indDataType: [\r\n          { required: true, message: '数据类型不能为空', trigger: 'change' }\r\n        ]/*,\r\n        dimension1: [\r\n          {required: true, message: '维度1不能为空', trigger: 'change'}\r\n        ],\r\n        dimensionValue1: [\r\n          {required: true, message: '维度值1不能为空', trigger: 'change'}\r\n        ]*/\r\n      },\r\n      dimensionRules: {\r\n        categoryName: [\r\n          { required: true, message: '指标维度名称不能为空', trigger: 'change' }\r\n        ]\r\n      },\r\n      dimensionValueRules: {\r\n        categoryName: [\r\n          { required: true, message: '指标维度值不能为空', trigger: 'change' }\r\n        ]\r\n      },\r\n      sourceData: [],\r\n      tableInfo: [],\r\n      atomDimensions: [],\r\n      bizTabCodeDis: false,\r\n      // 计算输日期的页面\r\n      processDialog: false,\r\n      // 传给后台的参数\r\n      processParam: {\r\n        codes: [],\r\n        periodDate: ''\r\n      },\r\n      dateValue: '',\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      dimensionArr: [],\r\n      dimensionTitle: '维度',\r\n      dimensionNumber: 2,\r\n      dimensionTmp: null,\r\n      dimensionValueArr: [],\r\n      dimensionValueTitle: '维度值',\r\n      dimensionValueNumber: 2,\r\n      dimensionValueTmp: null,\r\n      showIndDefRule: false,\r\n      showIndHistory: false,\r\n      indInnerWarnValueArr: [1],\r\n      indInnerWarnValueNumber: 1,\r\n      indInnerWarnPassValueArr: [1],\r\n      indInnerWarnPassValueNumber: 1,\r\n      indMonWarnValueArr: [1],\r\n      indMonWarnValueNumber: 1,\r\n      indMonWarnPassValueArr: [1],\r\n      indMonWarnPassValueNumber: 1,\r\n      historyData: [],\r\n      showIndDimensionAdd: false,\r\n      flowData:[],\r\n      showFlow:false,\r\n      dimension: {\r\n        id: null,\r\n        classificationId: null,// 所属分类\r\n        categoryName: null,// 指标维度名称\r\n        remarks: null// 备注\r\n      },\r\n      showIndDimensionValueAdd: false,\r\n      dimensionValue: {\r\n        dimension: null,// 所属维度\r\n        lastLevelDimensionValue: null,// 上级维度值\r\n        dimValue: null// 指标维度值\r\n      },\r\n      renderFunc(h, option) {\r\n        return <span>{ option.label }</span>;\r\n      },\r\n      transferData: [],\r\n      value: [],\r\n      indDefRuleStr: '',\r\n      indDefRuleId: '',\r\n      indDefRuleVal: '',\r\n      genIndArr: [],\r\n      genAndDerivedIndArr: [],\r\n      dimInfoArr: [],\r\n      dimValueArr1: [],\r\n      dimValueArr2: [],\r\n      dimValueArr3: [],\r\n      dimValueArr4: [],\r\n      dimValueArr5: [],\r\n      dimValueArr6: [],\r\n      dimValueArr7: [],\r\n      dimValueArr8: [],\r\n      dimValueArr9: [],\r\n      dimValueArr10: [],\r\n      parentDimValueArr: [],\r\n      classificationArr: [],\r\n      dimValueTmp1: [],\r\n      dimValueTmp2: [],\r\n      dimValueTmp3: [],\r\n      dimValueTmp4: [],\r\n      dimValueTmp5: [],\r\n      dimValueTmp6: [],\r\n      dimValueTmp7: [],\r\n      dimValueTmp8: [],\r\n      dimValueTmp9: [],\r\n      dimValueTmp10: [],\r\n\r\n      dimValueTmpName1: [],\r\n      dimValueTmpName2: [],\r\n      dimValueTmpName3: [],\r\n      dimValueTmpName4: [],\r\n      dimValueTmpName5: [],\r\n      dimValueTmpName6: [],\r\n      dimValueTmpName7: [],\r\n      dimValueTmpName8: [],\r\n      dimValueTmpName9: [],\r\n      dimValueTmpName10: [],\r\n\r\n      formDialog: false,\r\n      qryIndFirstType: [],\r\n      qryIndSecondType: [],\r\n      formIndFirstType: [],\r\n      formIndSecondType: [],\r\n      depts:[],\r\n      hisIeId: null,\r\n      errmsgDim1: false,\r\n      errmsgDimV1: false,\r\n      errmsgDim2: false,\r\n      errmsgDimV2: false,\r\n      errmsgDim3: false,\r\n      errmsgDimV3: false,\r\n      errmsgDim4: false,\r\n      errmsgDimV4: false,\r\n      errmsgDim5: false,\r\n      errmsgDimV5: false,\r\n      errmsgDim6: false,\r\n      errmsgDimV6: false,\r\n      errmsgDim7: false,\r\n      errmsgDimV7: false,\r\n      errmsgDim8: false,\r\n      errmsgDimV8: false,\r\n      errmsgDim9: false,\r\n      errmsgDimV9: false,\r\n      errmsgDim10: false,\r\n      errmsgDimV10: false,\r\n      isBizNameContract : true,\r\n      //hasCalc: false\r\n      hasCalc: true,\r\n      selectAtomDialog: false\r\n    }\r\n  },\r\n  created() {\r\n    this.crud.optShow.add = false\r\n    this.crud.optShow.del=false\r\n    this.crud.optShow.edit=false\r\n    this.crud.optShow.rightBtnGroup = false\r\n    this.initDimInfos(2)\r\n    //this.initDimValuesChildren()\r\n    this.initDimValues(2)\r\n    this.initClassifications()\r\n    this.initGenAndDerivedInd()\r\n    this.initIndFirstType()\r\n    this.getDepts();\r\n  },\r\n  mounted() {\r\n    this.query.bizName = this.$route.query.ieName\r\n    this.crud.refresh()\r\n   },\r\n  methods: {\r\n    changeIeProp(val) {\r\n      if(val == 3) {\r\n        this.dimAndValueObject1.isShow = true;\r\n        this.dimAndValueObject2.isShow = true;\r\n      } else {\r\n        this.dimAndValueObject1.isShow = false;\r\n        this.dimAndValueObject2.isShow = false;\r\n      }\r\n    },\r\n    chageContemporaneous(val) {\r\n      this.form.indContemporaneousValue = val;\r\n      this.form.indYearOnYearIncrement = val;\r\n    },\r\n    chagePreviousPeriod(val){\r\n      this.form.indPreviousPeriodValue = val;\r\n      this.form.indMonthOnMonthIncrement = val;\r\n    },\r\n    chageInitialValue(val){\r\n      this.form.indInitialValueOfTheYear = val;\r\n      this.form.indYearOnYearIncre = val;\r\n    },\r\n    forceUpdate() {\r\n      this.$forceUpdate()\r\n    },\r\n    genBizNameChange(){\r\n      for (var i = 0; i < Object.keys(this.genIndArr).length; i++) {\r\n        if(this.genIndArr[i].id == this.form.genBizName){\r\n          if(this.genIndArr[i].isAdditionalRecording == true){\r\n            this.warnMsg = true\r\n            this.$message({\r\n              message: '该指标结果可能存在补录，请确认是否引用！',\r\n              type: 'warning'\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n    validateBizNameContract(){\r\n      var that=this;\r\n      bizNameIsContract(that.form.id,that.form.bizName).then(res => {\r\n        if(res.code == 0) {\r\n          if(res.data) {\r\n            this.$message.error(\"指标名称重复,请重新输入\")\r\n            that.isBizNameContract = false\r\n            return;\r\n          }\r\n          that.isBizNameContract = true\r\n        }else {\r\n          this.$message.error(\"系统错误\")\r\n          that.isBizNameContract = false\r\n        }\r\n      })\r\n    },\r\n    initDimInfos(status) {\r\n      getDimInfos( {size: 100, page: 0,tenant: this.form.tenant,status: status}).then(data => {\r\n        this.dimInfoArr = data.data.records\r\n      })\r\n    },\r\n    initDimVal(dimId,item){\r\n      let _this = this;\r\n      if(item == 1) {\r\n        _this.dimAndValueObject1.dimensionValue = '';\r\n        _this.dimAndValueObject1.dimensionName = '';\r\n      } else if(item == 2) {\r\n        _this.dimAndValueObject2.dimensionValue = '';\r\n        _this.dimAndValueObject2.dimensionName = '';\r\n      } else if(item == 3) {\r\n        _this.dimAndValueObject3.dimensionValue = '';\r\n        _this.dimAndValueObject3.dimensionName = '';\r\n      } else if(item == 4) {\r\n        _this.dimAndValueObject4.dimensionValue = '';\r\n        _this.dimAndValueObject4.dimensionName = '';\r\n      } else if(item == 5) {\r\n        _this.dimAndValueObject5.dimensionValue = '';\r\n        _this.dimAndValueObject5.dimensionName = '';\r\n      } else if(item == 6) {\r\n        _this.dimAndValueObject6.dimensionValue = '';\r\n        _this.dimAndValueObject6.dimensionName = '';\r\n      } else if(item == 7) {\r\n        _this.dimAndValueObject7.dimensionValue = '';\r\n        _this.dimAndValueObject7.dimensionName = '';\r\n      } else if(item == 8) {\r\n        _this.dimAndValueObject8.dimensionValue = '';\r\n        _this.dimAndValueObject8.dimensionName = '';\r\n      } else if(item == 9) {\r\n        _this.dimAndValueObject9.dimensionValue = '';\r\n        _this.dimAndValueObject9.dimensionName = '';\r\n      } else if(item == 10) {\r\n        _this.dimAndValueObject10.dimensionValue = '';\r\n        _this.dimAndValueObject10.dimensionName = '';\r\n      }\r\n\r\n      this.initDimValuesChildren(dimId,item);\r\n    },\r\n    initDimValuesChildren(dimId,item) {\r\n      let _this = this;\r\n      getDimValuesChildren( {size: 100, page: 0,dimId}).then(data => {\r\n        if(item == 1) {\r\n          _this.dimValueArr1 = data.data\r\n          if (dimId == null || dimId == '') {\r\n            _this.errmsgDim1 = true;\r\n            _this.dimAndValueObject1.dimensionValue = '';\r\n            _this.dimAndValueObject1.dimensionName = '';\r\n            _this.errmsgDimV1 = true;\r\n          }else if(_this.dimAndValueObject1.dimensionValue == null || _this.dimAndValueObject1.dimensionValue == ''){\r\n            _this.errmsgDimV1=true;\r\n            _this.errmsgDim1 = false;\r\n            _this.dimAndValueObject1.dimensionValue = '';\r\n            _this.dimAndValueObject1.dimensionName = '';\r\n          }\r\n        } else if(item == 2) {\r\n          _this.dimValueArr2 = data.data\r\n          if(_this.dimAndValueObject2.dimension == null || _this.dimAndValueObject2.dimension == '')\r\n          {\r\n            _this.errmsgDimV2=false;\r\n            _this.dimAndValueObject2.dimensionValue='';\r\n            _this.dimAndValueObject2.dimensionName='';\r\n          }else if(_this.dimAndValueObject2.dimensionValue == null || _this.dimAndValueObject2.dimensionValue == ''){\r\n            _this.errmsgDimV2=true;\r\n            _this.dimAndValueObject2.dimensionValue = '';\r\n            _this.dimAndValueObject2.dimensionName = '';\r\n          }\r\n        } else if(item == 3) {\r\n          _this.dimValueArr3 = data.data\r\n          if(_this.dimAndValueObject3.dimension == null || _this.dimAndValueObject3.dimension == '')\r\n          {\r\n            _this.errmsgDimV3=false;\r\n            _this.dimAndValueObject3.dimensionValue='';\r\n            _this.dimAndValueObject3.dimensionName='';\r\n          }else if(_this.dimAndValueObject3.dimensionValue == null || _this.dimAndValueObject3.dimensionValue == ''){\r\n            _this.errmsgDimV3=true;\r\n            _this.dimAndValueObject3.dimensionValue = '';\r\n            _this.dimAndValueObject3.dimensionName = '';\r\n          }\r\n        } else if(item == 4) {\r\n          _this.dimValueArr4 = data.data\r\n          if(_this.dimAndValueObject4.dimension == null || _this.dimAndValueObject4.dimension == '')\r\n          {\r\n            _this.errmsgDimV4=false;\r\n            _this.dimAndValueObject4.dimensionValue='';\r\n            _this.dimAndValueObject4.dimensionName='';\r\n          }else if(_this.dimAndValueObject4.dimensionValue == null || _this.dimAndValueObject4.dimensionValue == ''){\r\n            _this.errmsgDimV4=true;\r\n            _this.dimAndValueObject4.dimensionValue = '';\r\n            _this.dimAndValueObject4.dimensionName = '';\r\n          }\r\n        } else if(item == 5) {\r\n          _this.dimValueArr5 = data.data\r\n          if(_this.dimAndValueObject5.dimension == null || _this.dimAndValueObject5.dimension == '')\r\n          {\r\n            _this.errmsgDimV5=false;\r\n            _this.dimAndValueObject5.dimensionValue='';\r\n            _this.dimAndValueObject5.dimensionName='';\r\n          }else if(_this.dimAndValueObject5.dimensionValue == null || _this.dimAndValueObject5.dimensionValue == ''){\r\n            _this.errmsgDimV5=true;\r\n            _this.dimAndValueObject5.dimensionValue = '';\r\n            _this.dimAndValueObject5.dimensionName = '';\r\n          }\r\n        } else if(item == 6) {\r\n          _this.dimValueArr6 = data.data\r\n          if(_this.dimAndValueObject6.dimension == null || _this.dimAndValueObject6.dimension == '')\r\n          {\r\n            _this.errmsgDimV6=false;\r\n            _this.dimAndValueObject6.dimensionValue='';\r\n            _this.dimAndValueObject6.dimensionName='';\r\n          }else if(_this.dimAndValueObject6.dimensionValue == null || _this.dimAndValueObject6.dimensionValue == ''){\r\n            _this.errmsgDimV6=true;\r\n            _this.dimAndValueObject6.dimensionValue = '';\r\n            _this.dimAndValueObject6.dimensionName = '';\r\n          }\r\n        } else if(item == 7) {\r\n          _this.dimValueArr7 = data.data\r\n          if(_this.dimAndValueObject7.dimension == null || _this.dimAndValueObject7.dimension == '')\r\n          {\r\n            _this.errmsgDimV7=false;\r\n            _this.dimAndValueObject7.dimensionValue='';\r\n            _this.dimAndValueObject7.dimensionName='';\r\n          }else if(_this.dimAndValueObject7.dimensionValue == null || _this.dimAndValueObject7.dimensionValue == ''){\r\n            _this.errmsgDimV7=true;\r\n            _this.dimAndValueObject7.dimensionValue = '';\r\n            _this.dimAndValueObject7.dimensionName = '';\r\n          }\r\n        } else if(item == 8) {\r\n          _this.dimValueArr8 = data.data\r\n          if(_this.dimAndValueObject8.dimension == null || _this.dimAndValueObject8.dimension == '')\r\n          {\r\n            _this.errmsgDimV8=false;\r\n            _this.dimAndValueObject8.dimensionValue='';\r\n            _this.dimAndValueObject8.dimensionName='';\r\n          }else if(_this.dimAndValueObject8.dimensionValue == null || _this.dimAndValueObject8.dimensionValue == ''){\r\n            _this.errmsgDimV8=true;\r\n            _this.dimAndValueObject8.dimensionValue = '';\r\n            _this.dimAndValueObject8.dimensionName = '';\r\n          }\r\n        } else if(item == 9) {\r\n          _this.dimValueArr9 = data.data\r\n          if(_this.dimAndValueObject9.dimension == null || _this.dimAndValueObject9.dimension == '')\r\n          {\r\n            _this.errmsgDimV9=false;\r\n            _this.dimAndValueObject9.dimensionValue='';\r\n            _this.dimAndValueObject9.dimensionName='';\r\n          }else if(_this.dimAndValueObject9.dimensionValue == null || _this.dimAndValueObject9.dimensionValue == ''){\r\n            _this.errmsgDimV9=true;\r\n            _this.dimAndValueObject9.dimensionValue = '';\r\n            _this.dimAndValueObject9.dimensionName = '';\r\n          }\r\n        } else if(item == 10) {\r\n          _this.dimValueArr10 = data.data\r\n          if(_this.dimAndValueObject10.dimension == null || _this.dimAndValueObject10.dimension == '')\r\n          {\r\n            _this.errmsgDimV10=false;\r\n            _this.dimAndValueObject10.dimensionValue='';\r\n            _this.dimAndValueObject10.dimensionName='';\r\n          }else if(_this.dimAndValueObject10.dimensionValue == null || _this.dimAndValueObject10.dimensionValue == ''){\r\n            _this.errmsgDimV10=true;\r\n            _this.dimAndValueObject10.dimensionValue = '';\r\n            _this.dimAndValueObject10.dimensionName = '';\r\n          }\r\n        }\r\n\r\n      })\r\n    },\r\n    initDimValues(status) {\r\n      getDimValues( {size: 100, page: 0,tenant: this.form.tenant,status: status}).then(data => {\r\n        this.parentDimValueArr = data.data.records\r\n      })\r\n    },\r\n    initClassifications() {\r\n      getClassifications({size: 100, page: 0}).then(data => {\r\n        this.classificationArr = data.data.records\r\n      })\r\n    },\r\n    initGenAndDerivedInd() {\r\n      getGenAndDerivedInd().then(data => {\r\n        this.genAndDerivedIndArr = data.data\r\n        for (let i = 0; i < this.genAndDerivedIndArr.length; i++) {\r\n          this.transferData.push({key: this.genAndDerivedIndArr[i].id + ',' + this.genAndDerivedIndArr[i].bizName+ ',' + this.genAndDerivedIndArr[i].isAdditionalRecording + ',' + this.genAndDerivedIndArr[i].bizCode, label: this.genAndDerivedIndArr[i].bizName})\r\n        }\r\n      })\r\n    },\r\n    initIndFirstType() {\r\n      crudIndCategory.getCategoryList(0).then(res => {\r\n        this.qryIndFirstType = [];\r\n        this.formIndFirstType = [];\r\n        const data = res.data;\r\n        if(res.code == 0) {\r\n          for(let i=0; i<data.length; i++) {\r\n            this.qryIndFirstType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\r\n            this.formIndFirstType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\r\n          }\r\n        }\r\n      })\r\n    },\r\n    initIndSecondType(indFirstType,type) {\r\n      if(type == \"query\") {\r\n        this.qryIndSecondType = [];\r\n      }else {\r\n        this.formIndSecondType = [];\r\n      }\r\n      //let indFirstType = this.query.indFirstType;\r\n      if(indFirstType == null) {\r\n        return;\r\n      }\r\n      crudIndCategory.getCategoryList(indFirstType).then(res => {\r\n        const data = res.data;\r\n        if(res.code == 0) {\r\n          for(let i=0; i<data.length; i++) {\r\n            if(type == \"query\"){\r\n              this.qryIndSecondType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\r\n            } else {\r\n              this.formIndSecondType.push({id: data[i].id, label: data[i].categoryName, value: data[i].id})\r\n            }\r\n\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 获取数据前设置好接口地址\r\n    [CRUD.HOOK.beforeRefresh]() {\r\n      //this.crud.optShow.edit = true\r\n      // this.query.ieType = '4'\r\n      return true\r\n    },\r\n    [CRUD.HOOK.afterRefresh]() {\r\n      // getAllSource().then(data => {\r\n      //   this.sourceData = [{ id: 'local', datasourceName: '默认数据源' }].concat(data.data)\r\n      // })\r\n      getGenInd().then(data => {\r\n        this.genIndArr = data.data\r\n      })\r\n    },\r\n    [CRUD.HOOK.beforeToDetail](data) {\r\n      this.form.id = data.form.id\r\n      this.form.bizCode = data.form.bizCode\r\n      this.form.ieProp = data.form.ieProp\r\n      this.form.genBizName = data.form.genBizName\r\n      this.form.bizName = data.form.bizName\r\n      this.form.indFirstType = data.form.indFirstType\r\n      this.initIndSecondType(this.form.indFirstType, 'form')\r\n      this.form.indSecondType = data.form.indSecondType\r\n      this.form.categoryType = data.form.categoryType\r\n      this.dimAndValueObject1.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[0] == null ? false : true\r\n      this.dimAndValueObject1.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimension\r\n      this.dimAndValueObject1.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionValue\r\n      this.dimAndValueObject1.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[0] == null ? null : data.form.indDimAndValueRelations[0].dimensionName\r\n\r\n      this.dimAndValueObject2.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[1] == null ? false : true\r\n      this.dimAndValueObject2.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimension\r\n      this.dimAndValueObject2.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionValue\r\n      this.dimAndValueObject2.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[1] == null ? null : data.form.indDimAndValueRelations[1].dimensionName\r\n\r\n      this.dimAndValueObject3.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[2] == null ? false : true\r\n      this.dimAndValueObject3.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimension\r\n      this.dimAndValueObject3.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionValue\r\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName\r\n      this.dimAndValueObject3.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[2] == null ? null : data.form.indDimAndValueRelations[2].dimensionName\r\n\r\n      this.dimAndValueObject4.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[3] == null ? false : true\r\n      this.dimAndValueObject4.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimension\r\n      this.dimAndValueObject4.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionValue\r\n      this.dimAndValueObject4.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[3] == null ? null : data.form.indDimAndValueRelations[3].dimensionName\r\n\r\n      this.dimAndValueObject5.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[4] == null ? false : true\r\n      this.dimAndValueObject5.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimension\r\n      this.dimAndValueObject5.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionValue\r\n      this.dimAndValueObject5.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[4] == null ? null : data.form.indDimAndValueRelations[4].dimensionName\r\n\r\n      this.dimAndValueObject6.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[5] == null ? false : true\r\n      this.dimAndValueObject6.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimension\r\n      this.dimAndValueObject6.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionValue\r\n      this.dimAndValueObject6.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[5] == null ? null : data.form.indDimAndValueRelations[5].dimensionName\r\n\r\n      this.dimAndValueObject7.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[6] == null ? false : true\r\n      this.dimAndValueObject7.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimension\r\n      this.dimAndValueObject7.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionValue\r\n      this.dimAndValueObject7.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[6] == null ? null : data.form.indDimAndValueRelations[6].dimensionName\r\n\r\n      this.dimAndValueObject8.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[7] == null ? false : true\r\n      this.dimAndValueObject8.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimension\r\n      this.dimAndValueObject8.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionValue\r\n      this.dimAndValueObject8.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[7] == null ? null : data.form.indDimAndValueRelations[7].dimensionName\r\n\r\n      this.dimAndValueObject9.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[8] == null ? false : true\r\n      this.dimAndValueObject9.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimension\r\n      this.dimAndValueObject9.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionValue\r\n      this.dimAndValueObject9.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[8] == null ? null : data.form.indDimAndValueRelations[8].dimensionName\r\n\r\n      this.dimAndValueObject10.isShow = data.form.indDimAndValueRelations.length == 0 ?\r\n          false : data.form.indDimAndValueRelations[9] == null ? false : true\r\n      this.dimAndValueObject10.dimension = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimension\r\n      this.dimAndValueObject10.dimensionValue = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionValue\r\n      this.dimAndValueObject10.dimensionName = data.form.indDimAndValueRelations.length == 0 ?\r\n          null : data.form.indDimAndValueRelations[9] == null ? null : data.form.indDimAndValueRelations[9].dimensionName\r\n\r\n      this.form.businessDept = data.form.businessDept\r\n      this.form.indLevel = data.form.indLevel\r\n      this.form.isDeptQuery = data.form.isDeptQuery\r\n      this.form.isAdditionalRecording = data.form.isAdditionalRecording\r\n      this.form.indDefinition = data.form.indDefinition\r\n      //this.form.indDefRule = data.form.indDefRule\r\n      this.form.indValueRange1 = data.form.indValueRange1\r\n      this.form.indValueRange2 = data.form.indValueRange2\r\n      this.form.indInnerWarnValue = data.form.indInnerWarnValue\r\n      this.form.indMonWarnValue = data.form.indMonWarnValue\r\n      this.form.currency = data.form.currency\r\n      this.form.indValueType = data.form.indValueType\r\n      this.form.indFrequency = data.form.indFrequency == null ? null : Array.isArray(data.form.indFrequency) ? data.form.indFrequency : data.form.indFrequency.split(\",\")\r\n      this.form.indCalType = data.form.indCalType\r\n      this.form.indSafeLevel = data.form.indSafeLevel\r\n      this.form.indMonField = data.form.indMonField\r\n      this.form.indProcessSys = data.form.indProcessSys\r\n      this.form.indDataType = data.form.indDataType\r\n      this.form.indDataForm = data.form.indDataForm\r\n      this.form.indReference = data.form.indReference\r\n      this.form.isRealTimeProcess = data.form.isRealTimeProcess\r\n      this.form.indCurrentValue = data.form.indCurrentValue\r\n      this.form.indContemporaneousValue = data.form.indContemporaneousValue\r\n      this.form.indYearOnYearIncrement = data.form.indYearOnYearIncrement\r\n      this.form.indYearOnYearGrowth = data.form.indYearOnYearGrowth\r\n      this.form.indPreviousPeriodValue = data.form.indPreviousPeriodValue\r\n      this.form.indMonthOnMonthIncrement = data.form.indMonthOnMonthIncrement\r\n      this.form.indMonthOnMonthGrowth = data.form.indMonthOnMonthGrowth\r\n      this.form.indInitialValueOfTheYear = data.form.indInitialValueOfTheYear\r\n      this.form.indYearOnYearIncre = data.form.indYearOnYearIncre\r\n      this.form.indIncreaseOverTheBeginningOfTheYear = data.form.indIncreaseOverTheBeginningOfTheYear\r\n      this.form.indVerifyStatus = data.form.indVerifyStatus\r\n      this.form.indDeployStatus = data.form.indDeployStatus\r\n      this.form.indVerifyId = data.form.indVerifyId\r\n      this.form.tenant = data.form.tenant\r\n\r\n      let defRule = data.form.indDefRule;\r\n      if (defRule != null) {\r\n        let defRuleArr = defRule.split(\"||\");\r\n        if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n          this.form.indDefRule = defRuleArr[0]\r\n        } else {\r\n          this.form.indDefRule = defRule;\r\n        }\r\n      }\r\n      this.form.indDefRuleStr = data.form.indDefRuleStr;\r\n      this.indDefRuleStr = data.form.indDefRuleStr;\r\n      if(data.form.indDefRuleVal !=null && data.form.indDefRuleVal != \"\") {\r\n        this.form.indDefRuleVal = data.form.indDefRuleVal;\r\n        this.form.indDefRuleId = data.form.indDefRuleId;\r\n        this.indDefRuleVal = data.form.indDefRuleVal;\r\n        this.indDefRuleId = data.form.indDefRuleId;\r\n      } else {\r\n        if (defRule != null) {\r\n          let defRuleArr = defRule.split(\"||\");\r\n          if (Array.isArray(defRuleArr) && defRuleArr.length >= 2) {\r\n            this.form.indDefRuleVal = defRuleArr[1];\r\n            this.form.indDefRuleId = defRuleArr[2];\r\n            this.indDefRuleVal = defRuleArr[1];\r\n            this.indDefRuleId = defRuleArr[2];\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 接收维度信息\r\n    getAtomDimensions(data) {\r\n      this.form.atomDimensions = data\r\n    },\r\n    handleCategoryClick(data) {\r\n      console.log(data)\r\n      this.crud.form.categoryId = data.id\r\n      this.crud.query.categoryIds = data.childrenIds\r\n      this.crud.query.categoryType = data.categoryType\r\n      this.form.categoryId = data.id\r\n      this.form.tenant = data.tenant\r\n      const parentId = data.parentId;\r\n      if(parentId == null) {\r\n        this.crud.optShow.add = false;\r\n        this.crud.form.indFirstType = data.id;\r\n        this.initIndSecondType(data.id,'form');\r\n      } else if(parentId == '0') {\r\n        this.crud.optShow.add = true;\r\n        this.crud.form.indFirstType = data.id;\r\n        this.initIndSecondType(data.id,'form');\r\n      } else {\r\n        this.crud.optShow.add = true;\r\n        this.crud.form.indFirstType = data.parentId;\r\n        this.initIndSecondType(data.parentId,'form');\r\n        this.crud.form.indSecondType = data.id;\r\n      }\r\n      this.initDimInfos(2)\r\n      this.crud.refresh()\r\n    },\r\n    // 数据源发生变化时查询对应的数据源下的表\r\n    dataSourceChangeHandle(val) {\r\n      this.form.bizTabCode = null\r\n      /* const param = {\r\n        id: val\r\n      }\r\n      getTables(param).then(data => {\r\n        this.tableInfo = data.data\r\n      })*/\r\n      // 通过数据源id查询表\r\n      getTablesById(val).then(data => {\r\n        this.tableInfo = data.data\r\n      })\r\n    },\r\n    toSourceDataName(row) {\r\n      let name = ''\r\n      this.sourceData.forEach(row1 => {\r\n        if (row1.id == row.sourceDataSource) {\r\n          name = row1.datasourceName\r\n        }\r\n      })\r\n      return name\r\n    },\r\n    toTargetDataName(row) {\r\n      let name = ''\r\n      this.sourceData.forEach(row1 => {\r\n        if (row1.id == row.targetDataSource) {\r\n          name = row1.datasourceName\r\n        }\r\n      })\r\n      return name\r\n    },\r\n    /** 点击计算按钮触发 */\r\n    processA(data) {\r\n      const bizCodes = []\r\n      for (let i = 0; i < data.length; i++) {\r\n        bizCodes.push(data[i].bizCode)\r\n      }\r\n      this.processParam.codes = bizCodes\r\n      this.processDialog = true\r\n    },\r\n    processB() {\r\n      if (this.dateValue == '') {\r\n        this.crud.notify('日期不能为空', CRUD.NOTIFICATION_TYPE.ERROR)\r\n      } else {\r\n        this.processParam.periodDate = this.dateFormat(this.dateValue, 'YYYYMMDD')\r\n        process(this.processParam, 'atom').then(data => {\r\n          if (data.code == 0) {\r\n            this.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n          } else {\r\n            this.crud.notify(data.msg, CRUD.NOTIFICATION_TYPE.ERROR)\r\n          }\r\n          this.processDialog = false\r\n        })\r\n      }\r\n    },\r\n    // 新增维度\r\n    addDimension() {\r\n      this.showIndDimensionAdd = true\r\n    },\r\n    // 新增维度值\r\n    addDimensionValue() {\r\n      this.initDimInfos(2)\r\n      this.showIndDimensionValueAdd = true\r\n    },\r\n    // 新增维度和维度值\r\n    addDimensionAndValue() {\r\n      if(this.dimensionNumber >= 10){\r\n        return;\r\n      }\r\n      this.dimensionArr.push(++this.dimensionNumber)\r\n      this.dimensionArr = this.uniqueArr(this.dimensionArr)\r\n      if(this.dimensionNumber == 3) {\r\n        this.dimAndValueObject3.isShow = true\r\n      } else if(this.dimensionNumber == 4) {\r\n        this.dimAndValueObject4.isShow = true\r\n      } else if(this.dimensionNumber == 5) {\r\n        this.dimAndValueObject5.isShow = true\r\n      } else if(this.dimensionNumber == 6) {\r\n        this.dimAndValueObject6.isShow = true\r\n      } else if(this.dimensionNumber == 7) {\r\n        this.dimAndValueObject7.isShow = true\r\n      } else if(this.dimensionNumber == 8) {\r\n        this.dimAndValueObject8.isShow = true\r\n      } else if(this.dimensionNumber == 9) {\r\n        this.dimAndValueObject9.isShow = true\r\n      } else if(this.dimensionNumber == 10) {\r\n        this.dimAndValueObject10.isShow = true\r\n      }\r\n      // this.dimensionArr.push({ id: ++this.dimensionNumber, value: { dimension: null, dimensionValue: null } })\r\n    },\r\n    // 删除维度和维度值\r\n    deleteDimensionAndValue(item) {\r\n      this.dimensionArr.splice(this.dimensionArr.indexOf(item), 1);\r\n      if(item == 1) {\r\n        this.dimAndValueObject1 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n\r\n      } else if(item == 2) {\r\n        this.dimAndValueObject2 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 3) {\r\n        this.dimAndValueObject3 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 4) {\r\n        this.dimAndValueObject4 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 5) {\r\n        this.dimAndValueObject5 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 6) {\r\n        this.dimAndValueObject6 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 7) {\r\n        this.dimAndValueObject7 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 8) {\r\n        this.dimAndValueObject8 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 9) {\r\n        this.dimAndValueObject9 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      } else if(item == 10) {\r\n        this.dimAndValueObject10 = {\r\n          isShow: false,\r\n          dimension: null,\r\n          dimensionValue: null,\r\n          dimensionName: null\r\n        }\r\n      }\r\n      this.dimensionNumber =2;\r\n    },\r\n    // 数组去重\r\n    uniqueArr(arr){\r\n      var x = new Set(arr);\r\n      return [...x];\r\n    },\r\n    // 衍生指标编辑指标口径规则\r\n    showIndDefRuleDialog() {\r\n      // this.indDefRuleStr = ''\r\n      this.value = []\r\n      this.showIndDefRule = true\r\n    },\r\n    // 关闭衍生指标编辑指标口径规则\r\n    closeIndDefRuleDialog() {\r\n      this.showIndDefRule = false\r\n    },\r\n    // 选择指标进行规则拼接\r\n    selectInd() {\r\n      let keyLabel = this.value[0];\r\n      let keyArr = keyLabel.split(\",\");\r\n      let hasRef = keyArr[2];\r\n      if(hasRef == \"true\" ){\r\n        this.$message({\r\n          message: '该指标结果可能存在补录，请确认是否引用！',\r\n          type: 'warning'\r\n        });\r\n      }\r\n      if(this.indDefRuleStr != null\r\n          && (this.endsWithStr(this.indDefRuleStr))) {\r\n        this.indDefRuleStr += '[' + keyArr[1] + ']';\r\n        this.indDefRuleId += keyArr[0];\r\n        this.indDefRuleVal += keyArr[3];\r\n      } else {\r\n        this.indDefRuleStr = '[' + keyArr[1] + ']';\r\n        this.indDefRuleId += keyArr[0];\r\n        this.indDefRuleVal = keyArr[3];\r\n      }\r\n      this.showIndDefRule = false\r\n      //this.hasCalc = false;\r\n      this.rules.indDefRule.required = false\r\n    },\r\n    // 指标规则+号按钮\r\n    indDefRulePlus() {\r\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\r\n          && !this.beginWithStr(this.indDefRuleStr) && !this.endsWithStr(this.indDefRuleStr)){\r\n        this.indDefRuleStr += ' + '\r\n        this.indDefRuleVal += ' + '\r\n        this.indDefRuleId += ' + '\r\n      }\r\n    },\r\n    // 指标规则-号按钮\r\n    indDefRuleSubtraction() {\r\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\r\n          && !this.beginWithStr(this.indDefRuleStr) && !this.endsWithStr(this.indDefRuleStr)){\r\n        this.indDefRuleStr += ' - '\r\n        this.indDefRuleVal += ' - '\r\n        this.indDefRuleId += ' - '\r\n      }\r\n    },\r\n    // 指标规则×号按钮\r\n    indDefRuleMultiplication() {\r\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\r\n          && !this.beginWithStr(this.indDefRuleStr) && !this.endsWithStr(this.indDefRuleStr)) {\r\n        this.indDefRuleStr += ' × '\r\n        this.indDefRuleVal += ' × '\r\n        this.indDefRuleId += ' × '\r\n      }\r\n    },\r\n    // 指标规则/号按钮\r\n    indDefRuleDivision() {\r\n      if(this.indDefRuleStr != null && this.indDefRuleStr.length >0\r\n          && !this.beginWithStr(this.indDefRuleStr) && !this.endsWithStr(this.indDefRuleStr)){\r\n        this.indDefRuleStr += ' / '\r\n        this.indDefRuleVal += ' / '\r\n        this.indDefRuleId += ' / '\r\n      }\r\n    },\r\n    changeDimVal1(val){\r\n      if(val == null || val == '') {\r\n        this.errmsgDimV1=true;\r\n      } else{\r\n        this.errmsgDimV1=false;\r\n        this.dimAndValueObject1.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal2(val){\r\n      if(this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV2=true;\r\n      } else{\r\n        this.errmsgDimV2=false;\r\n        this.dimAndValueObject2.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal3(val){\r\n      if(this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV3=true;\r\n      } else{\r\n        this.errmsgDimV3=false;\r\n        this.dimAndValueObject3.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal4(val){\r\n      if(this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV4=true;\r\n      } else{\r\n        this.errmsgDimV4=false;\r\n        this.dimAndValueObject4.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal5(val){\r\n      if(this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV5=true;\r\n      } else{\r\n        this.errmsgDimV5=false;\r\n        this.dimAndValueObject5.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal6(val){\r\n      if(this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV6=true;\r\n      } else{\r\n        this.errmsgDimV6=false;\r\n        this.dimAndValueObject6.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal7(val){\r\n      if(this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV7=true;\r\n      } else{\r\n        this.errmsgDimV7=false;\r\n        this.dimAndValueObject7.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal8(val){\r\n      if(this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV8=true;\r\n      } else{\r\n        this.errmsgDimV8=false;\r\n        this.dimAndValueObject8.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal9(val){\r\n      if(this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV9=true;\r\n      } else{\r\n        this.errmsgDimV9=false;\r\n        this.dimAndValueObject9.dimensionValue= ''\r\n      }\r\n    },\r\n    changeDimVal10(val){\r\n      if(this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != '' && (val == null || val == '')) {\r\n        this.errmsgDimV10=true;\r\n      } else{\r\n        this.errmsgDimV10=false;\r\n        this.dimAndValueObject10.dimensionValue= ''\r\n      }\r\n    },\r\n    handleDimValueClick1(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName1.push(data.categoryName)\r\n        this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1)\r\n        this.dimValueTmp1.push(data.id)\r\n        this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1)\r\n      }else{\r\n        this.dimValueTmpName1.splice(this.dimValueTmpName1.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName1 = this.uniqueArr(this.dimValueTmpName1)\r\n        this.dimValueTmp1.splice(this.dimValueTmp1.indexOf(data.id),1)\r\n        this.dimensionTmp1 = this.uniqueArr(this.dimValueTmp1)\r\n      }\r\n      this.dimAndValueObject1.dimensionName = this.dimensionTmpName1.join(',')\r\n      this.dimAndValueObject1.dimensionValue = this.dimensionTmp1.join(',')\r\n      if(this.dimAndValueObject1.dimensionValue == null || this.dimAndValueObject1.dimensionValue == '') {\r\n        this.errmsgDimV1=true;\r\n      } else{\r\n        this.errmsgDimV1=false;\r\n      }\r\n    },\r\n    handleDimValueClick2(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName2.push(data.categoryName)\r\n        this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2)\r\n        this.dimValueTmp2.push(data.id)\r\n        this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2)\r\n      }else{\r\n        this.dimValueTmpName2.splice(this.dimValueTmpName2.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName2 = this.uniqueArr(this.dimValueTmpName2)\r\n        this.dimValueTmp2.splice(this.dimValueTmp2.indexOf(data.id),1)\r\n        this.dimensionTmp2 = this.uniqueArr(this.dimValueTmp2)\r\n      }\r\n      this.dimAndValueObject2.dimensionName = this.dimensionTmpName2.join(',')\r\n      this.dimAndValueObject2.dimensionValue = this.dimensionTmp2.join(',')\r\n      if(this.dimAndValueObject2.dimension != null && this.dimAndValueObject2.dimension != null\r\n          && (this.dimAndValueObject2.dimensionValue == null || this.dimAndValueObject2.dimensionValue == '')) {\r\n        this.errmsgDimV2=true;\r\n      } else{\r\n        this.errmsgDimV2=false;\r\n      }\r\n    },\r\n    handleDimValueClick3(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName3.push(data.categoryName)\r\n        this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3)\r\n        this.dimValueTmp3.push(data.id)\r\n        this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3)\r\n      }else{\r\n        this.dimValueTmpName3.splice(this.dimValueTmpName3.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName3 = this.uniqueArr(this.dimValueTmpName3)\r\n        this.dimValueTmp3.splice(this.dimValueTmp3.indexOf(data.id),1)\r\n        this.dimensionTmp3 = this.uniqueArr(this.dimValueTmp3)\r\n      }\r\n      this.dimAndValueObject3.dimensionName = this.dimensionTmpName3.join(',')\r\n      this.dimAndValueObject3.dimensionValue = this.dimensionTmp3.join(',')\r\n      if(this.dimAndValueObject3.dimension != null && this.dimAndValueObject3.dimension != null\r\n          && (this.dimAndValueObject3.dimensionValue == null || this.dimAndValueObject3.dimensionValue == '')) {\r\n        this.errmsgDimV3=true;\r\n      } else{\r\n        this.errmsgDimV3=false;\r\n      }\r\n    },\r\n    handleDimValueClick4(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName4.push(data.categoryName)\r\n        this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4)\r\n        this.dimValueTmp4.push(data.id)\r\n        this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4)\r\n      }else{\r\n        this.dimValueTmpName4.splice(this.dimValueTmpName4.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName4 = this.uniqueArr(this.dimValueTmpName4)\r\n        this.dimValueTmp4.splice(this.dimValueTmp4.indexOf(data.id),1)\r\n        this.dimensionTmp4 = this.uniqueArr(this.dimValueTmp4)\r\n      }\r\n      this.dimAndValueObject4.dimensionName = this.dimensionTmpName4.join(',')\r\n      this.dimAndValueObject4.dimensionValue = this.dimensionTmp4.join(',')\r\n      if(this.dimAndValueObject4.dimension != null && this.dimAndValueObject4.dimension != null\r\n          && (this.dimAndValueObject4.dimensionValue == null || this.dimAndValueObject4.dimensionValue == '')) {\r\n        this.errmsgDimV4=true;\r\n      } else{\r\n        this.errmsgDimV4=false;\r\n      }\r\n    },\r\n    handleDimValueClick5(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName5.push(data.categoryName)\r\n        this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5)\r\n        this.dimValueTmp5.push(data.id)\r\n        this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5)\r\n      }else{\r\n        this.dimValueTmpName5.splice(this.dimValueTmpName3.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName5 = this.uniqueArr(this.dimValueTmpName5)\r\n        this.dimValueTmp5.splice(this.dimValueTmp5.indexOf(data.id),1)\r\n        this.dimensionTmp5 = this.uniqueArr(this.dimValueTmp5)\r\n      }\r\n      this.dimAndValueObject5.dimensionName = this.dimensionTmpName5.join(',')\r\n      this.dimAndValueObject5.dimensionValue = this.dimensionTmp5.join(',')\r\n      if(this.dimAndValueObject5.dimension != null && this.dimAndValueObject5.dimension != null\r\n          && (this.dimAndValueObject5.dimensionValue == null || this.dimAndValueObject5.dimensionValue == '')) {\r\n        this.errmsgDimV5=true;\r\n      } else{\r\n        this.errmsgDimV5=false;\r\n      }\r\n    },\r\n    handleDimValueClick6(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName6.push(data.categoryName)\r\n        this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6)\r\n        this.dimValueTmp6.push(data.id)\r\n        this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6)\r\n      }else{\r\n        this.dimValueTmpName6.splice(this.dimValueTmpName6.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName6 = this.uniqueArr(this.dimValueTmpName6)\r\n        this.dimValueTmp6.splice(this.dimValueTmp6.indexOf(data.id),1)\r\n        this.dimensionTmp6 = this.uniqueArr(this.dimValueTmp6)\r\n      }\r\n      this.dimAndValueObject6.dimensionName = this.dimensionTmpName6.join(',')\r\n      this.dimAndValueObject6.dimensionValue = this.dimensionTmp6.join(',')\r\n      if(this.dimAndValueObject6.dimension != null && this.dimAndValueObject6.dimension != null\r\n          && (this.dimAndValueObject6.dimensionValue == null || this.dimAndValueObject6.dimensionValue == '')) {\r\n        this.errmsgDimV6=true;\r\n      } else{\r\n        this.errmsgDimV6=false;\r\n      }\r\n    },\r\n    handleDimValueClick7(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName7.push(data.categoryName)\r\n        this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7)\r\n        this.dimValueTmp7.push(data.id)\r\n        this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7)\r\n      }else{\r\n        this.dimValueTmpName7.splice(this.dimValueTmpName7.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName7 = this.uniqueArr(this.dimValueTmpName7)\r\n        this.dimValueTmp7.splice(this.dimValueTmp7.indexOf(data.id),1)\r\n        this.dimensionTmp7 = this.uniqueArr(this.dimValueTmp7)\r\n      }\r\n      this.dimAndValueObject7.dimensionName = this.dimensionTmpName7.join(',')\r\n      this.dimAndValueObject7.dimensionValue = this.dimensionTmp7.join(',')\r\n      if(this.dimAndValueObject7.dimension != null && this.dimAndValueObject7.dimension != null\r\n          && (this.dimAndValueObject7.dimensionValue == null || this.dimAndValueObject7.dimensionValue == '')) {\r\n        this.errmsgDimV7=true;\r\n      } else{\r\n        this.errmsgDimV7=false;\r\n      }\r\n    },\r\n    handleDimValueClick8(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName8.push(data.categoryName)\r\n        this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8)\r\n        this.dimValueTmp8.push(data.id)\r\n        this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8)\r\n      }else{\r\n        this.dimValueTmpName8.splice(this.dimValueTmpName8.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName8 = this.uniqueArr(this.dimValueTmpName8)\r\n        this.dimValueTmp8.splice(this.dimValueTmp8.indexOf(data.id),1)\r\n        this.dimensionTmp8 = this.uniqueArr(this.dimValueTmp8)\r\n      }\r\n      this.dimAndValueObject8.dimensionName = this.dimensionTmpName8.join(',')\r\n      this.dimAndValueObject8.dimensionValue = this.dimensionTmp8.join(',')\r\n      if(this.dimAndValueObject8.dimension != null && this.dimAndValueObject8.dimension != null\r\n          && (this.dimAndValueObject8.dimensionValue == null || this.dimAndValueObject8.dimensionValue == '')) {\r\n        this.errmsgDimV8=true;\r\n      } else{\r\n        this.errmsgDimV8=false;\r\n      }\r\n    },\r\n    handleDimValueClick9(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName9.push(data.categoryName)\r\n        this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9)\r\n        this.dimValueTmp9.push(data.id)\r\n        this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9)\r\n      }else{\r\n        this.dimValueTmpName9.splice(this.dimValueTmpName9.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName9 = this.uniqueArr(this.dimValueTmpName9)\r\n        this.dimValueTmp9.splice(this.dimValueTmp9.indexOf(data.id),1)\r\n        this.dimensionTmp9 = this.uniqueArr(this.dimValueTmp9)\r\n      }\r\n      this.dimAndValueObject9.dimensionName = this.dimensionTmpName9.join(',')\r\n      this.dimAndValueObject9.dimensionValue = this.dimensionTmp9.join(',')\r\n      if(this.dimAndValueObject9.dimension != null && this.dimAndValueObject9.dimension != null\r\n          && (this.dimAndValueObject9.dimensionValue == null || this.dimAndValueObject9.dimensionValue == '')) {\r\n        this.errmsgDimV9=true;\r\n      } else{\r\n        this.errmsgDimV9=false;\r\n      }\r\n    },\r\n    handleDimValueClick10(data, selected) {\r\n      if (selected == true) {\r\n        this.dimValueTmpName10.push(data.categoryName)\r\n        this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10)\r\n        this.dimValueTmp10.push(data.id)\r\n        this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10)\r\n      }else{\r\n        this.dimValueTmpName10.splice(this.dimValueTmpName10.indexOf(data.categoryName),1)\r\n        this.dimensionTmpName10 = this.uniqueArr(this.dimValueTmpName10)\r\n        this.dimValueTmp10.splice(this.dimValueTmp10.indexOf(data.id),1)\r\n        this.dimensionTmp10 = this.uniqueArr(this.dimValueTmp10)\r\n      }\r\n      this.dimAndValueObject10.dimensionName = this.dimensionTmpName10.join(',')\r\n      this.dimAndValueObject10.dimensionValue = this.dimensionTmp10.join(',')\r\n      if(this.dimAndValueObject10.dimension != null && this.dimAndValueObject10.dimension != null\r\n          && (this.dimAndValueObject10.dimensionValue == null || this.dimAndValueObject10.dimensionValue == '')) {\r\n        this.errmsgDimV10=true;\r\n      } else{\r\n        this.errmsgDimV10=false;\r\n      }\r\n    },\r\n    indInnerWarnValueBiggerClick() {\r\n      this.form.indInnerWarnFlg = '>'\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indInnerWarnValueBiggerEqualsClick() {\r\n      this.form.indInnerWarnFlg = '>='\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indInnerWarnValueEqualsClick() {\r\n      this.form.indInnerWarnFlg = '='\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indInnerWarnValueSmallerClick() {\r\n      this.form.indInnerWarnFlg = '<'\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indInnerWarnValueSmallerEqualsClick() {\r\n      this.form.indInnerWarnFlg = '<='\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indInnerWarnValueNotEqualsClick() {\r\n      this.form.indInnerWarnFlg = '≠'\r\n      this.errmsgInnerWarning = false;\r\n    },\r\n    indMonWarnValueBiggerClick() {\r\n      this.form.indMonWarnFlg = '>'\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    indMonWarnValueBiggerEqualsClick() {\r\n      this.form.indMonWarnFlg = '>='\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    indMonWarnValueEqualsClick() {\r\n      this.form.indMonWarnFlg = '='\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    indMonWarnValueSmallerClick() {\r\n      this.form.indMonWarnFlg = '<'\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    indMonWarnValueSmallerEqualsClick() {\r\n      this.form.indMonWarnFlg = '<='\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    indMonWarnValueNotEqualsClick() {\r\n      this.form.indMonWarnFlg = '≠'\r\n      this.errmsgMonWarning = false;\r\n    },\r\n    //修改按钮弹框\r\n    modifyInd(data) {\r\n\r\n    },\r\n    async getCategoryName(row) {\r\n      if (row.indFirstType == null) {\r\n        return '未知分类'\r\n      }\r\n      let res = await crudIndCategory.getCategoryName(row.indFirstType);\r\n      if(res.code == 0) {\r\n        return res.data;\r\n      }\r\n      return '未知分类';\r\n      /*.then(res => {\r\n        if(res.code == 0) {\r\n          return res.data+\"ccc\";\r\n        }\r\n        return '未知分类';\r\n      })*/\r\n      //return '未知分类'\r\n    },\r\n    getDepts() {\r\n      getDepts({ enabled: true }).then(res => {\r\n        this.depts = res.content\r\n      })\r\n    },\r\n    openEdit(row) {\r\n      let id = row.id;\r\n      checkRef(id).then(res => {\r\n        if(res.code == 0) {\r\n          if (res.data) {\r\n            this.$notify({\r\n              title: '该指标已被引用，不能修改！',\r\n              type: 'error',\r\n              duration: 2500\r\n            });\r\n            return;\r\n          }\r\n          this.crud.toEdit(row)\r\n        }\r\n      });\r\n    },\r\n    delAtom(row) {\r\n      checkRef(row.id).then(res => {\r\n        if(res.code == 0) {\r\n          if(res.data == false) {\r\n            if(row.indVerifyStatus == \"2\") {\r\n              this.$notify({\r\n                title: '审批中的指标不能删除',\r\n                type: 'warning',\r\n                duration: 2500\r\n              })\r\n              return\r\n            }\r\n            if(row.indDeployStatus == \"2\") { //已发布\r\n              this.$confirm('该指标已发布，确认废止?', '废止指标', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n              }).then(() => {\r\n                abolish(row.id).then(res => {\r\n                  if(res.code == 0) {\r\n                    this.$notify({\r\n                      title: '指标废止成功',\r\n                      type: 'success',\r\n                      duration: 2500\r\n                    })\r\n                  } else {\r\n                    this.$notify({\r\n                      title: '指标废止失败',\r\n                      type: 'error',\r\n                      duration: 2500\r\n                    })\r\n                  }\r\n                  this.crud.refresh();\r\n                })\r\n              }).catch(() => {})\r\n            } else if(row.indDeployStatus == \"1\") {//未发布\r\n              this.$confirm('请确认是否删除?', '删除指标', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n              }).then(() => {\r\n                defaultCrud.delAllLoading = true\r\n                delAtom(row.id).then(res => {\r\n                  if(res.code == 0) {\r\n                    this.$notify({\r\n                      title: '指标删除成功',\r\n                      type: 'success',\r\n                      duration: 2500\r\n                    })\r\n                  } else {\r\n                    this.$notify({\r\n                      title: '指标删除失败',\r\n                      type: 'error',\r\n                      duration: 2500\r\n                    })\r\n                  }\r\n                  this.crud.refresh();\r\n                })\r\n              }).catch(() => {})\r\n            } else if(row.indDeployStatus == \"3\") {//已废止\r\n              this.$alert('已废止指标，不能删除','删除指标');\r\n            }\r\n          } else {\r\n            this.$notify({title: '该指标已被引用，不能删除或废止！',type: 'error',duration: 2500})\r\n            return;\r\n          }\r\n        }\r\n      })\r\n    },\r\n    submitForm() {\r\n      this.crud.form.submitType = 1\r\n      this.crud.submitCU()\r\n    },\r\n    submitAndStartProcess() {\r\n      this.crud.form.submitType = 2\r\n      this.crud.submitCU()\r\n    },\r\n    endsWithStr(indDefRuleStr) {\r\n      return indDefRuleStr.trim().endsWith(\"+\") || indDefRuleStr.trim().endsWith(\"-\")\r\n          || indDefRuleStr.trim().endsWith(\"×\") || indDefRuleStr.trim().endsWith(\"/\");\r\n    },\r\n    beginWithStr(indDefRuleStr) {\r\n      return indDefRuleStr.trim().indexOf(\"+\")==1 || indDefRuleStr.trim().indexOf(\"-\")==1\r\n          || indDefRuleStr.trim().indexOf(\"×\")==1 || indDefRuleStr.trim().indexOf(\"/\")==1;\r\n    },\r\n    clearRuleVal() {\r\n      this.indDefRuleStr ='';\r\n      this.indDefRuleVal ='';\r\n      this.indDefRuleId ='';\r\n      this.form.indDefRuleStr='';\r\n      this.form.indDefRuleVal='';\r\n      this.form.indDefRuleId='';\r\n      //this.hasCalc = true;\r\n      this.rules.indDefRule.required = true\r\n    },\r\n    checkWarning(val,type) {\r\n      if(type == 'inner') {\r\n        if(val != null && (this.form.indInnerWarnFlg == null || this.form.indInnerWarnFlg == '')) {\r\n          //this.$notify({title: '请选择运算符！',type: 'error',duration: 2500})\r\n          this.errmsgInnerWarning = true;\r\n        } else {\r\n          this.errmsgInnerWarning = false;\r\n        }\r\n      } else {\r\n        if(val != null && (this.form.indMonWarnFlg == null || this.form.indMonWarnFlg == '')) {\r\n          this.errmsgMonWarning = true;\r\n        } else {\r\n          this.errmsgMonWarning = false;\r\n        }\r\n      }\r\n    },\r\n    closeDialog() {\r\n      this.selectAtomDialog = false\r\n    },\r\n    confirmAtom(rows){\r\n      console.log(rows)\r\n      if(rows == null || rows.length == 0) {\r\n        this.crud.notify('请选择要添加的指标', CRUD.NOTIFICATION_TYPE.ERROR)\r\n        return;\r\n      }\r\n      console.log(this.myCategoryId)\r\n      let ids = '';\r\n      for (const row of rows) {\r\n        ids += row.id + \",\";\r\n      }\r\n      addIndToSelfCategory(ids,this.myCategoryId).then(res => {\r\n        if(res.code == 0) {\r\n          this.crud.notify('添加成功', CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n          this.$emit('refreshList');\r\n          this.selectAtomDialog = false\r\n        } else {\r\n          this.crud.notify('添加失败', CRUD.NOTIFICATION_TYPE.ERROR)\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n",null]}