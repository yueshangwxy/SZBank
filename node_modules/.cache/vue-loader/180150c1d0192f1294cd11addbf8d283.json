{"remainingRequest":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\dataServicePlatform\\applyForApp.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\dataServicePlatform\\applyForApp.vue","mtime":1654824275283},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: \"应用申请\",\r\n      editPage: false,\r\n      labelPosition: \"top\",\r\n      ruleForm: {\r\n        appName: \"\",\r\n        appCode: \"\",\r\n        description: \"\",\r\n        status: \"\",\r\n        appKey: \"\",\r\n        appSecret: \"\",\r\n      },\r\n      rules: {\r\n        appName: [\r\n          { required: true, message: \"请输入应用名称\", trigger: \"blur\" },\r\n        ],\r\n        appCode: [\r\n          { required: true, message: \"请输入应用Code\", trigger: \"blur\" },\r\n        ],\r\n        description: [\r\n          { required: true, message: \"请输入描述\", trigger: \"blur\" },\r\n        ],\r\n        appKey: [{ required: true, message: \"请输入appKey\", trigger: \"blur\" }],\r\n        appSecret: [\r\n          { required: true, message: \"请输入appSecret\", trigger: \"blur\" },\r\n        ],\r\n        status: [{ required: true, message: \"请选择状态\", trigger: \"change\" }],\r\n      },\r\n      appCode: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n  },\r\n  // beforeRouteLeave(to, from, next) {\r\n  //   if (to.name === \"appManagement\") {\r\n  //     this.$store.commit(\"SET_KEEPALIVE\", true);\r\n  //   } else {\r\n  //     this.$store.commit(\"SET_KEEPALIVE\", false);\r\n  //   }\r\n  //   next();\r\n  // },\r\n  // watch: {\r\n  //   $route(e) {\r\n  //     if (e.name === \"applyForApp\") {\r\n  //       this.initData();\r\n  //     }\r\n  //   },\r\n  // },\r\n  methods: {\r\n    initData() {\r\n      this.editPage = this.$route.name === \"editApp\" ? true : false;\r\n      if (this.editPage) {\r\n        this.title = this.$route.meta.title;\r\n      }\r\n      this.appCode = this.$route.query.appCode ? this.$route.query.appCode : \"\";\r\n      console.log(this.$route);\r\n      if (this.$route.name === \"editApp\") {\r\n        this.$api\r\n          .viewAppDetail({\r\n            appCode: this.appCode,\r\n          })\r\n          .then((res) => {\r\n            console.log(res, \"yyyy\");\r\n            this.ruleForm = res.data;\r\n          });\r\n      }\r\n    },\r\n    // 取消\r\n    cancel() {\r\n      console.log(\"取消\");\r\n      let currentView = this.$store.state.tagsView.visitedViews[0];\r\n      for (currentView of this.$store.state.tagsView.visitedViews) {\r\n        if (currentView.path === this.$route.path) {\r\n          break;\r\n        }\r\n      }\r\n      this.$store.dispatch(\"tagsView/delView\", currentView).then(() => {\r\n        this.$router.push({\r\n          path: \"/dataServicePlatform/appManagement\",\r\n        });\r\n      });\r\n    },\r\n    // 提交申请\r\n    submitApplication() {\r\n      console.log(\"提交申请\");\r\n      console.log(this.ruleForm);\r\n      this.$refs.ruleForm.validate((valid) => {\r\n        if (valid) {\r\n          this.$api.applyForApp(this.ruleForm).then((res) => {\r\n            if (res.code == 0 || res.code == 200) {\r\n              this.$message.success(res.msg);\r\n              this.cancel();\r\n            } else {\r\n              this.$message.error(res.msg);\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 确认更新\r\n    confirmModify() {\r\n      console.log(\"确定修改\");\r\n      console.log(this.ruleForm);\r\n      this.$refs.ruleForm.validate((valid) => {\r\n        if (valid) {\r\n          this.$api.updateApp(this.ruleForm).then((res) => {\r\n            if (res.code == 0 || res.code == 200) {\r\n              this.$message.success(res.msg);\r\n              this.cancel();\r\n            } else {\r\n              this.$message.error(res.msg);\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n",null]}