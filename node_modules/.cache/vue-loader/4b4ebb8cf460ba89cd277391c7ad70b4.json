{"remainingRequest":"D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\src\\views\\indicators\\parameter\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\src\\views\\indicators\\parameter\\index.vue","mtime":1608778062000},{"path":"D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace-suzhouzhibiao\\Indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudIndParameter from '../../../api/indicators/indParameter'\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\nimport category from '../category/category'\n\n// crud交由presenter持有\nconst defaultCrud = CRUD({ title: '参数', url: crudIndParameter.url, sort: 'id,desc', crudMethod: { ...crudIndParameter.method }})\nconst defaultForm = { id: null, categoryId: null, parmCode: null, parmName: null, parmType: null, parmValue: null, parmDesc: null, status: '1', crtUserCode: null, crtOrgCode: null, crtDate: null, updUserCode: null, updOrgCode: null, updDate: null }\nconst moment = require('moment')\nexport default {\n  name: 'IndParameter',\n  components: { pagination, crudOperation, rrOperation, udOperation, category },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  dicts: ['STATUS', 'PARM_TYPE'],\n  data() {\n    return {\n      table: {\n        columns: {\n          id: 'hidden'\n        }\n      },\n      permission: {\n        add: ['admin', 'indParameter:add'],\n        edit: ['admin', 'indParameter:edit'],\n        del: ['admin', 'indParameter:del']\n      },\n      rules: {\n        parmName: [\n          { required: true, message: '参数名称不能为空', trigger: 'blur' }\n        ],\n        parmType: [\n          { required: true, message: '参数值类型不能为空', trigger: 'blur' }\n        ],\n        parmValue: [\n          { required: true, message: '参数值不能为空', trigger: 'blur' }\n        ],\n        status: [\n          { required: true, message: '状态不能为空', trigger: 'blur' }\n        ]\n      }\n      }\n  },\n  methods: {\n    // 获取数据前设置好接口地址\n    [CRUD.HOOK.beforeRefresh]() {\n      return true\n    },\n    [CRUD.HOOK.beforeToAdd]() {\n      if (!this.form.categoryId) {\n        this.crud.notify('请选择分类', CRUD.NOTIFICATION_TYPE.ERROR)\n        return false\n      }\n      if (this.form.categoryId == '0') {\n        this.crud.notify('根节点不能添加', CRUD.NOTIFICATION_TYPE.ERROR)\n        return false\n      }\n    },\n    [CRUD.HOOK.beforeSubmit]() {\n      if (this.form.parmType === 'Number') {\n        const num = this.form.parmValue\n        if ((num.indexOf(' ') !== -1) || isNaN(num)) {\n          this.$message.error({\n            message: '参数值格式不正确,请输入数字'\n          })\n          return false\n        }\n      }\n    },\n    handleCategoryClick(data) {\n      // console.log(\"========handleCategoryClick====>\",data)\n      this.crud.form.categoryId = data.id\n      this.crud.query.categoryIds = data.childrenIds\n      this.form.categoryId = data.id\n      this.crud.refresh()\n    },\n    dateFormat(row) {\n        // return moment(row.crtDate).format('YYYY-MM-DD');\n        return moment(row.crtDate).format('YYYY-MM-DD HH:mm:ss')\n    }\n  }\n}\n",null]}