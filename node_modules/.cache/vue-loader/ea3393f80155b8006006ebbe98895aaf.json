{"remainingRequest":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\approve\\checkApproves.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\src\\views\\indicators\\indicator\\approve\\checkApproves.vue","mtime":1644369310591},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\工作\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { updateStatus } from '../../../../api/indicators/indIndicatorInfo'\nexport default {\n  dicts: ['IE_PROP', 'IE_TYPE', 'IE_METHOD', 'CALC_FREQ', 'IE_STATUS', 'IE_DATA_UNIT', 'RETENTION'],\n  data() {\n    return {\n      approveDialog: false,\n      title: '',\n      form: {},\n      param: []\n    }\n  },\n  methods: {\n    checkApprove(status) {\n      // 审批拒绝必须输入审批意见\n      if (status == 3) {\n        if (this.form.approvalOpinion == null || this.form.approvalOpinion.trim() == '') {\n          this.$message.error({\n            message: '审批拒绝必须输入审批意见'\n          })\n          return false\n        }\n      }\n      // 审批通过时判断原先状态进行状态修改\n      if (status === 2) {\n        console.log(status)\n        console.log(this.form.status)\n        if (this.form.status == 1) {\n          status = 11\n        }\n        if (this.form.status == 11) {\n          status = 2\n        }\n        if (this.form.status == 2) {\n          status = 4\n        }\n        if (this.form.status == 4) {\n          status = 5\n        }\n      }\n      this.$confirm(`确定审批所选数据吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const reqParam = []\n        for (let i = 0; i < this.param.length; i++) {\n          console.log(status)\n          const indIndicatorInfo = {\n            'id': this.param[i].id,\n            'status': status,\n            'approvalOpinion': this.form.approvalOpinion\n          }\n          reqParam.push(indIndicatorInfo)\n        }\n        updateStatus(reqParam).then(returnData => {\n          if (returnData.code === 0) {\n            this.$message.success({\n              message: '操作成功!'\n            })\n            this.approveDialog = false\n            this.$parent.crud.toQuery()\n          } else {\n            this.$message.error({\n              message: '操作失败!错误原因:' + returnData.msg\n            })\n            this.approveDialog = false\n          }\n        })\n      })\n    }\n  }\n}\n\n",null]}