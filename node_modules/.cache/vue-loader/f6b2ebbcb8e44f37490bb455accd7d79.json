{"remainingRequest":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\myProcess\\pendingMyApproval.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\myProcess\\pendingMyApproval.vue","mtime":1652778661871},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'PendingMyApproval',\r\n    data() {\r\n        return {\r\n            searchInput: '',\r\n            dept: '',\r\n            status: '',\r\n            dateValue: '',\r\n            startTime: '',\r\n            endTime: '',\r\n            // 表格\r\n            tableData: [],\r\n            propList: [],\r\n            // 分页\r\n            pageSize: 9,\r\n            currentPage: 1,\r\n            total: 50,\r\n            // 部门树\r\n            deptTreeList: [],\r\n        }\r\n    },\r\n    watch: {\r\n        dateValue(val) {\r\n            if(val) {\r\n                this.startTime = this.$formatDate(val[0])\r\n                this.endTime = this.$formatDate(val[1]) \r\n            } else {\r\n                this.startTime = ''\r\n                this.endTime = ''\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.propList = [\r\n            {\r\n                prop: 'PROC_INST_ID',\r\n                label: '申请编号',\r\n            },\r\n            {\r\n                prop: 'NAME',\r\n                label: '申请名称',\r\n            },\r\n            {\r\n                prop: 'DEPT_NAME',\r\n                label: '申请部门',\r\n            },\r\n            {\r\n                prop: 'CRT_USER',\r\n                label: '申请人',\r\n            },\r\n            {\r\n                prop: 'CRT_DATE',\r\n                label: '申请时间',\r\n            },\r\n            {\r\n                prop: 'STATUS_DESC',\r\n                label: '申请状态',\r\n                type: 'tag',\r\n            },\r\n        ]\r\n        // 部门树\r\n        this.$api.getDeptTree({}).then(res => {\r\n            this.deptTreeList = res.data\r\n        })\r\n        this.queryList()\r\n    },\r\n    methods: {\r\n        // 分页\r\n        handleCurrentChange(val) {\r\n            console.log(`当前页: ${val}`);\r\n            this.currentPage = val\r\n            this.queryList()\r\n        },\r\n        // 列表查询\r\n        queryList() {\r\n            let request = {\r\n                page: String(this.currentPage),\r\n                size: String(this.pageSize),\r\n                deptCode: this.dept,\r\n                name: this.searchInput,\r\n                crtDateBeg: this.startTime,\r\n                crtDateEnd: this.endTime,\r\n            }\r\n            console.log(request);\r\n            this.$api.waitApprove(request).then(res => {\r\n                console.log(res);\r\n                let data = res.data\r\n                this.tableData = data.records\r\n                this.total = data.total\r\n            })\r\n        },    \r\n        // 详情查看\r\n        viewDetails(row) {\r\n            console.log('详情查看',row.tableId);\r\n            this.$router.push({\r\n                path: '/detailsView/table',\r\n                query: {\r\n                    id: row.tableId\r\n                }\r\n            })\r\n        },\r\n        // 通过\r\n        approve(row) {\r\n            console.log('通过',row.TASK_ID);\r\n            this.$api.completeTask({\r\n                taskId: row.TASK_ID,\r\n                submitType: '0',\r\n                assignee: '',\r\n                apprComment: '',\r\n            }).then(res => {\r\n                if(res.code==0 || res.code==200) {\r\n                    this.$message.success(res.msg)\r\n                    this.queryList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            })\r\n        },\r\n        // 拒绝\r\n        reject(row) {\r\n            console.log('拒绝',row.TASK_ID);\r\n            this.$api.completeTask({\r\n                taskId: row.TASK_ID,\r\n                submitType: '1',\r\n                assignee: '',\r\n                apprComment: '',\r\n            }).then(res => {\r\n                if(res.code==0 || res.code==200) {\r\n                    this.$message.success(res.msg)\r\n                    this.queryList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            })\r\n        },\r\n    },\r\n\r\n}\r\n",null]}