{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\searchPage\\searchPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\searchPage\\searchPage.vue","mtime":1650446297332},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {getTree} from \"../../../api/searchPage/assetsClassify\";\r\nimport {getListByKeywords,getListByClassify,getDetail} from '../../../api/searchPage/es'\r\n    export default {\r\n        name: 'SearchPage',\r\n        props: {\r\n            testData: {\r\n                type: Array\r\n            }\r\n        },\r\n        components: {},\r\n        data() {\r\n            return {\r\n                // 树形控件\r\n                filterText: '',\r\n                defaultProps: {\r\n                    id:'id',\r\n                    children: 'children',\r\n                    label: 'name'\r\n                },\r\n                treeData: [],\r\n                // searchInput: '',\r\n                assetType:'',\r\n                // activeType: 'all',\r\n                /* filterList: [],\r\n                filterTable: [\r\n                    {value: 1,label: '目录层级1'},\r\n                    {value: 2,label: '目录层级2'},\r\n                    {value: 3,label: '目录层级3'},\r\n                    {value: 4,label: '所属系统'},\r\n                    {value: 5,label: '存储项目名称'},\r\n                ],\r\n                filterAPI: [\r\n                    {value: 1,label: '归属应用'},\r\n                    {value: 2,label: '目录层级1'},\r\n                    {value: 3,label: '目录层级2'},\r\n                    {value: 4,label: '目录层级3'},\r\n                    {value: 5,label: '底层存储类型'},\r\n                ],\r\n                filterTarget: [\r\n                    {value: 1,label: '指标一级分类'},\r\n                    {value: 2,label: '指标二级分类'},\r\n                    {value: 3,label: '指标类型'},\r\n                    {value: 4,label: '属主部门'},\r\n                ],\r\n                filterTag: [\r\n                    {value: 1,label: '标签所属内部机构'},\r\n                    {value: 2,label: '标签分类名称'},\r\n                    {value: 3,label: '标签适用对象'},\r\n                    {value: 4,label: '标签来源'},\r\n                ], */\r\n                tableData: [],\r\n                allList: [],\r\n                tableList: [],\r\n                targetList: [],\r\n                labelList: [],\r\n                apiList: [],\r\n                // 分页\r\n                pageSize: 10,\r\n                currentPage: 1,\r\n                total: 50,\r\n            }\r\n        },\r\n        watch: {\r\n            /* activeType(val) {\r\n                if(val==='all') {\r\n\r\n                } else if(val==='table') {\r\n                    this.filterList = this.filterTable\r\n                } else if(val==='API') {\r\n                    this.filterList = this.filterAPI\r\n                } else if(val==='target') {\r\n                    this.filterList = this.filterTarget\r\n                } else if(val==='tag') {\r\n                    this.filterList = this.filterTag\r\n                }\r\n            } */\r\n            filterText(val) {\r\n                this.$refs.tree.filter(val);\r\n            },\r\n            testData(val){\r\n                console.log(val);\r\n                this.tableList = val\r\n            },\r\n        },\r\n        created() {\r\n            getTree(\"api\").then(data =>{\r\n                // console.log(\"11111111111111\"+JSON.stringify(data))\r\n                this.treeData = data\r\n            })\r\n        },\r\n        mounted() {\r\n            this.queryList()\r\n        },\r\n        computed: {},\r\n        methods: {\r\n            //查询列表\r\n            queryList(val) {\r\n                const parm ={\r\n                    \"keywords\":val,\r\n                    \"page\":1,\r\n                    \"size\":10,\r\n                    \"assetType\":'0'\r\n                }\r\n                this.assetType ='0'\r\n                getListByKeywords(parm).then(data =>{\r\n                    this.tableData = data.obj,\r\n                    this.allList = data.obj,\r\n                    this.tableList = data.tableList,\r\n                    this.targetList = data.targetList,\r\n                    this.labelList = data.labelList,\r\n                    this.apiList = data.apiList\r\n                    // console.log(\"obj\"+JSON.stringify(data.obj))\r\n                    // console.log(\"obj\"+JSON.stringify(data))\r\n                    // console.log(\"count\"+JSON.stringify(data.count))\r\n                })\r\n            },\r\n            // 节点过滤\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.name.indexOf(value.toString()) !== -1;\r\n            },\r\n            // 节点点击\r\n            handleNodeClick(data) {\r\n                this.$emit('changeLevel',data)\r\n                console.log(data);\r\n                const param ={\r\n                    \"page\":this.currentPage,\r\n                    \"size\":this.pageSize,\r\n                    \"assetType\":'0',\r\n                    \"obj\":data\r\n                }\r\n                getListByClassify(param).then(data =>{\r\n                    this.total = data.count.api\r\n                    this.tableList = data.obj\r\n                })\r\n            },\r\n            //查看详情\r\n            toDetail(item){\r\n                console.log(\"=============\"+item.assetType)\r\n                const parm ={\r\n                    \"item\":item\r\n                }\r\n                getDetail(parm).then(data =>{\r\n\r\n                })\r\n\r\n                },\r\n            handleClick(tab,event) {\r\n                console.log(\"=====\"+tab.name)\r\n                if(tab.name == 'all'){\r\n                    this.tableData = this.allList\r\n                }else if (tab.name == 'table'){\r\n                    this.tableData = this.tableList\r\n                }else if (tab.name == 'target'){\r\n                    this.tableData = this.targetList\r\n                }else if(tab.name == 'tag'){\r\n                    this.tableData = this.labelList\r\n                }else if(tab.name == 'API'){\r\n                    this.tableData = this.apiList\r\n                }\r\n                console.log(this.assetType);\r\n            },\r\n            // 分页\r\n            handleSizeChange(val) {\r\n                console.log(`每页 ${val} 条`);\r\n                /* this.pageSize = val;\r\n                this.currentPage =1\r\n                if(this.nodeData !==undefined &&  Object.keys(this.nodeData).length > 0){\r\n                    const param ={\r\n                        \"page\":this.currentPage,\r\n                        \"size\":this.pageSize,\r\n                        \"assetType\":'label',\r\n                        \"obj\":this.nodeData\r\n                    }\r\n                    getListByClassify(param).then(data =>{\r\n                        this.total = data.count.tag\r\n                        this.tableList = data.obj\r\n                    })\r\n                }else {\r\n\r\n                    const param = {\r\n                        \"keywords\": '',\r\n                        \"page\": this.currentPage,\r\n                        \"size\": this.pageSize,\r\n                        \"assetType\": 'label'\r\n                    }\r\n                    this.getListByKeywords(param);\r\n                } */\r\n            },\r\n            handleCurrentChange(val) {\r\n                console.log(`当前页: ${val}`);\r\n                /* this.currentPage = val\r\n                if(this.nodeData !==undefined && Object.keys(this.nodeData).length > 0){\r\n                    const param ={\r\n                        \"page\":this.currentPage,\r\n                        \"size\":this.pageSize,\r\n                        \"assetType\":'label',\r\n                        \"obj\":this.nodeData\r\n                    }\r\n                    getListByClassify(param).then(data =>{\r\n                        this.total = data.count.tag\r\n                        this.tableList = data.obj\r\n                    })\r\n                }else {\r\n\r\n                    const param = {\r\n                        \"keywords\": '',\r\n                        \"page\": this.currentPage,\r\n                        \"size\": this.pageSize,\r\n                        \"assetType\": 'label'\r\n                    }\r\n                    this.getListByKeywords(param);\r\n                } */\r\n            }\r\n        }\r\n    }\r\n",null]}