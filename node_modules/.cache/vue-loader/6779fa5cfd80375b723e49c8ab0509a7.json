{"remainingRequest":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\eladmin-common\\src\\views\\generator\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\eladmin-common\\src\\views\\generator\\index.vue","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Evicce\\Desktop\\work\\code2\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {generator, sync} from '../../api/generator/generator'\nimport {downloadFile} from '../../utils/index'\nimport CRUD, {presenter, header} from '../../components/Crud/crud'\nimport rrOperation from '../../components/Crud/RR.operation'\nimport crudOperation from '../../components/Crud/CRUD.operation'\nimport pagination from '../../components/Crud/Pagination'\n\n// crud交由presenter持有\nconst defaultCrud = CRUD({url: 'api/generator/tables'})\nexport default {\n  name: 'GeneratorIndex',\n  components: {pagination, crudOperation, rrOperation},\n  mixins: [presenter(defaultCrud), header()],\n  data() {\n    return {\n      syncLoading: false\n    }\n  },\n  created() {\n    console.log('=====router>>', this.$router)\n    this.crud.optShow = {add: false, edit: false, del: false, download: false}\n  },\n  methods: {\n    toGen(tableName) {\n      // 生成代码\n      generator(tableName, 0).then(data => {\n        this.$notify({\n          title: '生成成功',\n          type: 'success',\n          duration: 2500\n        })\n      })\n    },\n    toDownload(tableName) {\n      // 打包下载\n      generator(tableName, 2).then(data => {\n        downloadFile(data, tableName, 'zip')\n      })\n    },\n    sync() {\n      const tables = []\n      this.crud.selections.forEach(val => {\n        tables.push(val.tableName)\n      })\n      this.syncLoading = true\n      sync(tables).then(() => {\n        this.crud.refresh()\n        this.crud.notify('同步成功', CRUD.NOTIFICATION_TYPE.SUCCESS)\n        this.syncLoading = false\n      }).then(() => {\n        this.syncLoading = false\n      })\n    }\n  }\n}\n",null]}