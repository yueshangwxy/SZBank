{"remainingRequest":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\targetPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\targetPage.vue","mtime":1650772058567},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650772030306},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650772056629}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import {getTree} from \"../../../api/searchPage/assetsClassify\";\n    import {getListByKeywords, getListByClassify, getDetail} from \"../../../api/searchPage/es\";\n\n    export default {\n        name: 'TargetPage',\n        props: {\n            testData: {\n                type: Array\n            }\n        },\n        data() {\n            return {\n                filterText: '',\n                defaultProps: {\n                    id:'id',\n                    children: 'children',\n                    label: 'name'\n                },\n                // 筛选\n                filterForm: {\n                    input1: '',\n                    input2: '',\n                    input3: '',\n                    input4: '',\n                    input5: '',\n                    input6: '',\n                },\n                treeData: [],\n                // 表格\n                tableList: [],\n                // 分页\n                pageSize: 10,\n                currentPage: 1,\n                total: 50,\n                // 详情查看\n                detailsShow: false,\n                details: {},\n            }\n        },\n        watch: {\n            testData(val){\n                console.log(val);\n                this.tableList = val\n            },\n            filterText(val) {\n                this.$refs.tree.filter(val);\n            },\n        },\n        created() {\n/*            this.$api.qryTreeData({}).then(res => {\n                let data = res.data\n                this.treeData = data.targetTree\n            })*/\n            getTree(\"target\").then(data =>{\n                this.treeData = data\n            })\n        },\n        mounted() {\n            const param ={\n                \"keywords\":'',\n                \"page\":this.currentPage,\n                \"size\":this.pageSize,\n                \"assetType\":'target'\n            }\n            this.getListByKeywords(param);\n        },\n        methods: {\n            getListByKeywords(param){\n                getListByKeywords(param).then(data =>{\n                    this.total = data.count.target\n                    this.tableList = data.targetList\n                    console.log(\"obj\"+JSON.stringify(data.obj))\n                    console.log(\"count\"+JSON.stringify(data.count))\n                })\n            },\n            // 节点过滤\n            filterNode(value, data) {\n                if (!value) return true;\n                return data.name.indexOf(value) !== -1;\n            },\n            // 节点点击\n            handleNodeClick(data) {\n                this.$emit('changeLevel',data)\n                console.log(data);\n                const param ={\n                    \"page\":this.currentPage,\n                    \"size\":this.pageSize,\n                    \"assetType\":'target',\n                    \"obj\":data\n                }\n                getListByClassify(param).then(data =>{\n                    this.total = data.count.target\n                    this.tableList = data.obj\n                })\n            },\n            // 搜索\n            /* doSubmit(){\n                const  param ={\n                    \"keywords\":'',\n                    \"page\":this.currentPage,\n                    \"size\":this.pageSize,\n                    \"assetType\":'target',\n                    \"searchList\" :this.filterForm\n                }\n                this.getListByKeywords(param)\n            }, */\n            // 重置 \n            /* reset() {\n                const param ={\n                    \"keywords\":'',\n                    \"page\":this.currentPage,\n                    \"size\":this.pageSize,\n                    \"assetType\":'target'\n                }\n                this.getListByKeywords(param);\n                this.filterForm = {}\n            }, */\n            // 按钮   --- 详情查看\n            detailView(item) {\n                const param ={\n                    \"assetType\":'target',\n                    \"item\":item\n                }\n                getDetail(param).then(data =>{\n                    if(data.code == '200'){\n                        this.details = data.data\n                        console.log(JSON.stringify(data))\n                        this.detailsShow = true\n                    }else {\n                        this.$message({\n                            message: data.msg,\n                            type: 'error'\n                        });\n                    }\n\n\n                })\n            },\n            // 分页\n            handleSizeChange(val) {\n                console.log(`每页 ${val} 条`);\n                this.pageSize = val;\n                this.currentPage =1\n                this.filterForm = {}\n                if(this.nodeData !==undefined &&  Object.keys(this.nodeData).length > 0){\n                    const param ={\n                        \"page\":this.currentPage,\n                        \"size\":this.pageSize,\n                        \"assetType\":'target',\n                        \"obj\":this.nodeData\n                    }\n                    getListByClassify(param).then(data =>{\n                        this.total = data.count.target\n                        this.tableList = data.obj\n                    })\n                }else {\n\n                    const param = {\n                        \"keywords\": '',\n                        \"page\": this.currentPage,\n                        \"size\": this.pageSize,\n                        \"assetType\": 'target'\n                    }\n                    this.getListByKeywords(param);\n                }\n            },\n            handleCurrentChange(val) {\n                console.log(`当前页: ${val}`);\n                this.currentPage = val\n                if(this.nodeData !==undefined && Object.keys(this.nodeData).length > 0){\n                    const param ={\n                        \"page\":this.currentPage,\n                        \"size\":this.pageSize,\n                        \"assetType\":'target',\n                        \"obj\":this.nodeData\n                    }\n                    getListByClassify(param).then(data =>{\n                        this.total = data.count.target\n                        this.tableList = data.obj\n                    })\n                }else {\n                    const param = {\n                        \"keywords\": '',\n                        \"page\": this.currentPage,\n                        \"size\": this.pageSize,\n                        \"assetType\": 'target'\n                    }\n                    this.getListByKeywords(param);\n                }\n            }\n        },\n    }\n",null]}