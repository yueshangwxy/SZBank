{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\myAPI.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\dataServicePlatform\\myAPI.vue","mtime":1650418887714},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n// import {getApiInfo, getApiPowerInfo} from \"@/api/dataservice/myApi/myApi\";\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"MyApi\",\r\n  data() {\r\n    return {\r\n      editForm: {},\r\n      tableData: [],\r\n      queryForm: {\r\n        id: '',\r\n        status: '',\r\n        size: 10,\r\n        page: 1,\r\n        total: 0,\r\n        pages: 0,\r\n        apiType: '',\r\n      },\r\n      loading: true,\r\n      editDialogVisible: false,\r\n      applyApiServiceForm: {\r\n        apiName: \"\",\r\n        caliber: \"\",\r\n        parameters: [\r\n          {\r\n            parameterName: \"\",\r\n            parameterType: \"\",\r\n          },\r\n        ],\r\n\r\n      },\r\n      tableData2: [],\r\n      applyRules: [\r\n        {\r\n          required: true,\r\n          message: \"请输入名称\",\r\n          trigger: [\"blur\", \"change\"],\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    resetQueryForm() {\r\n      this.queryForm.apiType = '';\r\n      this.queryForm.id = '';\r\n      this.queryForm.status = '';\r\n      this.queryForm.page = 1;\r\n      this.queryForm.size = 10;\r\n      this.queryPageList();\r\n    },\r\n    handleEdit(index, row) {\r\n      this.editDialogVisible = true;\r\n      this.editForm = row\r\n      console.log(index);\r\n      console.log(row);\r\n    },\r\n    handleCloseEdit() {\r\n      this.editDialogVisible = false;\r\n    },\r\n    addParameter() {\r\n      this.applyApiServiceForm.parameters.push({\r\n        parameterName: \"\",\r\n        parameterType: \"\",\r\n      });\r\n    },\r\n    removeParameter(index) {\r\n      console.log(index);\r\n      this.applyApiServiceForm.parameters.splice(index, 1);\r\n    },\r\n    handleResetParameters() {\r\n      this.applyApiServiceForm.parameters = [\r\n        {\r\n          parameterName: \"\",\r\n          parameterType: \"\",\r\n        },\r\n      ];\r\n      this.applyApiServiceForm.apiName = \"\";\r\n      this.applyApiServiceForm.caliber = \"\";\r\n    },\r\n    handleConfirmApply() {\r\n\r\n      this.$refs['editFormRef'].validate((valid) => {\r\n        if (valid) {\r\n          request({\r\n            url: '/dataApi/apiApplyInfo',\r\n            method: 'put',\r\n            data: {\r\n              ...this.editForm\r\n            }\r\n          }).then(() => {\r\n            this.$message({\r\n              message: \"已成功编辑！\",\r\n              type: \"success\",\r\n            });\r\n            this.editDialogVisible = false;\r\n          })\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n\r\n    },\r\n    async queryPageList() {\r\n      console.log(this.queryForm);\r\n\r\n      //去除查询条件中为空的属性\r\n      let params = Object.keys(this.queryForm).filter((key) => this.queryForm[key] !== null && this.queryForm[key] !== undefined && this.queryForm[key] !== '').reduce((previousKeys, currentKey) => ({\r\n        ...previousKeys,\r\n        [currentKey]: this.queryForm[currentKey]\r\n      }), {});\r\n\r\n      console.log(params)\r\n      this.loading = true;\r\n      let res = await request({\r\n        url: `dataApi/apiApplyInfo/page`,\r\n        method: \"get\",\r\n        params\r\n      });\r\n\r\n\r\n      if (res.data && res.data.records) {\r\n        this.tableData2 = res.data.records;\r\n        if (res.data.pages) this.queryForm.pages = res.data.pages;\r\n        if (res.data.total) this.queryForm.total = res.data.total;\r\n      }\r\n      this.loading = false;\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryForm.size = val;\r\n      this.queryPageList();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.queryForm.page = val;\r\n      this.queryPageList();\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(row)\r\n      this.editForm = row;\r\n      this.$confirm('是否要下线该文件?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        request({\r\n          url: '/dataApi/apiApplyInfo/close',\r\n          method: 'post',\r\n          data: {\r\n            ...this.editForm,\r\n            status: '0',\r\n          }\r\n        }).then((res) => {\r\n          if (res.code === 0) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: res.msg\r\n            });\r\n          } else {\r\n            this.$message({\r\n              type: 'error',\r\n              message: res.msg\r\n            })\r\n          }\r\n          this.queryPageList()\r\n        })\r\n      });\r\n\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    this.queryPageList();\r\n  },\r\n};\r\n",null]}