{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\eladmin-common\\src\\views\\ssologin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\eladmin-common\\src\\views\\ssologin.vue","mtime":1650418876944},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Config from '../../public/config/settings'\nimport { mapActions, mapGetters } from 'vuex'\n\nexport default {\n  name: 'SsoLogin',\n  data() {\n    return {\n      title: Config.title,\n      currentRole: '',\n      selectRole: false\n    }\n  },\n  mounted() {\n    this.$store.dispatch('SsoLogin', this.$route.query['token']).then(() => {\n      if (this.user().roles != null && this.user().roles.length > 0) {\n        if (this.user().roles.length > 1) {\n          //console.log('=======login=====>', this.user())\n          this.selectRole = true\n        } else if (this.user().roles.length == 1) {\n          this.currentRole = this.user().roles[0].id\n          this.goin()\n        }\n      } else {\n        this.$message(\"当前用户没有访问该系统的权限，请联系管理员！\",'error')\n      }\n    }).catch(() => {\n    })\n  },\n  methods: {\n    goin() {\n      if (!this.currentRole) {\n        this.$message('请选择角色', 'error')\n        return\n      }\n      console.log('======goin============', this.currentRole, this.user().roles.find(e => e.id == this.currentRole))\n      this.$store.dispatch('setCurrentRole', this.user().roles.find(e => e.id == this.currentRole))\n      this.$router.push({ path: this.redirect || '/' })\n    },\n    cancel() {\n      this.selectRole = false\n      this.loading = false\n    },\n    ...mapGetters(['getSmartbi', 'user']),\n  ...mapActions(['setSmartbi'])\n  }\n}\n",null]}