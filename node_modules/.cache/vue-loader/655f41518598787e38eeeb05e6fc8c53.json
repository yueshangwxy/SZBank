{"remainingRequest":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\eladmin-system\\src\\views\\system\\menu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\eladmin-system\\src\\views\\system\\menu\\index.vue","mtime":1650772037108},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650772030306},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650772056629}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport crudMenu from '../../../api/system/menu'\r\nimport IconSelect from '@eladmin/components/IconSelect'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nimport CRUD, {presenter, header, form, crud} from '@crud/crud'\r\nimport rrOperation from '@crud/RR.operation'\r\nimport crudOperation from '@crud/CRUD.operation'\r\nimport udOperation from '@crud/UD.operation'\r\n\r\n// crud交由presenter持有\r\nconst defaultCrud = CRUD({title: '菜单', url: 'api/menus', crudMethod: {...crudMenu}})\r\nconst defaultForm = {\r\n  id: null,\r\n  name: null,\r\n  sort: 999,\r\n  path: null,\r\n  component: null,\r\n  componentName: null,\r\n  iframe: false,\r\n  roles: [],\r\n  pid: 0,\r\n  icon: null,\r\n  cache: false,\r\n  hidden: false,\r\n  type: 0,\r\n  permission: null,\r\n  dataAuthType: null\r\n}\r\nexport default {\r\n  name: 'Menu',\r\n  components: {Treeselect, IconSelect, crudOperation, rrOperation, udOperation},\r\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\r\n  dicts: ['DATA_AUTH_TYPE'],\r\n  data() {\r\n    return {\r\n      menus: [],\r\n      permission: {\r\n        add: ['admin', 'menu:add'],\r\n        edit: ['admin', 'menu:edit'],\r\n        del: ['admin', 'menu:del']\r\n      },\r\n      rules: {\r\n        name: [\r\n          {required: true, message: '请输入名称', trigger: 'blur'}\r\n        ],\r\n        path: [\r\n          {required: true, message: '请输入地址', trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.resetQuery()\r\n  },\r\n  methods: {\r\n    resetQuery() {\r\n      this.crud.resetQuery(false);\r\n      this.crud.refresh()\r\n    },\r\n    // 新增与编辑前做的操作\r\n    [CRUD.HOOK.afterToCU](crud, form) {\r\n      crudMenu.getMenusTree().then(res => {\r\n        this.menus = []\r\n        const menu = {id: 0, label: '顶级类目', children: []}\r\n        menu.children = res\r\n        this.menus.push(menu)\r\n      })\r\n    },\r\n    // 选中图标\r\n    selected(name) {\r\n      this.form.icon = name\r\n    }\r\n  }\r\n}\r\n",null]}