{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\userManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\userManager.vue","mtime":1652684905917},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    mapGetters,\n    mapState\n} from \"vuex\";\nimport Avatar from \"@eladmin/assets/images/avatar.png\";\nimport RoleSelect from \"@eladmin/components/RoleSelect\";\nimport ThemeSelect from \"@portal/components/ThemeSelect\";\nimport Logo from \"@portal/layout/components/Sidebar/Logo\";\n\nexport default {\n    name: \"userManager\",\n    components: {\n        RoleSelect,\n        ThemeSelect,\n        Logo,\n    },\n    data() {\n        return {\n            Avatar: Avatar,\n            // 筛选项\n            name: '',\n            date: '',\n            dateValue: '',\n            enabled: '',\n            userType: '',\n            // 树状图\n            filterText: '',\n            treeData: [],\n            nodeId: '',\n            // 表格\n            tableData: [],\n            propList: [],\n            defaultProps: {\n                id: 'id',\n                children: 'children',\n                label: 'name'\n            },\n            // 分页\n            pageSize: 9,\n            total: 10,\n            currentPage: 1,\n        };\n    },\n    watch: {\n        // 节点过滤\n        filterText(val) {\n            this.$refs.tree.filter(val);\n        },\n        // \n        date(val) {\n            if(val) {\n                let startTime = this.$formatDate(val[0])\n                let endTime = this.$formatDate(val[1]) \n                this.dateValue = [startTime,endTime]\n                console.log(this.dateValue);\n            } else {\n                this.dateValue = []\n            }\n        }\n    },\n    created() {\n        \n    },\n    mounted() {\n    },\n    computed: {\n        ...mapGetters([\"sidebar\", \"device\", \"user\", \"baseApi\"]),\n        ...mapState({\n            showBreadcrumb: (state) => state.settings.showBreadcrumb,\n        }),\n    },\n    created() {\n        this.propList = [\n            {\n                prop: 'username',\n                label: '用户名',\n            },\n            {\n                prop: 'userNo',\n                label: '用户编号',\n                align: 'center',\n            },\n            {\n                prop: 'name',\n                label: '姓名',\n            },\n            {\n                prop: 'sex',\n                label: '性别',\n            },\n            {\n                prop: 'tel',\n                label: '电话',\n            },\n            {\n                prop: 'email',\n                label: '邮箱',\n            },\n            {\n                prop: 'deptName',\n                label: '机构',\n            },\n            {\n                prop: 'roleName',\n                label: '角色',\n            },\n            {\n                prop: 'position',\n                label: '岗位',\n            },\n            {\n                prop: 'userTypeName',\n                label: '用户类型',\n            }\n        ]\n        this.$api.getSysDeptList({}).then(res => {\n            this.treeData = res.content\n        })\n        this.queryList()\n    },\n    methods: {\n        // 重置\n        reset() {\n            this.name = ''\n            this.date = ''\n            this.enabled = ''\n            this.userType = ''\n        },\n        // 树状图过滤\n        filterNode(value, data) {\n            if (!value) return true;\n            return data.name.indexOf(value.toString()) !== -1;\n        },\n        // 树状图节点点击\n        handleNodeClick(node,data) {\n            this.currentPage = 1\n            this.nodeId = node.id\n            this.queryList()\n        },\n        // 搜索按钮\n        searchList() {\n            this.currentPage = 1\n            this.nodeId = ''\n            this.queryList()\n        },\n        // 列表查询\n        queryList() {\n            let request = {\n                deptId: this.nodeId,\n                keyWord: this.name,\n                crtDate: this.dateValue,\n                enabled: this.enabled,\n                userType: this.userType,\n                size: this.pageSize,\n                page: this.currentPage\n            }\n            console.log(request);\n            this.$api.qryUserListPage(request).then(res => {\n                this.tableData = res.data.records\n                this.total = res.data.total\n            })\n        },\n        // 复选框\n        handleSelectionChange(val) {\n\n        },\n        // 懒加载\n        load(tree, treeNode, resolve) {\n            setTimeout(() => {\n            resolve([\n                {\n                    id: 31,\n                    name: '菜单1',\n                    sort: 10,\n                    router: '/xxx',\n                    auth: 'xxxx',\n                    component: '组件1',\n                    links: 'www.baidu.com',\n                    cache: '否',\n                    visibility: 'fou',\n                    date: '2016-05-02',\n                }, \n                {\n                    id: 32,\n                    name: '菜单1',\n                    sort: 10,\n                    router: '/xxx',\n                    auth: 'xxxx',\n                    component: '组件1',\n                    links: 'www.baidu.com',\n                    cache: '否',\n                    visibility: 'fou',\n                    date: '2016-05-02',\n                }\n            ])\n            }, 1000)\n        },\n        // 详情\n        viewDetails(row) {\n            console.log(row);\n        },\n        //  分页\n        handleCurrentChange(val) {\n            this.currentPage = val\n            this.queryList()\n        }\n    },\n};\n",null]}