{"remainingRequest":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\code\\indicator\\Pncui-Indicator\\src\\views\\indicators\\result\\resultCheck.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\code\\indicator\\Pncui-Indicator\\src\\views\\indicators\\result\\resultCheck.vue","mtime":1638758244881},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\indicator\\Pncui-Indicator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getCheckList, saveCheckData, deleteCheckData} from '@/api/indicators/indResultSubscribe'\nimport qs from 'qs'\nimport CRUD, {presenter, header, form, crud} from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport pagination from '@crud/Pagination'\n\n\nconst defaultCrud = CRUD({\n    title: '指标加工结果校验',\n    url:  'v1/indicators/result/atom/getCheckList',\n    loading : true,\n    crudMethod: {getCheckList }\n})\n\nconst defaultForm = {\n    name: null,\n    checkData:null\n}\n\n\nexport default {\n    name: \"resultCheck\",\n    components: {pagination,  crudOperation,  rrOperation},\n    mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n    data() {\n        return {\n            permission: {\n                add: ['admin', 'add'],\n                edit: ['admin', 'edit'],\n                del: ['admin', 'del']\n            },\n            activeName: 'first',\n            showDetailDialog: false,\n            detailDialogTitle : '新增|编辑',\n            firstDisabled : false,\n            secondDisabled : false,\n\n            checkForm : {},\n\n        }\n    },\n    methods :{\n        [CRUD.HOOK.beforeRefresh]() {\n            this.crud.optShow.del = true\n            this.crud.optShow.add = true\n            this.crud.optShow.edit = true\n            return true\n        },\n\n\n        [CRUD.HOOK.beforeToAdd]() {\n            this.showDetailDialog = true;\n\n            this.activeName = 'first'\n            this.firstDisabled = false;\n            this.secondDisabled = false;\n\n        },\n        [CRUD.HOOK.beforeToEdit]() {\n            console.log(\"===修改\")\n            this.showDetailDialog = true;\n            if(this.crud.selections[0].check_type == '0') {\n                //定量\n                this.activeName = 'first'\n                this.firstDisabled = false;\n                this.secondDisabled = true;\n\n                this.checkForm.checkType = this.crud.selections[0].check_type\n                this.checkForm.id = this.crud.selections[0].id\n                this.checkForm.code = this.crud.selections[0].ie_code\n                this.checkForm.name = this.crud.selections[0].ie_name\n                this.checkForm.compareSymbol = this.crud.selections[0].compare_symbol\n                this.checkForm.fixVal = this.crud.selections[0].fix_val\n\n            } else if (this.crud.selections[0].check_type == '1') {\n                this.activeName = 'second'\n                this.firstDisabled = true;\n                this.secondDisabled = false;\n\n                this.checkForm.checkType = this.crud.selections[0].check_type\n                this.checkForm.id = this.crud.selections[0].id\n                //this.checkForm.code = this.crud.selections[0].ie_code\n                this.checkForm.formulaOne = this.crud.selections[0].ie_name\n                this.checkForm.formulaCompareSymbol = this.crud.selections[0].compare_symbol\n                this.checkForm.formulaTwo = this.crud.selections[0].fix_val\n            }\n        },\n        [CRUD.HOOK.beforeDelete]() {\n            var selectIds = \"\";\n            for (let items of this.crud.selections) {\n                if (items.id != '') {\n                    selectIds += items.id + \",\";\n                }\n            }\n\n            deleteCheckData(qs.stringify({ids : selectIds})).then(res => {\n                if (res.code == '0') {\n                    this.$message({\n                        type: 'success',\n                        message: '操作成功 '\n                    })\n                }\n                this.crud.refresh();\n            })\n\n            return false;\n        },\n        closeApproveDetailDialog() {\n            this.showDetailDialog = false\n            this.activeName = 'first'\n            this.checkForm = {}\n        },\n        handleClick(tab, event) {\n            console.log(\"=====\" + tab, event);\n        },\n        saveCheckForm(){\n\n            var checkParam = {};\n            checkParam.id = this.checkForm.id\n            if (this.activeName == 'first') {\n                checkParam.code = this.checkForm.code\n                checkParam.name = this.checkForm.name\n                checkParam.compareSymbol = this.checkForm.compareSymbol\n                checkParam.fixVal = this.checkForm.fixVal\n                checkParam.checkType = '0'\n            } else {\n                checkParam.formulaOne = this.checkForm.formulaOne\n                checkParam.formulaTwo = this.checkForm.formulaTwo\n                checkParam.formulaCompareSymbol = this.checkForm.formulaCompareSymbol\n                checkParam.checkType = '1'\n            }\n\n            saveCheckData(qs.stringify(checkParam)).then(res => {\n                if (res.code == '0') {\n                    this.$message({\n                        type: 'success',\n                        message: '操作成功 '\n                    })\n                }\n                this.closeApproveDetailDialog();\n                this.crud.refresh()\n            })\n        },\n        onInput(){\n            this.$forceUpdate();\n        }\n    }\n\n\n}\n",null]}