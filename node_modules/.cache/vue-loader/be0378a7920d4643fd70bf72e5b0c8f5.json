{"remainingRequest":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\index1.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\src\\views\\indicators\\searchPage\\index1.vue","mtime":1650772058561},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650772030306},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650772030926},{"path":"C:\\Users\\rdren\\Desktop\\workspace\\DataAssetPlatform\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650772056629}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport SearchPage from './searchPage'\r\nimport TablePage from './tablePage'\r\nimport APIPage from './apiPage'\r\nimport TagPage from './tagPage'\r\nimport TargetPage from './targetPage'\r\nimport {getTree} from '../../../api/searchPage/assetsClassify'\r\nimport {getListByKeywords,getDetail,getListByClassify} from '../../../api/searchPage/es'\r\n    export default {\r\n        name: '',\r\n        components: {\r\n            SearchPage,\r\n            TablePage,\r\n            APIPage,\r\n            TagPage,\r\n            TargetPage,\r\n        },\r\n        data() {\r\n            return {\r\n                searchInput: '',\r\n                assetType: 'all',\r\n                // 一级目录\r\n                firstType: 'all',\r\n                firstList: [],\r\n                // 二级目录\r\n                secondType: 'all',\r\n                secondList: [],\r\n                // 四级目录\r\n                fourthType: 'all',\r\n                fourthList: [],\r\n                // 筛选\r\n                filterForm: [],\r\n                \r\n                // 分页\r\n                pageSize: 10,\r\n                currentPage: 1,\r\n                total: 50,\r\n\r\n                nodeData:[],\r\n                testData: [],\r\n\r\n                catalogueList: {},\r\n            }\r\n        },\r\n        watch: {\r\n            // 资产类型\r\n            assetType(val) {\r\n                if(val==='all') {\r\n                    this.fourthList = []\r\n                    this.filterForm = []\r\n                } else if(val==='table') {\r\n                    this.filterForm = [\r\n                        { value: '', placeholder: '目录层级1'},\r\n                        { value: '', placeholder: '目录层级2'},\r\n                        { value: '', placeholder: '目录层级3'},\r\n                        { value: '', placeholder: '所属系统'},\r\n                        { value: '', placeholder: '存储项目名称'},\r\n                    ]\r\n                    this.secondType = 'all'\r\n                } else if(val==='api') {\r\n                    this.filterForm = [\r\n                        { value: '', placeholder: '归属应用'},\r\n                        { value: '', placeholder: '目录层级1'},\r\n                        { value: '', placeholder: '目录层级2'},\r\n                        { value: '', placeholder: '目录层级3'},\r\n                        { value: '', placeholder: '底层存储类型'},\r\n                        { value: '', placeholder: '接口联系人'},\r\n                    ]\r\n                    this.secondType = 'all'\r\n                } else if(val==='target') {\r\n                    this.filterForm = [\r\n                        { value: '', placeholder: '指标名称'},\r\n                        { value: '', placeholder: '指标编码'},\r\n                        { value: '', placeholder: '一级分类'},\r\n                        { value: '', placeholder: '二级分类'},\r\n                        { value: '', placeholder: '指标类型'},\r\n                        { value: '', placeholder: '属主部门'},\r\n                    ]\r\n                    this.secondType = 'all'\r\n                } else if(val==='label') {\r\n                    this.filterForm = [\r\n                        { value: '', placeholder: '标签所属内部机构'},\r\n                        { value: '', placeholder: '标签分类名称'},\r\n                        { value: '', placeholder: '标签适用对象'},\r\n                        { value: '', placeholder: '归属应用'},\r\n                    ]\r\n                    this.secondType = 'all'\r\n                }\r\n            },\r\n            // 资产分类  一级\r\n            firstType(val) {\r\n                if(val==='all') {\r\n                    this.secondList = []\r\n                    this.fourthList = []\r\n                } else if(val==='com') {\r\n                    this.secondType = 'all'\r\n                    // 公司银行\r\n                    this.secondList = this.catalogueList.comChild\r\n                } else if(val==='sale') {\r\n                    this.secondType = 'all'\r\n                    this.fourthType = 'all'\r\n                    // 零售银行\r\n                    this.secondList = this.catalogueList.saleChild\r\n                } else if(val==='num') {\r\n                    this.secondType = 'all'\r\n                    this.fourthType = 'all'\r\n                    // 数字银行\r\n                    this.secondList = this.catalogueList.numChild\r\n                } else if(val==='fin') {\r\n                    this.secondType = 'all'\r\n                    this.fourthType = 'all'\r\n                    // 金融市场\r\n                    this.secondList = this.catalogueList.finChild\r\n                } else if(val==='pub') {\r\n                    this.secondType = 'all'\r\n                    this.fourthType = 'all'\r\n                    // 公共类\r\n                    this.secondList = this.catalogueList.pubChild\r\n                }\r\n            },\r\n            secondType(val) {\r\n                if(val !== 'all') {\r\n                    if(this.assetType==='all') {\r\n                        this.fourthList = []\r\n                    } else if(this.assetType==='table') {\r\n                        this.fourthType = 'all'\r\n                        this.fourthList = this.catalogueList.tableChild \r\n                    } else if(this.assetType==='API') {\r\n                        this.fourthList = this.catalogueList.apiChild \r\n                    } else if(this.assetType==='target') {\r\n                        this.fourthType = 'all'\r\n                        this.fourthList = this.catalogueList.targetChild     \r\n                    } else if(this.assetType==='label') {\r\n                        this.fourthType = 'all'\r\n                        this.fourthList = this.catalogueList.labelChild   \r\n                    }\r\n                } else {\r\n                    this.fourthList = []\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            console.log(this.$dataList,666);\r\n            this.catalogueList = this.$dataList.catalogueList\r\n            this.firstList = this.catalogueList.classifyChild\r\n        },\r\n        mounted() {\r\n            const param ={\r\n                \"keywords\":'',\r\n                \"page\":this.currentPage,\r\n                \"size\":this.pageSize,\r\n                \"assetType\":this.assetType\r\n            }\r\n            this.getListByKeywords(param);\r\n\r\n        },\r\n        methods: {\r\n            // 目录与树状图联动\r\n            changeLevel(val) {\r\n                /* let promise = new Promise((resolve, reject) => {\r\n                    console.log(000);\r\n                    // 一级目录 -- 公司银行 零售银行...\r\n                    this.firstType = 'com'\r\n                    resolve();\r\n                });\r\n                promise.then(() => {\r\n                    // 二级目录\r\n                    this.secondType = '1'\r\n                    console.log(111);\r\n                })\r\n                .then(() => {\r\n                    // 三级目录 -- 表 API 指标 标签\r\n                    this.assetType = 'target'\r\n                    console.log(222);\r\n                })\r\n                .then(() => {\r\n                    // 四级目录\r\n                    this.fourthType = '1'\r\n                    console.log(333);\r\n                }) */\r\n                console.log(val,val.id,val.name,888);\r\n            },\r\n            queryList() {\r\n                console.log('搜索');\r\n                // 传给各资产的列表数据\r\n                this.testData = [\r\n                    { assetType: 'table', num: 0, tableName: '123' },\r\n                    { assetType: 'table', num: 0, tableName: '444' },\r\n                    { assetType: 'table', num: 0, tableName: '22' },\r\n                    { assetType: 'table', num: 0, tableName: '3333' },\r\n                    { assetType: 'table', num: 0, tableName: 'te444st1' },\r\n                    { assetType: 'table', num: 0, tableName: 'test8' },\r\n                    { assetType: 'table', num: 0, tableName: '22' },\r\n                    { assetType: 'table', num: 0, tableName: 'test12' },\r\n                    { assetType: 'table', num: 0, tableName: 'te33st2' },\r\n                    { assetType: 'table', num: 0, tableName: 'tes22t3' }\r\n                ]\r\n            },\r\n            getListByKeywords(param){\r\n                getListByKeywords(param).then(data =>{\r\n                    this.total = data.count.table\r\n                    this.tableList = data.obj\r\n                    this.tableListAll = data.obj\r\n                    this.tableListAuth = data.obj\r\n                })\r\n            },\r\n            // 资产类型\r\n            handleClick(tab, event) {\r\n                console.log(tab.name,tab.label,333);\r\n            },\r\n            // 资产分类  一级\r\n            handleClickFirst(tab, event) {\r\n                console.log(tab.name,tab.label,111);\r\n            },\r\n            // 资产分类  二级\r\n            handleClickSecond(tab, event) {\r\n                console.log(tab.name,tab.label,222);\r\n            },\r\n            // 资产分类  四级\r\n            handleClickFourth(tab, event) {\r\n                console.log(tab.name,tab.label,444);\r\n            },\r\n            // 节点过滤\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.name.indexOf(value.toString()) !== -1;\r\n            },\r\n            // 节点点击\r\n            handleNodeClick(data) {\r\n                this.nodeData = data\r\n                console.log(data);\r\n                const param ={\r\n                    \"page\":this.currentPage,\r\n                    \"size\":this.pageSize,\r\n                    \"assetType\":this.assetType,\r\n                    \"obj\":data\r\n                }\r\n                getListByClassify(param).then(data =>{\r\n                    this.total = data.count.table\r\n                    this.tableList = data.obj\r\n                    this.tableListAll = data.obj\r\n                    this.tableListAuth = data.obj\r\n                })\r\n            },\r\n            // 我的购物车\r\n            jumpUrl() {\r\n                this.$router.push({\r\n                    path: '/myShopCar/index',\r\n                })\r\n            },\r\n            // 重置 \r\n            reset() {\r\n                this.filterForm.forEach(item=>{\r\n                    item.value = ''\r\n                })\r\n                this.nodeData=[]\r\n                this.currentPage = 1\r\n                this.pageSize = 10\r\n                const param ={\r\n                    \"keywords\":'',\r\n                    \"page\":1,\r\n                    \"size\":10,\r\n                    \"assetType\":this.assetType\r\n                }\r\n                this.getListByKeywords(param);\r\n            },\r\n            // 搜索\r\n            doSubmit(){\r\n                this.nodeData=[]\r\n                const  param ={\r\n                    \"keywords\":'',\r\n                    \"page\":this.currentPage,\r\n                    \"size\":this.pageSize,\r\n                    \"assetType\":this.assetType,\r\n                    \"searchList\" :this.filterForm\r\n                }\r\n                // 传给各资产的列表数据\r\n                this.testData = [\r\n                    { assetType: 'table', num: 0, tableName: '123' },\r\n                    { assetType: 'table', num: 0, tableName: '444' },\r\n                    { assetType: 'table', num: 0, tableName: '22' },\r\n                    { assetType: 'table', num: 0, tableName: '3333' },\r\n                    { assetType: 'table', num: 0, tableName: 'te444st1' },\r\n                    { assetType: 'table', num: 0, tableName: 'test8' },\r\n                    { assetType: 'table', num: 0, tableName: '22' },\r\n                    { assetType: 'table', num: 0, tableName: 'test12' },\r\n                    { assetType: 'table', num: 0, tableName: 'te33st2' },\r\n                    { assetType: 'table', num: 0, tableName: 'tes22t3' }\r\n                ]\r\n                // this.getListByKeywords(param)\r\n            },\r\n        },\r\n    }\r\n",null]}