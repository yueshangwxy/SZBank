{"remainingRequest":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SZBank\\src\\views\\indicators\\portalHome\\portalHome.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SZBank\\src\\views\\indicators\\portalHome\\portalHome.vue","mtime":1655881580257},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\SZBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\SZBank\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport { buildMenus } from \"@eladmin/api/system/menu\";\r\nimport { getCurrentRole } from \"@eladmin/utils/auth\";\r\nimport Avatar from \"@eladmin/assets/images/avatar.png\";\r\nimport RoleSelect from \"@eladmin/components/RoleSelect\";\r\nimport ThemeSelect from \"@portal/components/ThemeSelect\";\r\nimport Logo from \"@portal/layout/components/Sidebar/Logo\";\r\nimport { isSuperAdmin } from \"@/utils/validator\";\r\n\r\nexport default {\r\n  name: \"portalHome\",\r\n  components: {\r\n    RoleSelect,\r\n    ThemeSelect,\r\n    Logo,\r\n  },\r\n  data() {\r\n    return {\r\n      Avatar: Avatar,\r\n      logo: require(\"../../../../public/images/logo.png\"),\r\n      searchValue: \"\", // 搜索内容\r\n      // title\r\n      active: 1,\r\n      className: \"menu-list1\",\r\n      titleList: [\r\n        {\r\n          imgUrl: require(\"../../../assets/explore1.png\"),\r\n          title: \"数据探索\",\r\n          desc: \"为了借助社交产品的流量,让用户主动分享APP中的内容到社交平...\",\r\n          active: 1,\r\n          className: \"menu-list1\",\r\n          children: [\r\n            {\r\n              title: \"数据资产平台\",\r\n              path: \"/\",\r\n              name: \"/\",\r\n              desc: \"对数据资产进行采集、归档、盘点及管理，使数据资产得以沉淀。数据资产与业务场景的结合，使业务口径得以沉淀，使数据资产更贴合业务场景，从而将数据资产从专注于技术描述，提升为业务服务。\",\r\n            },\r\n            {\r\n              title: \"数据查询平台\",\r\n              path: \"/dataLab/sqlFlexibleAnalysis\",\r\n              name: \"sqlFlexibleAnalysis\",\r\n              desc: \"作为数据中台的配套系统，服务于我行数据分析、业务支持岗位人员。结合业务部门对数据探索相关需求，实现基于数据中台体系的数据自助探索、分析。\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          imgUrl: require(\"../../../assets/service1.png\"),\r\n          title: \"数据服务\",\r\n          desc: \"为了借助社交产品的流量,让用户主动分享APP中的内容到社交平...\",\r\n          active: 2,\r\n          className: \"menu-list2\",\r\n          children: [\r\n            {\r\n              title: \"数据服务平台\",\r\n              path: \"/dataServicePlatform/myService\",\r\n              name: \"myService\",\r\n              desc: \"提供全面的数据服务方式，将数据能力通过各系统融入业务经营、运营之中。\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          imgUrl: require(\"../../../assets/application1.png\"),\r\n          title: \"数据应用\",\r\n          desc: \"为了借助社交产品的流量,让用户主动分享APP中的内容到社交平...\",\r\n          active: 3,\r\n          className: \"menu-list3\",\r\n          children: [\r\n            {\r\n              title: \"指标管理平台\",\r\n              // path: '',\r\n              desc: \"正在接入中...\",\r\n            },\r\n            {\r\n              title: \"统一标签管理系统\",\r\n              // path: '',\r\n              desc: \"正在接入中...\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          imgUrl: require(\"../../../assets/manage1.png\"),\r\n          title: \"数据管理\",\r\n          desc: \"为了借助社交产品的流量,让用户主动分享APP中的内容到社交平...\",\r\n          active: 4,\r\n          className: \"menu-list4\",\r\n          children: [\r\n            {\r\n              title: \"正在建设\",\r\n              desc: \"正在建设中...\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      menuList: [],\r\n    };\r\n  },\r\n  mounted() {},\r\n  watch: {},\r\n  computed: {\r\n    ...mapGetters([\"sidebar\", \"device\", \"user\", \"baseApi\"]),\r\n    ...mapState({\r\n      showBreadcrumb: (state) => state.settings.showBreadcrumb,\r\n    }),\r\n    showLogo() {\r\n      return this.$store.state.settings.sidebarLogo;\r\n    },\r\n    show: {\r\n      get() {\r\n        return this.$store.state.settings.showSettings;\r\n      },\r\n      set(val) {\r\n        this.$store.dispatch(\"settings/changeSetting\", {\r\n          key: \"showSettings\",\r\n          value: val,\r\n        });\r\n      },\r\n    },\r\n    isSuperLogin() {\r\n      return isSuperAdmin();\r\n    },\r\n  },\r\n  created() {\r\n    // 加载数据\r\n    this.menuList = this.titleList[0].children;\r\n  },\r\n  methods: {\r\n    setBlur() {\r\n      this.$refs.autocomplete.activated = true;\r\n    },\r\n    // 输入框\r\n    querySearch(queryString, cb) {\r\n      let request = {\r\n        page: 1,\r\n        size: 10,\r\n        keywords: queryString,\r\n        suggest: true,\r\n      };\r\n      setTimeout(() => {\r\n        this.$api.getListByKeywords(request).then((res) => {\r\n          let temp = res.obj;\r\n          let suggestion = [];\r\n          temp.forEach((item) => {\r\n            if (item.targetName) {\r\n              suggestion.push({\r\n                value: item.targetName,\r\n                assetType: item.assetType,\r\n              });\r\n            } else if (item.labelName) {\r\n              suggestion.push({\r\n                value: item.labelName,\r\n                assetType: item.assetType,\r\n              });\r\n            } else if (item.indexName) {\r\n              suggestion.push({\r\n                value: item.indexName,\r\n                assetType: item.assetType,\r\n              });\r\n            } else if (item.tableName) {\r\n              suggestion.push({\r\n                value: item.tableComment\r\n                  ? item.tableComment\r\n                  : \"\" + item.tableName,\r\n                assetType: item.assetType,\r\n              });\r\n            }\r\n          });\r\n          cb(suggestion);\r\n        });\r\n      }, 1000);\r\n    },\r\n    handleSelect(item) {\r\n      let type;\r\n      if (item.assetType === \"table\") {\r\n        type = 1;\r\n      } else if (item.assetType === \"api\") {\r\n        type = 2;\r\n      } else if (item.assetType === \"target\") {\r\n        type = 3;\r\n      } else if (item.assetType === \"label\") {\r\n        type = 4;\r\n      }\r\n      this.$router.push({\r\n        path: \"/asset/searchPage/index\",\r\n        query: {\r\n          data: this.searchValue,\r\n          from: \"home\",\r\n          type: type,\r\n        },\r\n      });\r\n    },\r\n    // 输入框值改变\r\n    inputChange(value) {\r\n      this.searchValue = value;\r\n      sessionStorage.setItem(\"searchKeyWords\", value);\r\n    },\r\n    globalSearch() {\r\n      this.$router.push({\r\n        path: \"/asset/searchPage/index\",\r\n        query: {\r\n          data: this.searchValue,\r\n          from: \"home\",\r\n        },\r\n      });\r\n    },\r\n    // // 输入框\r\n    // inputChange(value) {\r\n    //   this.searchValue = value;\r\n    //   // localStorage.setItem(\"searchKeyWords\", value);\r\n    // },\r\n    // globalSearch() {\r\n    //   this.$router.push({\r\n    //     path: \"/searchPage/index\",\r\n    //     query: {\r\n    //       data: this.searchValue,\r\n    //       from: \"home\",\r\n    //     },\r\n    //   });\r\n    // },\r\n    open() {\r\n      this.$confirm(\"确定注销并退出系统吗？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.logout();\r\n      });\r\n    },\r\n    logout() {\r\n      this.$store.dispatch(\"LogOut\").then(() => {\r\n        location.reload();\r\n      });\r\n    },\r\n    // 鼠标移入\r\n    titleEnter(item) {\r\n      this.active = item.active;\r\n      this.className = item.className;\r\n      this.menuList = item.children;\r\n    },\r\n    // 打开新窗口\r\n    openNewWindow(item) {\r\n      // 根据build接口判断是否需要跳转\r\n      var allMenuName = [];\r\n      buildMenus(getCurrentRole().id).then((res) => {\r\n        getAllMenuName(res.menu);\r\n        if (allMenuName.includes(item.name) || item.name === \"/\") {\r\n          if (item.path) {\r\n            let routeData = this.$router.resolve({ path: item.path });\r\n            window.open(routeData.href, \"_blank\");\r\n          }\r\n        } else {\r\n          this.$message.error(\"暂无权限跳转\");\r\n        }\r\n\r\n        // 获取所有菜单的名称\r\n        function getAllMenuName(menus) {\r\n          for (let menu of menus) {\r\n            if (menu.name) {\r\n              allMenuName.push(menu.name);\r\n            }\r\n            if (menu.children && menu.children.length > 0) {\r\n              getAllMenuName(menu.children);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n",null]}