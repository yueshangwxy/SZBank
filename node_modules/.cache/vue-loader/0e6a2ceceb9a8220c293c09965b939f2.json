{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet\\labDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\portalHome\\workSheet\\labDetail.vue","mtime":1656042806020},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport ThemeSelect from \"@portal/components/ThemeSelect\";\r\nexport default {\r\n  components: {\r\n    ThemeSelect,\r\n  },\r\n  data() {\r\n    return {\r\n      // basicinfo\r\n      basicinfo: {\r\n        tableName: \"\",\r\n        sqlText: \"\",\r\n        applyDescription: \"\",\r\n        applyUserName: \"\",\r\n        applyDeptName: \"\",\r\n        ApplyTimeShow: \"\",\r\n        applyStatus: \"\"\r\n      },\r\n      basicInfoList: [],\r\n      dataList: [],\r\n      propList: [],\r\n      detailsView: true,\r\n      id: \"\",\r\n      assetsState: \"\",\r\n      // 目录树\r\n      catalogueList: [],\r\n      cataValue: [],\r\n      ruleForm: {\r\n        apprComment: \"\",\r\n      },\r\n      rules: {\r\n        apprComment: [\r\n          { required: true, message: \"请输入审批意见\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      taskId: '',\r\n      processFlag: true,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    // 关闭当前页\r\n    returnLastPage() {\r\n      this.$router.back()\r\n    },\r\n    initData() {\r\n\r\n      // 数据\r\n      this.taskId = this.$route.query.taskId\r\n      this.$api\r\n        .getLabDetailById({\r\n          id: this.taskId,\r\n        })\r\n        .then((res) => {\r\n          this.basicinfo = res.data;\r\n        });\r\n    },\r\n    // 实验室审批  -- 通过\r\n    labPass(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$api\r\n                  .labCompleteTask({\r\n                    taskId: this.taskId,\r\n                    applyState: \"03\",\r\n                    approvalOpinion: this.ruleForm.apprComment,\r\n                  })\r\n                  .then((res) => {\r\n                    if (res.code == 0 || res.code == 200) {\r\n                      this.$message.success(res.msg);\r\n                      this.returnLastPage()\r\n                    } else {\r\n                      this.$message.error(res.msg);\r\n                    }\r\n                  });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 审批  -- 拒绝\r\n    labReject(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$api\r\n                  .labCompleteTask({\r\n                    taskId: this.taskId,\r\n                    applyState: \"04\",\r\n                    approvalOpinion: this.ruleForm.apprComment,\r\n                  })\r\n                  .then((res) => {\r\n                    if (res.code == 0 || res.code == 200) {\r\n                      this.$message.success(res.msg);\r\n                      this.returnLastPage()\r\n                    } else {\r\n                      this.$message.error(res.msg);\r\n                    }\r\n                  });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n  },\r\n};\r\n",null]}