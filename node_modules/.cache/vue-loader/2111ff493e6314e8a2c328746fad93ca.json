{"remainingRequest":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tagPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\src\\views\\indicators\\searchPage\\tagPage.vue","mtime":1650446272079},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\babel-loader\\lib\\index.js","mtime":1650418872733},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650418873221},{"path":"D:\\code\\DataAssetPlatform000\\Pncui-Ind\\node_modules\\vue-loader\\lib\\index.js","mtime":1650418886580}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getTree} from \"../../../api/searchPage/assetsClassify\";\nimport {getDetail, getListByClassify, getListByKeywords} from \"../../../api/searchPage/es\";\n\nexport default {\n    name: 'TagPage',\n    props: {\n        testData: {\n            type: Array\n        }\n    },\n    data() {\n        return {\n            filterText: '',\n            defaultProps: {\n                id:'id',\n                children: 'children',\n                label: 'name'\n            },\n            // 筛选\n            filterForm: {\n                input1: '',\n                input2: '',\n                input3: '',\n                input4: '',\n                input5: '',\n            },\n            treeData: [],\n            // 表格\n            tableList: [],\n            // 分页\n            pageSize: 10,\n            currentPage: 1,\n            total: 50,\n            // 详情查看\n            detailsShow: false,\n            details: {},\n        }\n    },\n    watch: {\n        testData(val){\n            console.log(val);\n            this.tableList = val\n        },\n        filterText(val) {\n            this.$refs.tree.filter(val);\n        },\n    },\n    created() {\n        getTree(\"label\").then(data =>{\n            console.log(\"11111111111111\"+JSON.stringify(data))\n            this.treeData = data\n        })\n    },\n    mounted() {\n\n        const param ={\n            \"keywords\":'',\n            \"page\":this.currentPage,\n            \"size\":this.pageSize,\n            \"assetType\":'label'\n        }\n        this.getListByKeywords(param);\n    },\n    methods: {\n        getListByKeywords(param){\n            getListByKeywords(param).then(data =>{\n                this.total = data.count.label\n                this.tableList = data.labelList\n                console.log(\"apiList\"+JSON.stringify(data.labelList))\n                console.log(\"count\"+JSON.stringify(data.count))\n            })\n        },\n        // 节点过滤\n        filterNode(value, data) {\n            if (!value) return true;\n            return data.name.indexOf(value) !== -1;\n        },\n        // 节点点击\n        handleNodeClick(data) {\n            this.$emit('changeLevel',data)\n            const param ={\n                \"page\":this.currentPage,\n                \"size\":this.pageSize,\n                \"assetType\":'label',\n                \"obj\":data\n            }\n            getListByClassify(param).then(data =>{\n                this.total = data.count.label\n                this.tableList = data.obj\n            })\n        },\n        // 搜索\n        doSubmit(){\n            const  param ={\n                \"keywords\":'',\n                \"page\":this.currentPage,\n                \"size\":this.pageSize,\n                \"assetType\":'label',\n                \"searchList\" :this.filterForm\n            }\n            this.getListByKeywords(param)\n        },\n        // 重置 \n        reset() {\n            const param ={\n                \"keywords\":'',\n                \"page\":this.currentPage,\n                \"size\":this.pageSize,\n                \"assetType\":'label'\n            }\n            this.getListByKeywords(param);\n            this.filterForm = {}\n        },\n        // 按钮   --- 详情查看\n        detailView(item) {\n            const param ={\n                \"assetType\":'label',\n                \"item\":item\n            }\n            getDetail(param).then(data =>{\n                if(data.code == '200'){\n                    this.details = data.data\n                    console.log(this.details)\n                    this.detailsShow = true\n                }else {\n                    this.$message({\n                        message: data.msg,\n                        type: 'error'\n                    });\n                }\n\n            })\n        },\n        // 分页\n        handleSizeChange(val) {\n            console.log(`每页 ${val} 条`);\n            this.pageSize = val;\n            this.currentPage =1\n            this.filterForm = {}\n            if(this.nodeData !==undefined &&  Object.keys(this.nodeData).length > 0){\n                const param ={\n                    \"page\":this.currentPage,\n                    \"size\":this.pageSize,\n                    \"assetType\":'label',\n                    \"obj\":this.nodeData\n                }\n                getListByClassify(param).then(data =>{\n                    this.total = data.count.tag\n                    this.tableList = data.obj\n                })\n            }else {\n\n                const param = {\n                    \"keywords\": '',\n                    \"page\": this.currentPage,\n                    \"size\": this.pageSize,\n                    \"assetType\": 'label'\n                }\n                this.getListByKeywords(param);\n            }\n        },\n        handleCurrentChange(val) {\n            console.log(`当前页: ${val}`);\n            this.currentPage = val\n            if(this.nodeData !==undefined && Object.keys(this.nodeData).length > 0){\n                const param ={\n                    \"page\":this.currentPage,\n                    \"size\":this.pageSize,\n                    \"assetType\":'label',\n                    \"obj\":this.nodeData\n                }\n                getListByClassify(param).then(data =>{\n                    this.total = data.count.tag\n                    this.tableList = data.obj\n                })\n            }else {\n\n                const param = {\n                    \"keywords\": '',\n                    \"page\": this.currentPage,\n                    \"size\": this.pageSize,\n                    \"assetType\": 'label'\n                }\n                this.getListByKeywords(param);\n            }\n        }\n    },\n}\n",null]}