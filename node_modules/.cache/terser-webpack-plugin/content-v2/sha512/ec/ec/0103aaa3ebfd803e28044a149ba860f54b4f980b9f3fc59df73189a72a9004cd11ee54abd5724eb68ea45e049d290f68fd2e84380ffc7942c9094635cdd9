{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-061d421a\"],{\"0f5d\":function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-tabs\",{attrs:{type:\"border-card\",\"active-name\":\"Deployments\"}},[a(\"el-tab-pane\",{attrs:{name:\"Models\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"image\"}}),e._v(\"流程模型\")],1),e._v(\" \"),a(\"model\",{ref:\"model\"})],1),e._v(\" \"),a(\"el-tab-pane\",{attrs:{name:\"Deployments\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"setting\"}}),e._v(\"流程部署\")],1),e._v(\" \"),a(\"deployment\",{ref:\"deployment\"})],1),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"\",name:\"Definitions\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"database\"}}),e._v(\"流程定义\\n    \"),a(\"el-link\",{on:{click:function(t){return e.refresh(\"definition\")}}},[a(\"i\",{staticClass:\"el-icon-refresh\"})])],1),e._v(\" \"),a(\"definition\",{ref:\"definition\"})],1),e._v(\" \"),a(\"el-tab-pane\",{attrs:{name:\"Instances\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"system\"}}),e._v(\" 流程实例\\n    \"),a(\"el-link\",{on:{click:function(t){return e.refresh(\"instance\")}}},[a(\"i\",{staticClass:\"el-icon-refresh\"})])],1),e._v(\" \"),a(\"instance\",{ref:\"instance\"})],1),e._v(\" \"),a(\"el-tab-pane\",{attrs:{name:\"Tasks\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"atom\"}}),e._v(\" 任务\")],1),e._v(\" \"),a(\"task\",{ref:\"task\"})],1),e._v(\" \"),a(\"el-tab-pane\",{attrs:{name:\"Todolists\"}},[a(\"span\",{attrs:{slot:\"label\"},slot:\"label\"},[a(\"svg-icon\",{attrs:{\"icon-class\":\"user\"}}),e._v(\" 我的\")],1),e._v(\" \"),a(\"todolist\",{ref:\"todolist\"})],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},\"0fb0\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"d25e\"),n=a(\"24eb\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"ad36\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},\"113d\":function(e,t,a){},1776:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0,a(\"c5f6\");var r={name:\"FlowEditor\",data:function(){return{baseUrl:\"\"}},props:{modelId:{type:String,default:\"\",required:!1},height:{type:String,default:null}},mounted:function(){this.baseUrl=\"/api\";var e=document.getElementById(\"FlowEditor\"),t=document.documentElement.clientWidth;document.documentElement.clientHeight;e.style.width=Number(t)+\"px\",this.height?e.style.height=this.height:e.style.height=\"100vh\"}};t.default=r},\"17e2\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"getImage\",(function(){return u})),a.d(t,\"getBpmnFileNames\",(function(){return c})),a.d(t,\"publishFileName\",(function(){return d})),a.d(t,\"deleteDeployment\",(function(){return p})),a.d(t,\"startTestFlow\",(function(){return f})),a.d(t,\"processTask\",(function(){return m})),a.d(t,\"assigneeTask\",(function(){return h})),a.d(t,\"addModel\",(function(){return g})),a.d(t,\"delModel\",(function(){return v})),a.d(t,\"pubModel\",(function(){return b})),a.d(t,\"expModel\",(function(){return y})),a.d(t,\"impModel\",(function(){return w})),a.d(t,\"models\",(function(){return _})),a.d(t,\"deployments\",(function(){return k})),a.d(t,\"definitions\",(function(){return x})),a.d(t,\"instances\",(function(){return I})),a.d(t,\"tasks\",(function(){return N})),a.d(t,\"myTasks\",(function(){return $})),a.d(t,\"processList\",(function(){return z})),a.d(t,\"todoCount\",(function(){return C})),a.d(t,\"getUsers\",(function(){return S}));var r=a(\"b775\"),n=a.n(r),s=a(\"4328\"),o=a.n(s);const i=\"v1/workflow\",l=\"v1/workflows\";function u(e,t){let a=\"/rest/activiti/process-definitions/\"+e+\"/model-json?nocaching=\"+(new Date).getTime();return null!=t&&(a=\"/rest/activiti/process-instances/\"+t+\"/model-json?processDefinitionId=\"+e+\"&nocaching=\"+(new Date).getTime()),n()({url:a,method:\"get\"})}function c(){return n()({url:i+\"/bpmnfiles/server\",method:\"get\"})}function d(e,t,a){return n()({url:i+\"/deploy/file/server/\"+e,method:\"post\",data:{deployName:t,category:a}})}function p(e){return n()({url:i+\"/deployment/\"+e,method:\"delete\"})}function f(e,t,a){return n()({url:i+\"/start/\"+e+\"/\"+t,method:\"post\",data:a})}function m(e,t,a){return n()({url:i+\"/task/\"+e,method:\"post\",data:Object.assign({comment:t},a)})}function h(e,t,a,r){return n()({url:i+\"/task/\"+e+\"/\"+t,method:\"post\",data:Object.assign({comment:a},r)})}function g(e,t){return n()({url:`${i}/model/${e}/${t}`,method:\"post\"})}function v(e){return n()({url:`${i}/model/${e}`,method:\"delete\"})}function b(e,t){return n()({url:`${i}/deploy/model/${e}`,method:\"post\",data:t})}function y(e){return n()({url:`${i}/model/export/${e}`,method:\"get\",responseType:\"blob\"})}function w(e){return n()({url:i+\"/model/import\",method:\"post\",data:e})}function _(e){return n()({url:l+\"/models?\"+o.a.stringify(e),method:\"get\"})}function k(e){return n()({url:l+\"/deployments?\"+o.a.stringify(e),method:\"get\"})}function x(e){return n()({url:l+\"/definitions?\"+o.a.stringify(e),method:\"get\"})}function I(e){return n()({url:l+\"/instances\",method:\"post\",data:e})}function N(e){return n()({url:l+\"/tasks\",method:\"post\",data:e})}function $(e){return n()({url:l+\"/tasks/my?\"+o.a.stringify(e),method:\"get\"})}function z(e){return n()({url:l+\"/tasks/process/\"+e,method:\"get\"})}function C(){return n()({url:l+\"/tasks/todo/count\",method:\"get\"})}function S(e){return n()({url:\"api/users?\"+o.a.stringify(e),method:\"get\"})}t[\"default\"]={getImage:u,getBpmnFileNames:c,publishFileName:d,deleteDeployment:p,startTestFlow:f,processTask:m,assigneeTask:h,models:_,addModel:g,delModel:v,pubModel:b,expModel:y,impModel:w,deployments:k,definitions:x,instances:I,tasks:N,todoCount:C,myTasks:$,processList:z,getUsers:S}},\"19ca\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"1776\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},\"1b59\":function(e,t,a){},\"1c22\":function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"taskName\",label:\"名称\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"assigneeName\",label:\"处理人\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"startTime\",label:\"开始时间\",\"show-overflow-tooltip\":\"\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"endTime\",label:\"处理时间\",\"show-overflow-tooltip\":\"\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"comments\",label:\"处理意见\",\"show-overflow-tooltip\":\"\"}})],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},\"207f\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"b485\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},\"209b\":function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"head-container\"},[a(\"div\",[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"small\",placeholder:\"请输入Key\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.refresh(t)}},model:{value:e.query.modelKey,callback:function(t){e.$set(e.query,\"modelKey\",t)},expression:\"query.modelKey\"}}),e._v(\" \"),a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"small\",placeholder:\"请输入名称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.refresh(t)}},model:{value:e.query.modelName,callback:function(t){e.$set(e.query,\"modelName\",t)},expression:\"query.modelName\"}}),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"success\",icon:\"el-icon-search\"},on:{click:e.refresh}},[e._v(\"搜索\")]),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:function(t){e.showAdd=!0}}},[e._v(\"添加\")]),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"warning\",icon:\"el-icon-upload\"},on:{click:function(t){e.showImport=!0}}},[e._v(\"导入\")])],1)]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"key\",label:\"关键字\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"version\",label:\"版本\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deploymentId\",label:\"部署ID\"}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"model:del\",\"model:edit\",\"model:pub\"],expression:\"['model:del','model:edit','model:pub']\"}],attrs:{label:\"操作\",width:\"120\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:\"编辑\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\",permission:\"['model:edit']\"},on:{click:function(a){return e.editModel(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"删除\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-delete\",permission:\"['model:del']\"},on:{click:function(a){return e.delModel(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"发布\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-upload\",permission:\"['model:pub']\"},on:{click:function(a){return e.pubModel(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"导出\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-download\",permission:\"['model:exp']\"},on:{click:function(a){return e.expModel(t.row)}}})],1)]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{staticClass:\"no-padding\",attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showEdit,title:e.modelName,fullscreen:\"\"},on:{\"update:visible\":function(t){e.showEdit=t},close:e.refresh}},[a(\"FlowEditor\",{attrs:{\"model-id\":e.modelId}})],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showAdd,title:\"新增模型\",width:\"500px\",height:\"200px\"},on:{\"update:visible\":function(t){e.showAdd=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,rules:e.rules,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"KEY\",prop:\"modelKey\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入KEY\"},model:{value:e.form.modelKey,callback:function(t){e.$set(e.form,\"modelKey\",t)},expression:\"form.modelKey\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"名称\",prop:\"modelName\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入名称\"},model:{value:e.form.modelName,callback:function(t){e.$set(e.form,\"modelName\",t)},expression:\"form.modelName\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.showAdd=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doAddModel}},[e._v(\"确认\")])],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showPublish,title:\"选择流程文件\",width:\"500px\",height:\"200px\"},on:{\"update:visible\":function(t){e.showPublish=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,rules:e.rules2,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"部署名称\",prop:\"deployName\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入部署名称\"},model:{value:e.form.deployName,callback:function(t){e.$set(e.form,\"deployName\",t)},expression:\"form.deployName\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"部署分类\",prop:\"category\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入部署分类\"},model:{value:e.form.category,callback:function(t){e.$set(e.form,\"category\",t)},expression:\"form.category\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.showPublish=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doPublish}},[e._v(\"确认\")])],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showImport,title:\"导入模型\",width:\"500px\",height:\"200px\"},on:{\"update:visible\":function(t){e.showImport=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,rules:e.rules3,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"KEY\",prop:\"modelKey\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入KEY\"},model:{value:e.form.modelKey,callback:function(t){e.$set(e.form,\"modelKey\",t)},expression:\"form.modelKey\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"名称\",prop:\"modelName\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入名称\"},model:{value:e.form.modelName,callback:function(t){e.$set(e.form,\"modelName\",t)},expression:\"form.modelName\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"模型文件\",prop:\"uploadFiles\"}},[a(\"el-upload\",{ref:\"upload\",staticClass:\"upload-demo\",attrs:{action:\"#\",accept:\"bpmn\",\"on-remove\":e.handleRemove,\"file-list\":e.form.uploadFiles,\"http-request\":e.handleChange,\"auto-upload\":!1}},[a(\"el-button\",{attrs:{slot:\"trigger\",size:\"small\",type:\"primary\"},slot:\"trigger\"},[e._v(\"选取文件\")]),e._v(\" \"),a(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"只能上传bpmn文件，且不超过500kb\")])],1)],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.showAdd=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitUpload}},[e._v(\"确认\")])],1)],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},\"21ac\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"58e0\"),n=a(\"f26b\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"3ee4\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},2439:function(e,t,a){\"use strict\";a.r(t);var r=a(\"f1237\"),n=a(\"cbea\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,\"3093e2ed\",null);t[\"default\"]=i.exports},\"24eb\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"9212\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},\"29d6\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"1c22\"),n=a(\"9d5a\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"702f\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},3646:function(e,t,a){\"use strict\";a.r(t);var r=a(\"be22\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},\"3ee4\":function(e,t,a){\"use strict\";a(\"63d7\")},\"58e0\":function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"category\",label:\"分类\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"version\",label:\"版本\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"key\",label:\"关键字\"}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"process:test\"],expression:\"['process:test']\"}],attrs:{label:\"操作\",width:\"100\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:\"流程图\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-picture\",permission:\"['instance:image']\"},on:{click:function(a){return e.viewImage(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"发起新流程\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-plus\",permission:\"['process:test']\"},on:{click:function(a){return e.toStartFlow(t.row)}}})],1)]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showImage,title:\"\",top:\"5vh\",width:\"90%\"},on:{\"update:visible\":function(t){e.showImage=t}}},[a(\"flow-image\",{attrs:{\"process-id\":e.form.processId}})],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.startFlow,title:\"发起新流程\",width:\"500px\",height:\"200px\"},on:{\"update:visible\":function(t){e.startFlow=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,rules:e.rules,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"业务主键\",prop:\"businessKey\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入业务主键\"},model:{value:e.form.businessKey,callback:function(t){e.$set(e.form,\"businessKey\",t)},expression:\"form.businessKey\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"参数\",prop:\"parameter\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{type:\"textarea\",placeholder:\"请输入参数(JSON)\"},model:{value:e.form.parameter,callback:function(t){e.$set(e.form,\"parameter\",t)},expression:\"form.parameter\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.startFlow=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doStartFlow}},[e._v(\"启动\")])],1)],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},\"59d77\":function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=a(\"17e2\"),s=r(a(\"fda1\")),o={name:\"Definition\",data:function(){return{rows:[],loading:!1,startFlow:!1,showImage:!1,form:{processId:\"\",businessKey:\"\",parameter:\"\"},page:{start:0,size:10,total:0},rules:{businessKey:[{required:!0,message:\"业务主键不能为空\",trigger:\"blur\"}]}}},components:{FlowImage:s.default},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;(0,n.definitions)({order:\"asc\",latest:!0,sort:\"id\",size:this.page.size,start:this.page.start}).then((function(t){e.rows=t.data.data,e.page.total=t.data.total}))},viewImage:function(e){this.form.processId=e.key,this.showImage=!0},toStartFlow:function(e){this.startFlow=!0,this.form.processId=e.key},doStartFlow:function(){var e=this,t={};this.form.parameter&&(t=JSON.parse(this.form.parameter)),(0,n.startTestFlow)(this.form.processId,this.form.businessKey,t).then((function(t){e.$message.success(\"流程发起成功:\"+t.data),e.startFlow=!1}))},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}}};t.default=o},\"5e54\":function(e,t,a){\"use strict\";a(\"113d\")},\"63d7\":function(e,t,a){},\"656b\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"9955\"),n=a(\"207f\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"5e54\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},\"6fd5\":function(e,t,a){},\"702f\":function(e,t,a){\"use strict\";a(\"6fd5\")},7469:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=r(a(\"cb47\")),s=r(a(\"21ac\")),o=r(a(\"2439\")),i=r(a(\"cae2\")),l=r(a(\"0fb0\")),u=r(a(\"656b\")),c={name:\"workflow\",data:function(){return{}},components:{model:n.default,definition:s.default,deployment:o.default,task:l.default,instance:i.default,todolist:u.default},methods:{refresh:function(e){this.$refs[e].refresh()}}};t.default=c},8854:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0,a(\"7f7f\");var n=a(\"17e2\"),s=r(a(\"8b33\")),o={name:\"Model\",data:function(){return{rows:[],loading:!1,showEdit:!1,showAdd:!1,showPublish:!1,showImport:!1,modelId:\"\",modelName:\"\",fileData:{},query:{modelName:\"\",modelKey:\"\"},form:{modelName:\"\",modelKey:\"\",deployName:\"\",category:\"\",id:\"\",uploadFiles:[]},page:{start:0,size:10,total:0},rules:{modelName:[{required:!0,message:\"名称不能为空\",trigger:\"blur\"}],modelKey:[{required:!0,message:\"Key不能为空\",trigger:\"blur\"}]},rules2:{deployName:[{required:!0,message:\"名称不能为空\",trigger:\"blur\"}],category:[{required:!0,message:\"分类不能为空\",trigger:\"blur\"}]},rules3:{modelName:[{required:!0,message:\"名称不能为空\",trigger:\"blur\"}],modelKey:[{required:!0,message:\"Key不能为空\",trigger:\"blur\"}],uploadFiles:[{required:!0,message:\"模型文件不能为空\",trigger:\"change\"}]}}},components:{FlowEditor:s.default},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;(0,n.models)({key:this.query.modelKey,name:this.query.modelName,size:this.page.size,page:this.page.start}).then((function(t){e.rows=t.data.records,e.page.total=t.data.total}))},editModel:function(e){this.modelId=e.id,this.modelName=e.name,this.showEdit=!0},addModel:function(){this.showAdd=!0,this.query.modelKey=\"\",this.query.modelName=\"\"},doAddModel:function(){var e=this;(0,n.addModel)(this.form.modelKey,this.form.modelName).then((function(t){0===t.code?(e.showAdd=!1,e.$message.success(\"添加成功\"+t.data.id),e.refresh()):e.$message.error(t.msg||\"添加失败\")}))},delModel:function(e){var t=this;this.$confirm(\"确定要删除该模型吗？\").then((function(){(0,n.delModel)(e.id).then((function(e){0===e.code?(t.refresh(),t.$message.success(\"删除成功\")):t.$message.error(e.msg)}))}))},pubModel:function(e){this.form.id=e.id,this.form.deployName=e.name,this.showPublish=!0},doPublish:function(){var e=this;(0,n.pubModel)(this.form.id,this.form).then((function(t){0===t.code?(e.showPublish=!1,e.$message.success(\"发布成功\"),e.refresh()):e.$message.error(t.msg)}))},expModel:function(e){(0,n.expModel)(e.id).then((function(t){var a=window.URL.createObjectURL(new Blob([t])),r=document.createElement(\"a\");r.style.display=\"none\",r.href=a;var n=(e.key||e.name)+\".bpmn\";r.setAttribute(\"download\",n),document.body.appendChild(r),r.click(),document.body.removeChild(r)}))},handleChange:function(e){this.fileData.append(\"file\",e.file)},submitUpload:function(){var e=this;this.fileData=new FormData,this.$refs.upload.submit();var t=new FormData;t.append(\"file\",this.fileData),this.fileData.append(\"modelName\",this.form.modelName),this.fileData.append(\"modelKey\",this.form.modelKey),(0,n.impModel)(this.fileData).then((function(t){0==t.code?(e.showImport=!1,e.$message.success(\"导入成功\"),e.refresh()):e.$message.error(t.msg)}))},handleRemove:function(e,t){},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}}};t.default=o},\"88e9\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"c7d9\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},\"8b33\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"a41fe\"),n=a(\"19ca\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,\"2590015a\",null);t[\"default\"]=i.exports},\"8d27\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0,a(\"7f7f\");var r=a(\"17e2\"),n={name:\"Deployment\",data:function(){return{rows:[],loading:!1,selectBpmn:!1,form:{fileName:\"\",deployName:\"\",category:\"\"},bpmnFileNames:[],query:{},page:{start:0,size:10,total:0},rules:{fileName:[{required:!0,message:\"文件名称不能为空\",trigger:\"change\"}],deployName:[{required:!0,message:\"部署名称不能为空\",trigger:\"blur\"}]}}},components:{},mounted:function(){var e=this;this.refresh(),(0,r.getBpmnFileNames)().then((function(t){e.bpmnFileNames=t.data}))},methods:{refresh:function(){var e=this;(0,r.deployments)(Object.assign({order:\"desc\",sort:\"deployTime\",size:this.page.size,start:this.page.start},this.query.name?{name:this.query.name}:{})).then((function(t){e.rows=t.data.data,e.page.total=t.data.total}))},publish:function(){var e=this;this.$refs[\"form\"].validate((function(t){t&&(0,r.publishFileName)(e.form.fileName,e.form.deployName,e.form.category).then((function(t){e.$message.success(\"流程发布成功\"),e.selectBpmn=!1,e.refresh()})).catch((function(t){e.$message.error(t)}))}))},deleteDeploy:function(e){var t=this;this.$confirm(\"确定要删除流程[\"+e.name+\"]吗？\").then((function(){(0,r.deleteDeployment)(e.id).then((function(e){t.$message.success(\"删除成功\"),t.refresh()}))}))},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}}};t.default=n},9212:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=r(a(\"ded3\")),s=a(\"2f62\"),o=a(\"17e2\"),i=r(a(\"fda1\")),l={name:\"Task\",data:function(){return{query:{type:\"1\",finished:\"\"},form:{taskId:\"\",assignee:\"\",comment:\"\",parameter:\"\"},current:{},rows:[],loading:!1,startFlow:!1,isAssign:!1,showImage:!1,users:[],page:{start:0,size:10,total:0}}},components:{FlowImage:i.default},mounted:function(){var e=this;this.refresh(),(0,o.getUsers)({page:0,size:999,sort:\"username,desc\",deptId:this.user().deptId,enabled:!0}).then((function(t){e.users=t.content}))},methods:(0,n.default)({refresh:function(){var e=this;(0,o.tasks)({order:\"desc\",latest:!0,sort:\"startTime\",size:this.page.size,start:this.page.start,finished:\"0\"==this.query.type?this.query.finished:\"3\"==this.query.type,taskCandidateGroup:\"2\"==this.query.type?this.currentRole().id:null,taskAssignee:\"1\"==this.query.type||\"3\"==this.query.type?this.user().username:null}).then((function(t){e.rows=t.data.data,e.page.total=t.data.total}))},viewImage:function(e){this.current.processInstanceId=e.processInstanceId,this.current.processDefinitionId=e.processDefinitionId,this.showImage=!0},toProcess:function(e){this.form.taskId=e.id,this.startFlow=!0,this.isAssign=!1},toAssignee:function(e){this.form.taskId=e.id,this.startFlow=!0,this.isAssign=!0},doProcess:function(){var e=this,t={};this.form.parameter&&(t=JSON.parse(this.form.parameter)),(0,o.processTask)(this.form.taskId,this.form.comment,t).then((function(t){0===t.code?(e.$message.success(\"任务已处理\"),e.startFlow=!1,e.refresh()):e.$message.error(t.msg)})).catch((function(t){e.$message.error(t)}))},doAssignee:function(){var e=this,t={};this.form.parameter&&(t=JSON.parse(this.form.parameter)),(0,o.assigneeTask)(this.form.taskId,this.form.assignee,this.form.comment,t).then((function(t){0===t.code?(e.$message.success(\"任务已转出\"),e.startFlow=!1,e.refresh()):e.$message.error(t.msg)})).catch((function(t){e.$message.error(t)}))},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}},(0,s.mapGetters)([\"currentRole\",\"user\"]))};t.default=l},\"95f6\":function(e,t,a){\"use strict\";a(\"1b59\")},9955:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"head-container\"},[a(\"div\",[a(\"el-tabs\",{on:{\"tab-click\":e.refresh},model:{value:e.query.type,callback:function(t){e.$set(e.query,\"type\",t)},expression:\"query.type\"}},[a(\"el-tab-pane\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"myTask:all\"],expression:\"['myTask:all']\"}],attrs:{label:\"所有任务\",name:\"0\"}}),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"待办任务\",name:\"1\"}}),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"已完成\",name:\"4\"}}),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"进行中\",name:\"5\"}})],1)],1),e._v(\" \"),a(\"div\",[a(\"el-form\",{attrs:{inline:\"\"}},[a(\"el-form-item\",{attrs:{label:\"类型\",prop:\"processId\"}},[a(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},on:{change:e.refresh},model:{value:e.query.processId,callback:function(t){e.$set(e.query,\"processId\",t)},expression:\"query.processId\"}},[a(\"el-option\",{attrs:{value:\"\",label:\"全部\"}}),e._v(\" \"),e._l(e.dict[\"PROCESS_ID\"],(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.label,value:e.value}})}))],2)],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"名称\",prop:\"processName\"}},[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"180px\"},attrs:{placeholder:\"请输入任务名称\",clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.refresh(t)}},model:{value:e.query.processName,callback:function(t){e.$set(e.query,\"processName\",t)},expression:\"query.processName\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"创建人\",prop:\"starter\"}},[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"180px\"},attrs:{placeholder:\"请输入创建人\",clearable:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.refresh(t)}},model:{value:e.query.starter,callback:function(t){e.$set(e.query,\"starter\",t)},expression:\"query.starter\"}})],1),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"success\",icon:\"el-icon-search\"},on:{click:e.refresh}},[e._v(\"搜索\")])],1)],1)]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"businessKey\",label:\"编号\",width:\"120px\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"名称\",\"show-overflow-tooltip\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:t.row.taskName}},[\"1\"==e.query.type?a(\"el-link\",{on:{click:function(a){return e.doProcess(t.row)}}},[e._v(e._s(t.row[\"businessName\"]))]):e._e(),e._v(\" \"),\"1\"!=e.query.type?a(\"span\",[e._v(e._s(t.row[\"businessName\"]))]):e._e()],1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"类型\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"\\n        \"+e._s(e.dict.label[\"PROCESS_ID\"][t.row.processId])+\"\\n      \")]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"创建人\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:t.row.starter}},[a(\"span\",[e._v(e._s(t.row.starterName))])])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"处理人\",\"show-overflow-tooltip\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:t.row.taskAssignee}},[a(\"span\",[e._v(e._s(t.row.assigneeName))])])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"startDate\",label:\"开始时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"endDate\",label:\"结束时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"task:process\"],expression:\"['task:process']\"}],attrs:{label:\"操作\",width:\"60\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:\"流程图\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-picture\",permission:\"['instance:image']\"},on:{click:function(a){return e.viewImage(t.row)}}})],1)]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showImage,title:\"流程图\",width:\"90%\"},on:{\"update:visible\":function(t){e.showImage=t}}},[a(\"flow-image\",{attrs:{height:\"400px\",width:\"80vw\",\"process-instance-id\":e.current.processInstanceId,\"process-definition-id\":e.current.processDefinitionId}}),e._v(\" \"),a(\"Processes\",{attrs:{\"process-instance-id\":e.current.processInstanceId}})],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.startFlow,title:\"处理任务\",width:\"500px\",height:\"250px\"},on:{\"update:visible\":function(t){e.startFlow=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,\"label-width\":\"90px\"}},[e.isAssign?a(\"el-form-item\",{attrs:{label:\"接收人\",prop:\"assignee\"}},[a(\"el-select\",{staticStyle:{width:\"350px\"},model:{value:e.form.assignee,callback:function(t){e.$set(e.form,\"assignee\",t)},expression:\"form.assignee\"}},e._l(e.users,(function(e){return a(\"el-option\",{attrs:{value:e.username,disabled:\"item.username==user().username\",label:e.nickName}})})),1)],1):e._e(),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"意见\",prop:\"businessKey\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{type:\"textarea\",placeholder:\"请输入意见\"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,\"comment\",t)},expression:\"form.comment\"}})],1),e._v(\" \"),e.isAssign?e._e():a(\"el-form-item\",{attrs:{label:\"参数\",prop:\"parameter\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{type:\"textarea\",placeholder:\"请输入参数(JSON)\"},model:{value:e.form.parameter,callback:function(t){e.$set(e.form,\"parameter\",t)},expression:\"form.parameter\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.startFlow=!1}}},[e._v(\"取消\")]),e._v(\" \"),e.isAssign?e._e():a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doProcess}},[e._v(\"完成\")]),e._v(\" \"),e.isAssign?a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doAssignee}},[e._v(\"确定\")]):e._e()],1)],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},\"9d5a\":function(e,t,a){\"use strict\";a.r(t);var r=a(\"d4bd\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},a1e2:function(e,t,a){\"use strict\";a.r(t);var r=a(\"8854\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},a41fe:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"iframe\",{staticStyle:{width:\"100%\",height:\"100%\",margin:\"0px\"},attrs:{id:\"FlowEditor\",src:e.baseUrl+\"/activiti-app/index.html#/editor/\"+e.modelId,frameborder:\"0\",scrolling:\"auto\"}})},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},a5fc:function(e,t,a){},aa4f:function(e,t,a){\"use strict\";a(\"e2d5\")},ad36:function(e,t,a){\"use strict\";a(\"a5fc\")},b45e:function(e,t,a){\"use strict\";a(\"ffdd\")},b485:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=r(a(\"ded3\")),s=a(\"2f62\"),o=a(\"17e2\"),i=r(a(\"fda1\")),l=r(a(\"29d6\")),u={name:\"TodoList\",dicts:[\"PROCESS_ID\"],components:{FlowImage:i.default,Processes:l.default},data:function(){return{query:{type:\"1\",finished:\"\",processId:\"\",processName:\"\"},form:{taskId:\"\",assignee:\"\",comment:\"\",parameter:\"\"},current:{},rows:[],loading:!1,startFlow:!1,isAssign:!1,showImage:!1,businessKey:\"\",users:[],page:{start:0,size:10,total:0}}},mounted:function(){var e=this;this.refresh(),(0,o.getUsers)({page:0,size:999,sort:\"username,desc\",deptId:this.user().deptId,enabled:!0}).then((function(t){e.users=t.content}))},methods:(0,n.default)({refresh:function(){var e=this;(0,o.myTasks)({order:\"desc\",latest:!0,sort:\"startTime\",size:this.page.size,start:this.page.start,type:\"4\"==this.query.type||\"5\"==this.query.type?\"3\":this.query.type,finished:\"4\"==this.query.type||\"0\"==this.query.type&&\"\",processName:this.query.processName,starter:this.query.starter}).then((function(t){e.rows=t.data.records,e.page.total=t.data.total}))},viewImage:function(e){this.current.processInstanceId=e.processInstanceId,this.current.processDefinitionId=e.processDefinitionId,this.showImage=!0},toProcess:function(e){this.form.taskId=e.id,this.startFlow=!0,this.isAssign=!1},toAssignee:function(e){this.form.taskId=e.id,this.startFlow=!0,this.isAssign=!0},doProcess:function(e){\"Pncs.001\"==e.processId&&(this.businessKey=e.businessKey,this.$refs[\"indexProcess\"].approveDialog=!0)},processSuccess:function(){this.refresh()},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}},(0,s.mapGetters)([\"currentRole\",\"user\"]))};t.default=u},be22:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=a(\"17e2\"),s=r(a(\"fda1\")),o={name:\"Instance\",data:function(){return{rows:[],loading:!1,current:{},showImage:!1,page:{start:0,size:10,total:0}}},components:{FlowImage:s.default},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;(0,n.instances)({order:\"desc\",latest:!0,sort:\"startTime\",size:this.page.size,start:this.page.start}).then((function(t){e.rows=t.data.data,e.page.total=t.data.total}))},viewImage:function(e){this.current.processInstanceId=e.id,this.current.processDefinitionId=e.processDefinitionId,this.showImage=!0},pageChangeHandler:function(e){this.page.start=e,this.refresh()},sizeChangeHandler:function(e){this.page.size=e,this.page.start=1,this.refresh()}}};t.default=o},c68a:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"businessKey\",label:\"业务主键\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"processDefinitionId\",label:\"流程定义ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"startTime\",label:\"开始时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"endTime\",label:\"结束时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"instance:image\"],expression:\"['instance:image']\"}],attrs:{label:\"操作\",width:\"60\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:\"流程图\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-picture\",permission:\"['instance:image']\"},on:{click:function(a){return e.viewImage(t.row)}}})],1)]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showImage,title:\"\",width:\"90%\"},on:{\"update:visible\":function(t){e.showImage=t}}},[a(\"flow-image\",{attrs:{\"process-instance-id\":e.current.processInstanceId,\"process-definition-id\":e.current.processDefinitionId}})],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},c7d9:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0,a(\"c5f6\");var r={name:\"FlowImage\",data:function(){return{baseUrl:\"\"}},props:{processId:{type:String,default:\"\",required:!1},businessKey:{type:String,default:\"\",required:!1},processInstanceId:{type:String,default:\"\",required:!1},processDefinitionId:{type:String,default:\"\",required:!1},width:{type:String,default:null},height:{type:String,default:null}},mounted:function(){this.baseUrl=\"/api\";var e=document.getElementById(\"activitiFlow\"),t=document.documentElement.clientWidth,a=document.documentElement.clientHeight;this.width?e.style.width=this.width:e.style.width=Number(t)+\"px\",this.height?e.style.height=this.height:e.style.height=Number(a)-200+\"px\"}};t.default=r},cae2:function(e,t,a){\"use strict\";a.r(t);var r=a(\"c68a\"),n=a(\"3646\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"b45e\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},cb47:function(e,t,a){\"use strict\";a.r(t);var r=a(\"209b\"),n=a(\"a1e2\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"95f6\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},cbea:function(e,t,a){\"use strict\";a.r(t);var r=a(\"8d27\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},d25e:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"head-container\"},[a(\"div\",[a(\"el-radio-group\",{staticClass:\"filter-item\",on:{change:e.refresh},model:{value:e.query.type,callback:function(t){e.$set(e.query,\"type\",t)},expression:\"query.type\"}},[a(\"el-radio-button\",{attrs:{permission:\"['task:all']\",label:\"0\"}},[e._v(\"所有任务\")]),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"1\"}},[e._v(\"待办任务\")]),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"2\"}},[e._v(\"可办任务\")]),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"3\"}},[e._v(\"已办任务\")])],1),e._v(\" \"),\"0\"==e.query.type?a(\"el-radio-group\",{staticClass:\"filter-item\",on:{change:e.refresh},model:{value:e.query.finished,callback:function(t){e.$set(e.query,\"finished\",t)},expression:\"query.finished\"}},[a(\"el-radio-button\",{attrs:{label:\"\"}},[e._v(\"全部\")]),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"true\"}},[e._v(\"已完成\")]),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"false\"}},[e._v(\"未完成\")])],1):e._e()],1)]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"assignee\",label:\"处理人\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"owner\",label:\"拥有人\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"processDefinitionId\",label:\"流程定义ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"processInstanceId\",label:\"流程实例ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"startTime\",label:\"开始时间\",\"show-overflow-tooltip\":\"\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"endTime\",label:\"结束时间\",\"show-overflow-tooltip\":\"\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"task:process\"],expression:\"['task:process']\"}],attrs:{label:\"操作\",width:\"120\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{attrs:{content:\"流程图\"}},[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-picture\",permission:\"['instance:image']\"},on:{click:function(a){return e.viewImage(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"处理任务\"}},[t.row.endTime?e._e():a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-caret-right\",permission:\"['task:process']\"},on:{click:function(a){return e.toProcess(t.row)}}})],1),e._v(\" \"),a(\"el-tooltip\",{attrs:{content:\"任务转出\"}},[t.row.assignee!=e.user().username||t.row.endTime?e._e():a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-top\",permission:\"['task:assignee']\"},on:{click:function(a){return e.toAssignee(t.row)}}})],1)]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.showImage,title:\"流程图\",width:\"90%\"},on:{\"update:visible\":function(t){e.showImage=t}}},[a(\"flow-image\",{attrs:{\"process-instance-id\":e.current.processInstanceId,\"process-definition-id\":e.current.processDefinitionId}})],1),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.startFlow,title:\"处理任务\",width:\"500px\",height:\"250px\"},on:{\"update:visible\":function(t){e.startFlow=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,\"label-width\":\"90px\"}},[e.isAssign?a(\"el-form-item\",{attrs:{label:\"接收人\",prop:\"assignee\"}},[a(\"el-select\",{staticStyle:{width:\"350px\"},model:{value:e.form.assignee,callback:function(t){e.$set(e.form,\"assignee\",t)},expression:\"form.assignee\"}},e._l(e.users,(function(e){return a(\"el-option\",{attrs:{value:e.username,disabled:\"item.username==user().username\",label:e.nickName}})})),1)],1):e._e(),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"意见\",prop:\"businessKey\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{type:\"textarea\",placeholder:\"请输入意见\"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,\"comment\",t)},expression:\"form.comment\"}})],1),e._v(\" \"),e.isAssign?e._e():a(\"el-form-item\",{attrs:{label:\"参数\",prop:\"parameter\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{type:\"textarea\",placeholder:\"请输入参数(JSON)\"},model:{value:e.form.parameter,callback:function(t){e.$set(e.form,\"parameter\",t)},expression:\"form.parameter\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.startFlow=!1}}},[e._v(\"取消\")]),e._v(\" \"),e.isAssign?e._e():a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doProcess}},[e._v(\"完成\")]),e._v(\" \"),e.isAssign?a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.doAssignee}},[e._v(\"确定\")]):e._e()],1)],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},d4bd:function(e,t,a){\"use strict\";var r=a(\"4ea4\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=a(\"17e2\"),s=r(a(\"fda1\")),o={name:\"Processes\",data:function(){return{query:{type:\"1\",finished:\"\"},form:{taskId:\"\",assignee:\"\",comment:\"\",parameter:\"\"},current:{},rows:[],loading:!1,startFlow:!1,isAssign:!1,showImage:!1,users:[],page:{start:0,size:10,total:0}}},props:{processInstanceId:{type:String,required:!0,default:null}},components:{FlowImage:s.default},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;(0,n.processList)(this.processInstanceId).then((function(t){e.rows=t.data}))}},watch:{processInstanceId:function(e,t){this.refresh()}}};t.default=o},e2d5:function(e,t,a){},f0ba:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"iframe\",{staticStyle:{width:\"100%\",height:\"100%\"},attrs:{id:\"activitiFlow\",src:e.baseUrl+\"/activiti-admin/display/index.html?showTip=false&showLineText=true&processId=\"+e.processId+\"&businessKey=\"+e.businessKey+\"&processInstanceId=\"+e.processInstanceId+\"&processDefinitionId=\"+e.processDefinitionId,frameborder:\"0\",scrolling:\"auto\"}})},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},f1237:function(e,t,a){\"use strict\";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"head-container\"},[a(\"div\",[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"small\",placeholder:\"请输入名称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.refresh(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,\"name\",t)},expression:\"query.name\"}}),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"success\",icon:\"el-icon-search\"},on:{click:e.refresh}},[e._v(\"搜索\")]),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"warning\",icon:\"el-icon-plus\"},on:{click:function(t){e.selectBpmn=!0}}},[e._v(\"发布\")])],1)]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.rows}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"category\",label:\"分类\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"deploymentTime\",label:\"发布时间\",formatter:e.timeColumnFormat}}),e._v(\" \"),a(\"el-table-column\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"deploy:del\"],expression:\"['deploy:del']\"}],attrs:{label:\"操作\",width:\"125\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-remove-outline\",permission:\"['deploy:del']\"},on:{click:function(a){return e.deleteDeploy(t.row)}}},[e._v(\"删除\\n        \")])]}}])})],1),e._v(\" \"),a(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{\"page-size\":e.page.size,total:e.page.total,\"current-page\":e.page.page,layout:\"total, prev, pager, next, sizes\"},on:{\"update:pageSize\":function(t){return e.$set(e.page,\"size\",t)},\"update:page-size\":function(t){return e.$set(e.page,\"size\",t)},\"update:currentPage\":function(t){return e.$set(e.page,\"page\",t)},\"update:current-page\":function(t){return e.$set(e.page,\"page\",t)},\"size-change\":function(t){return e.sizeChangeHandler(t)},\"current-change\":e.pageChangeHandler}}),e._v(\" \"),a(\"el-dialog\",{attrs:{\"append-to-body\":\"\",\"close-on-click-modal\":!1,visible:e.selectBpmn,title:\"选择流程文件\",width:\"500px\",height:\"200px\"},on:{\"update:visible\":function(t){e.selectBpmn=t}}},[a(\"el-form\",{ref:\"form\",attrs:{inline:!0,model:e.form,rules:e.rules,\"label-width\":\"90px\"}},[a(\"el-form-item\",{attrs:{label:\"文件名称\",prop:\"fileName\"}},[a(\"el-select\",{staticStyle:{width:\"350px\"},model:{value:e.form.fileName,callback:function(t){e.$set(e.form,\"fileName\",t)},expression:\"form.fileName\"}},e._l(e.bpmnFileNames,(function(e){return a(\"el-option\",{attrs:{value:e,label:e}})})),1)],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"部署名称\",prop:\"deployName\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入部署名称\"},model:{value:e.form.deployName,callback:function(t){e.$set(e.form,\"deployName\",t)},expression:\"form.deployName\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"部署分类\",prop:\"category\"}},[a(\"el-input\",{staticStyle:{width:\"350px\"},attrs:{placeholder:\"请输入部署分类\"},model:{value:e.form.category,callback:function(t){e.$set(e.form,\"category\",t)},expression:\"form.category\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"text\"},on:{click:function(t){e.selectBpmn=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.publish}},[e._v(\"确认\")])],1)],1)],1)},n=[];a.d(t,\"a\",(function(){return r})),a.d(t,\"b\",(function(){return n}))},f229:function(e,t,a){\"use strict\";a.r(t);var r=a(\"7469\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},f26b:function(e,t,a){\"use strict\";a.r(t);var r=a(\"59d77\"),n=a.n(r);for(var s in r)\"default\"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t[\"default\"]=n.a},fda1:function(e,t,a){\"use strict\";a.r(t);var r=a(\"f0ba\"),n=a(\"88e9\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,\"2b68e570\",null);t[\"default\"]=i.exports},fdf3:function(e,t,a){\"use strict\";a.r(t);var r=a(\"0f5d\"),n=a(\"f229\");for(var s in n)\"default\"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a(\"aa4f\");var o=a(\"2877\"),i=Object(o[\"a\"])(n[\"default\"],r[\"a\"],r[\"b\"],!1,null,null,null);t[\"default\"]=i.exports},ffdd:function(e,t,a){}}]);","extractedComments":[]}