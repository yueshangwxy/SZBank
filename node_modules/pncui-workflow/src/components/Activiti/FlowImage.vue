<template>
  <iframe id="activitiFlow"
          :src="baseUrl+'/activiti-admin/display/index.html?showTip=false&showLineText=true&processId='+processId+'&businessKey='+businessKey+'&processInstanceId='+processInstanceId+'&processDefinitionId='+processDefinitionId"
          style="width:100%;height:100%;" frameborder="0" scrolling="auto"></iframe>
</template>

<script>
  export default {
    name: 'FlowImage',
    data() {
      return {
        baseUrl: ''
      }
    },
    props: {
      /**
       * 可通过processId+businessKey
       * 或者processInstanceId
       * 或者 processInstanceId+processDefinitionId
       * 进行流程图查看
       */
      processId: {
        type: String,
        default: '',
        required: false
      },
      businessKey: {
        type: String,
        default: '',
        required: false
      },
      processInstanceId: {
        type: String,
        default: '',
        required: false
      },
      processDefinitionId: {
        type: String,
        default: '',
        required: false
      },
      width: {
        type: String,
        default: null
      },
      height: {
        type: String,
        default: null
      }
    },
    mounted() {
      this.baseUrl = process.env.NODE_ENV === 'production' ? process.env.VUE_APP_BASE_API : '/api' // api 的 base_url
      /**
       * iframe-宽高自适应显示
       */
      const oIframe = document.getElementById('activitiFlow')
      const deviceWidth = document.documentElement.clientWidth
      const deviceHeight = document.documentElement.clientHeight
      // 数字是页面布局宽度差值
      if (this.width) {
        oIframe.style.width = this.width
      } else {
        oIframe.style.width = (Number(deviceWidth)) + 'px'
      }

      // 数字是页面布局宽度差值
      if (this.height) {
        oIframe.style.height = this.height
      } else {
        oIframe.style.height = (Number(deviceHeight) - 200) + 'px'
      }

      // 数字是页面布局高度差
    }
  }
</script>

<style scoped>

</style>
