<template>
  <iframe id="FlowEditor"
          :src="baseUrl+'/activiti-app/index.html#/editor/'+modelId"
          style="width:100%;height:100%;margin: 0px;" frameborder="0" scrolling="auto"></iframe>
</template>

<script>
  export default {
    name: 'FlowEditor',
    data() {
      return {
        baseUrl: ''
      }
    },
    props: {
      /**
       * 可通过processId+businessKey
       * 或者processInstanceId
       * 或者 processInstanceId+processDefinitionId
       * 进行流程图查看
       */
      modelId: {
        type: String,
        default: '',
        required: false
      },
      height: {
        type: String,
        default: null
      }
    },
    mounted() {
      this.baseUrl = process.env.NODE_ENV === 'production' ? process.env.VUE_APP_BASE_API : '/api' // api 的 base_url
      /**
       * iframe-宽高自适应显示
       */
      const oIframe = document.getElementById('FlowEditor')
      const deviceWidth = document.documentElement.clientWidth
      const deviceHeight = document.documentElement.clientHeight
      oIframe.style.width = (Number(deviceWidth)) + 'px'
      // 数字是页面布局宽度差值
      if (this.height) {
        oIframe.style.height = this.height
      } else {
        oIframe.style.height = '100vh'//(Number(deviceHeight) - 300) + 'px'
      }
    }
  }
</script>

<style scoped>

</style>
