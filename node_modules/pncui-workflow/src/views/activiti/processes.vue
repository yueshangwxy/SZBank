<template>
  <div class="app-container">
    <!--表格渲染-->
    <el-table ref="table" v-loading="loading" :data="rows" style="width: 100%;">
      <el-table-column prop="taskName" label="名称"/>
      <!-- <el-table-column v-if="columns.visible('address')" :show-overflow-tooltip="true" prop="address" label="IP来源" /> -->
      <el-table-column prop="assigneeName" label="处理人"/>
      <!-- <el-table-column prop="executionId" label="执行ID"/>-->
      <!-- <el-table-column v-if="columns.visible('address')" :show-overflow-tooltip="true" prop="address" label="IP来源" /> -->
      <el-table-column prop="startTime" label="开始时间" show-overflow-tooltip :formatter="timeColumnFormat"/>
      <el-table-column prop="endTime" label="处理时间" show-overflow-tooltip :formatter="timeColumnFormat"/>
      <el-table-column prop="comments" label="处理意见" show-overflow-tooltip/>
    </el-table>

  </div>
</template>

<script>
  import { processList } from '../../api/workflow/activiti'
  import FlowImage from '../../components/Activiti/FlowImage'

  export default {
    name: 'Processes',
    data() {
      return {
        query: { type: '1', finished: '' },
        form: { taskId: '', assignee: '', comment: '', parameter: '' },
        current: {},
        rows: [],
        loading: false,
        startFlow: false,
        isAssign: false,
        showImage: false,
        users: [],
        page: {
          // 页码
          start: 0,
          // 每页数据条数
          size: 10,
          // 总数据条数
          total: 0
        }
      }
    },
    props: {
      processInstanceId: { type: String, required: true, default: null }
    },
    components: { FlowImage },
    mounted() {
      this.refresh()
    },
    methods: {
      refresh() {
        console.log('==refresh======', this.processInstanceId)
        processList(this.processInstanceId).then(res => {
          //console.log(res)
          this.rows = res.data
        })
      }
    },
    watch: {
      processInstanceId(newValue, oldValue) {
        console.log('==refresh======', this.currentRole())
        this.refresh()
      }
    }
  }
</script>

<style>
  .demo-table-expand {
    font-size: 0;
  }

  .demo-table-expand label {
    width: 70px;
    color: #99a9bf;
  }

  .demo-table-expand .el-form-item {
    margin-right: 0;
    margin-bottom: 0;
    width: 100%;
  }

  .demo-table-expand .el-form-item__content {
    font-size: 12px;
  }
</style>
