"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModifierKey = void 0;
var ModifierKey;
(function (ModifierKey) {
    function parse(modifiers) {
        var or = [];
        var and = [];
        if (Array.isArray(modifiers)) {
            or.push.apply(or, modifiers);
        }
        else {
            modifiers.split('|').forEach(function (item) {
                if (item.indexOf('&') === -1) {
                    or.push(item);
                }
                else {
                    and.push.apply(and, item.split('&'));
                }
            });
        }
        return { or: or, and: and };
    }
    ModifierKey.parse = parse;
    function equals(modifiers1, modifiers2) {
        if (modifiers1 != null && modifiers2 != null) {
            var m1 = parse(modifiers1);
            var m2 = parse(modifiers2);
            var or1 = m1.or.sort();
            var or2 = m2.or.sort();
            var and1 = m1.and.sort();
            var and2 = m2.and.sort();
            var equal = function (a1, a2) {
                return (a1.length === a2.length &&
                    (a1.length === 0 || a1.every(function (a, i) { return a === a2[i]; })));
            };
            return equal(or1, or2) && equal(and1, and2);
        }
        if (modifiers1 == null && modifiers2 == null) {
            return true;
        }
        return false;
    }
    ModifierKey.equals = equals;
    function test(e, modifiers) {
        if (modifiers == null) {
            return true;
        }
        var _a = parse(modifiers), or = _a.or, and = _a.and;
        return (or.some(function (key) { return e[key.toLowerCase() + "Key"]; }) &&
            and.every(function (key) { return e[key.toLowerCase() + "Key"]; }));
    }
    ModifierKey.test = test;
})(ModifierKey = exports.ModifierKey || (exports.ModifierKey = {}));
//# sourceMappingURL=modifier.js.map